### **形式系统 L_EI (逻辑纠缠蕴涵)**

#### **1. 语法**

**1.1. 字母表 (Alphabet)**

1.  **命题变量 (Propositional Variables):** 一个可数的集合 `P = {p₀, p₁, p₂, ...}`。
2.  **二元逻辑联结词 (Binary Logical Connectives):** `{→₁, →₂}`。
3.  **辅助符号 (Auxiliary Symbols):** `(`, `)`。

**1.2. 良构公式 (Well-Formed Formulas - WFFs)**

集合 `WFF` 是满足以下条件的最小集合：

1.  **基础条款:** 如果 `p ∈ P`，则 `p ∈ WFF`。
2.  **归纳条款:** 如果 `A ∈ WFF` 且 `B ∈ WFF`，则 `(A →₁ B) ∈ WFF` 且 `(A →₂ B) ∈ WFF`。
3.  **封闭条款:** 仅由有限次应用上述条款生成的表达式属于 `WFF`。

*注：为清晰起见，最外层括号通常省略。*

---

#### **2. 推理系统 (Deductive System)**

**2.1. 推论关系 (Entailment Relation)**

`Γ ⊢ A` 表示存在一个从前提集合 `Γ` 到结论 `A` 的推导。该推导是一个有限序列的公式，其中每个公式要么是 `Γ` 的一个成员，要么是通过应用以下推理规则从序列中前面的公式得到的。`A` 是该序列中的最后一个公式。

**2.2. 推理规则 (Inference Rules)**

本系统包含以下两条推理规则：

1.  **纠缠分离规则 1 (Entangled Modus Ponens 1 - EMP₁):**
    对于任意公式 `A`, `B`, `C`：
    `{A →₁ B, B →₂ C} ⊢ C`

2.  **纠缠分离规则 2 (Entangled Modus Ponens 2 - EMP₂):**
    对于任意公式 `A`, `B`, `C`：
    `{A →₂ B, B →₁ C} ⊢ C`

3.  **分离规则 1 (Modus Ponens 1 - MP₁):**
    对于任意公式 `A`, `B`：
    `{A, A →₁ B} ⊢ B`

---

#### **3. 模型论语义**

**3.1. 模型结构 M**

一个模型 `M` 是一个序对 `⟨V, D⟩`，其中：
1.  **值的论域 (Domain of Values):** `V = ℕ = {0, 1, 2, ...}`，即自然数集。
2.  **指定真值 (Designated Truth-Value):** `D = {0}`。

**3.2. 赋值函数 (Valuation Function)**

一个赋值函数 `v` 是一个从命题变量集合 `P` 到值的论域 `V` 的映射：
`v: P → V`

**3.3. 语义解释函数**

对于任意赋值 `v`，一个解释函数 `⟦·⟧_v` 将任意良构公式 `A` 映射到 `V` 中的一个值，其定义如下：

1.  **基础条款:**
    对于任意命题变量 `p ∈ P`，`⟦p⟧_v = v(p)`。

2.  **归纳条款:**
    对于任意良构公式 `A` 和 `B`：
    *   **联结词 `→₁` 的解释:**
        `⟦A →₁ B⟧_v = 0`  如果 `⟦B⟧_v = pred(⟦A⟧_v)`
        `⟦A →₁ B⟧_v = 1`  在其他所有情况下
        其中 `pred: ℕ → ℕ` 是前驱函数，定义为 `pred(n) = n - 1` 如果 `n > 0`，且 `pred(0) = 0`。

    *   **联结词 `→₂` 的解释:**
        `⟦A →₂ B⟧_v = 0`  如果 `⟦A⟧_v = 1` 且 `⟦B⟧_v = 0`
        `⟦A →₂ B⟧_v = 1`  在其他所有情况下

**3.4. 语义后承关系 (Semantic Consequence Relation)**

令 `Γ` 是一个 WFF 集合，`A` 是一个 WFF。我们说 `Γ` 语义上后承 `A`，记为 `Γ ⊨ A`，当且仅当对于每一个赋值函数 `v`，如果对于所有的 `B ∈ Γ` 都有 `⟦B⟧_v = 0`，那么 `⟦A⟧_v = 0`。

---

#### **4. 可靠性证明 (Soundness Proof)**

**定理 (可靠性):** 对于任意前提集 `Γ` 和任意公式 `A`，如果 `Γ ⊢ A`，则 `Γ ⊨ A`。

**证明:**
由于本系统没有公理，我们只需证明其每条推理规则都是可靠的。即，对于每条规则，如果其前提在任意赋值 `v` 下都为真（值为0），那么其结论在该赋值 `v` 下也必须为真（值为0）。

**4.1. EMP₁ 规则的可靠性**

我们需要证明 `{A →₁ B, B →₂ C} ⊨ C`。

根据语义后承关系的定义，我们必须证明：对于任意一个赋值函数 `v`，如果 `v` 使得 `EMP₁` 的所有前提都为真（即取值为0），那么 `v` 也必须使得结论为真（即取值为0）。

设 `v` 是一个任意的赋值函数，并假设 `v` 满足 `EMP₁` 的前提：
1.  `⟦A →₁ B⟧_v = 0`
2.  `⟦B →₂ C⟧_v = 0`

我们的目标是证明在这些假设下，`⟦C⟧_v = 0` 必然成立。

根据联结词 `→₁` 的语义解释，由前提 (1) 可得：
3.  `⟦B⟧_v = pred(⟦A⟧_v)`

根据联结词 `→₂` 的语义解释，由前提 (2) 可得：
4.  `⟦B⟧_v = 1`
5.  `⟦C⟧_v = 0`

为了使前提集 `{A →₁ B, B →₂ C}` 被赋值 `v` 同时满足，由 (3) 和 (4) 推知，以下等式必须成立：
6.  `pred(⟦A⟧_v) = 1`

根据前驱函数 `pred` 的定义 (`pred(n) = n - 1` for `n > 0`)，从 (6) 可得：
7.  `⟦A⟧_v = 2`

因此，任何使前提集 `{A →₁ B, B →₂ C}` 为真的赋值 `v`，都必须满足条件 `⟦A⟧_v = 2` 和 `⟦B⟧_v = 1`。在这些使前提为真的条件下，我们考察结论 `C` 的值。

根据步骤 (5) 的推论——该推论是在假设前提 (2) 为真的条件下得出的，而我们的分析正是基于前提 (1) 和 (2) 同时为真——我们已经确定 `⟦C⟧_v = 0`。

由于对于任何一个满足前提 (1) 和 (2) 的任意赋值 `v`，结论 `⟦C⟧_v = 0` 必然成立，我们证明了 `{A →₁ B, B →₂ C} ⊨ C`。

因此，规则 `EMP₁` 是可靠的。


**4.2. EMP₂ 规则的可靠性**

我们需要证明 `{A →₂ B, B →₁ C} ⊨ C`。
假设存在一个任意的赋值 `v`，使得 `EMP₂` 的前提均为真。
1.  `⟦A →₂ B⟧_v = 0`
2.  `⟦B →₁ C⟧_v = 0`

根据 `→₂` 的语义定义，由前提 (1) 可得：
3.  `⟦A⟧_v = 1`
4.  `⟦B⟧_v = 0`

根据 `→₁` 的语义定义，由前提 (2) 可得：
5.  `⟦C⟧_v = pred(⟦B⟧_v)`

将 (4) 中 `⟦B⟧_v = 0` 的结果代入 (5)：
6.  `⟦C⟧_v = pred(0)`

根据前驱函数 `pred` 的定义，`pred(0) = 0`。因此：
7.  `⟦C⟧_v = 0`

结论 `C` 在赋值 `v` 下的值为 0。
由于 `v` 是任意一个使前提为真的赋值，因此我们证明了只要前提为真，结论也必然为真。
所以，`{A →₂ B, B →₁ C} ⊨ C` 成立。规则 `EMP₂` 是可靠的。

**4.3. MP₁ 规则的可靠性**

我们需要证明 `{A, A →₁ B} ⊨ B`。

根据语义后承关系的定义，我们必须证明：对于任意一个赋值函数 `v`，如果 `v` 使得 `MP₁` 的所有前提都为真（即取值为0），那么 `v` 也必须使得结论为真（即取值为0）。

设 `v` 是一个任意的赋值函数，并假设 `v` 满足 `MP₁` 的前提：
1.  `⟦A⟧_v = 0`
2.  `⟦A →₁ B⟧_v = 0`

我们的目标是证明在这些假设下，`⟦B⟧_v = 0` 必然成立。

根据联结词 `→₁` 的语义解释，由前提 (2) 可得：
3.  `⟦B⟧_v = pred(⟦A⟧_v)`

将前提 (1) 中 `⟦A⟧_v = 0` 的结果代入步骤 (3) 建立的等式中：
4.  `⟦B⟧_v = pred(0)`

根据前驱函数 `pred` 的定义，`pred(0) = 0`。因此，由步骤 (4) 可得：
5.  `⟦B⟧_v = 0`

由于对于任何一个满足前提 (1) 和 (2) 的任意赋值 `v`，结论 `⟦B⟧_v = 0` 必然成立，我们证明了 `{A, A →₁ B} ⊨ B`。

因此，规则 `MP₁` 是可靠的。

**结论:**
因为系统的所有推理规则都是可靠的，所以该形式系统 `L_EI` 是可靠的。证明完毕。


#### **5. 扩展系统 `L_EI-1` 及其新语义模型**

---

##### **5.1. 公理模式**

向形式系统 `L_EI` 中添加以下公理模式，形成扩展系统 **`L_EI-1`**。

**5.1.1. 公理模式 Ax-Id₁ (同一律)**

对于任意良构公式 `A`，以下公式是一个公理：
`A →₁ A`

---

##### **5.2. `L_EI-1` 的语义模型**

我们为系统 `L_EI-1` 构建一个模型 `M`。

**5.2.1. 语义域**

1.  **真值集合 (Set of Truth Values):** `V = {0, 1, 2}`。
2.  **指定真值集合 (Set of Designated Values):** `D = {2}`。
    一个公式 `A` 在一个赋值下被视为**真**，当且仅当其真值为 `2`。

**5.2.2. 联结词的解释**

逻辑联结词 `→₁` 和 `→₂` 被解释为定义在 `V` 上的二元函数 `I(→₁)` 和 `I(→₂)`，其定义如下：

**表 1: `I(→₁)` 的真值表**
| `I(→₁)` | 0 | 1 | 2 |
|:---:|:-:|:-:|:-:|
| **0** | 2 | 2 | 2 |
| **1** | 0 | 2 | 2 |
| **2** | 0 | 0 | 2 |

**表 2: `I(→₂)` 的真值表**
| `I(→₂)` | 0 | 1 | 2 |
|:---:|:-:|:-:|:-:|
| **0** | 1 | 1 | 2 |
| **1** | 1 | 1 | 2 |
| **2** | 1 | 1 | 2 |

**5.2.3. 赋值与语义后承**

1.  **赋值 (Valuation):** 一个赋值 `v` 是一个函数 `v: P → V`，它将每个命题变量映射到一个真值。
2.  **真值函数 (Truth Function):** 每个赋值 `v` 可以被唯一地扩展为一个真值函数 `v*: WFF → V`，其定义如下：
    *   对于 `p ∈ P`, `v*(p) = v(p)`。
    *   `v*(A →₁ B) = I(→₁)(v*(A), v*(B))`。
    *   `v*(A →₂ B) = I(→₂)(v*(A), v*(B))`。
3.  **语义后承 (Semantic Entailment):** 对于一个公式集合 `Γ` 和一个公式 `A`，我们称 `Γ` 语义上蕴涵 `A` (记作 `Γ ⊨ A`)，当且仅当对于每一个赋值 `v`，如果对所有 `B ∈ Γ` 均有 `v*(B) ∈ D`，则 `v*(A) ∈ D`。
4.  **重言式 (Tautology):** 一个公式 `A` 是重言式，当且仅当 `∅ ⊨ A`。

---

##### **5.3. `L_EI-1` 的可靠性 (Soundness)**

**定理:** 系统 `L_EI-1` 相对于模型 `M` 是可靠的。即，如果 `Γ ⊢ A`，则 `Γ ⊨ A`。

**证明:**
证明通过对推导长度的归纳来进行。我们必须证明：
1.  `L_EI-1` 的公理模式在 `M` 中是重言式。
2.  `L_EI-1` 的所有推理规则都是保真（truth-preserving）的。

**5.3.1. 公理模式 Ax-Id₁ 的可靠性**

需证明：对于任意公式 `A`，`∅ ⊨ A →₁ A`。
这等价于证明对于任意赋值 `v`，`v*(A →₁ A) = 2`。
令 `v*(A) = x`，其中 `x ∈ V`。
根据真值函数的定义，`v*(A →₁ A) = I(→₁)(v*(A), v*(A)) = I(→₁)(x, x)`。
我们分情况讨论 `x` 的所有可能值：
*   **情况 1:** 若 `x = 0`，则 `I(→₁)(0, 0) = 2`。
*   **情况 2:** 若 `x = 1`，则 `I(→₁)(1, 1) = 2`。
*   **情况 3:** 若 `x = 2`，则 `I(→₁)(2, 2) = 2`。
在所有情况下，`v*(A →₁ A) = 2`。因此，`Ax-Id₁` 是重言式。

**5.3.2. 推理规则的可靠性**

**1. 规则 MP₁: `{A, A →₁ B} ⊢ B`**
需证明：如果 `v*(A) = 2` 且 `v*(A →₁ B) = 2`，则 `v*(B) = 2`。
设 `v*(A) = x` 且 `v*(B) = y`。
前提为 `x = 2` 且 `I(→₁)(x, y) = 2`，即 `I(→₁)(2, y) = 2`。
查阅**表 1** 中 `I(→₁)` 的第三行 `(x=2)`，`[0, 0, 2]`。
使 `I(→₁)(2, y) = 2` 成立的唯一可能是 `y = 2`。
因此，`v*(B) = 2`。该规则是保真的。

**2. 规则 EMP₁: `{A →₁ B, B →₂ C} ⊢ C`**
需证明：如果 `v*(A →₁ B) = 2` 且 `v*(B →₂ C) = 2`，则 `v*(C) = 2`。
设 `v*(A) = x`, `v*(B) = y`, `v*(C) = z`。
前提为 `I(→₁)(x, y) = 2` 且 `I(→₂)(y, z) = 2`。
我们分情况讨论 `y` 的所有可能值：
*   **情况 1: `y = 0`。**
    *   第一个前提 `I(→₁)(x, 0) = 2`。查阅**表 1** 的第一列，要求 `x = 0`。
    *   第二个前提 `I(→₂)(0, z) = 2`。查阅**表 2** 的第一行，要求 `z = 2`。
*   **情况 2: `y = 1`。**
    *   第一个前提 `I(→₁)(x, 1) = 2`。查阅**表 1** 的第二列，要求 `x ∈ {0, 1}`。
    *   第二个前提 `I(→₂)(1, z) = 2`。查阅**表 2** 的第二行，要求 `z = 2`。
*   **情况 3: `y = 2`。**
    *   第一个前提 `I(→₁)(x, 2) = 2`。查阅**表 1** 的第三列，`x` 可为任意值。
    *   第二个前提 `I(→₂)(2, z) = 2`。查阅**表 2** 的第三行，要求 `z = 2`。
在所有可能的情况下，结论 `z` 的值均为 `2`。因此，`v*(C) = 2`。该规则是保真的。

**3. 规则 EMP₂: `{A →₂ B, B →₁ C} ⊢ C`**
需证明：如果 `v*(A →₂ B) = 2` 且 `v*(B →₁ C) = 2`，则 `v*(C) = 2`。
设 `v*(A) = x`, `v*(B) = y`, `v*(C) = z`。
前提为 `I(→₂)(x, y) = 2` 且 `I(→₁)(y, z) = 2`。
*   从第一个前提 `I(→₂)(x, y) = 2` 出发，查阅**表 2**。值为 `2` 的项仅出现在第三列，这意味着 `y` 必须为 `2`。
*   将 `y = 2` 代入第二个前提，得到 `I(→₁)(2, z) = 2`。
*   查阅**表 1** 的第三行，使 `I(→₁)(2, z) = 2` 成立的唯一可能是 `z = 2`。
因此，`v*(C) = 2`。该规则是保真的。

由于所有公理模式均为重言式，且所有推理规则均为保真的，系统 `L_EI-1` 是可靠的。**Q.E.D.**

---

#### **6. 扩展系统 L_EI-2 的代数语义与可靠性**

##### **6.1. 扩展系统 L_EI-2 (Extended System L_EI-2)**

在形式系统 `L_EI` 的基础上，我们引入以下公理模式，构成扩展系统 `L_EI-2`。

**公理模式 S₂ (伪自反公理 - Axiom Schema of Pseudo-Reflexivity):**
对于任意良构公式 `A`，以下公式是一个公理：
`(A →₁ A) →₂ (A →₁ A)`

因此，系统 `L_EI-2` 的推论关系 `⊢` 由推理规则 `MP₁`, `EMP₁`, `EMP₂` 和公理模式 `S₂` 定义。

##### **6.2. 代数模型 M (Algebraic Model M)**

我们为 `L_EI-2` 定义一个代数模型 `M = <D, T, V, I>`。

1.  **论域 (Domain):** `D = ℝ` (实数集)。

2.  **指定真值集合 (Set of Designated Truth Values):** `T = {0}`。

3.  **赋值函数集合 (Set of Valuation Functions):** `V` 是所有函数 `v: P → D` 的集合，其中 `P` 是命题变量集。每个 `v ∈ V` 通过以下归纳定义唯一地扩展为函数 `v: WFF → D`：
    *   `v(p)` 对于 `p ∈ P` 由赋值函数直接给出。
    *   `v(A →₁ B) = i₁(v(A), v(B))`
    *   `v(A →₂ B) = i₂(v(A), v(B))`

4.  **解释函数集合 (Set of Interpretation Functions):** `I = {i₁, i₂}`，其中 `i₁, i₂: D × D → D` 定义如下：
    *   `i₁(x, y) = y - min(0, x)`
    *   `i₂(x, y) = y - max(0, x)`

##### **6.3. 可靠性证明 (Soundness Proof)**

**定义 6.3.1 (语义概念):**
*   一个赋值 `v` **满足 (satisfies)** 公式 `A`，记作 `v ⊨ A`，当且仅当 `v(A) ∈ T` (即 `v(A) = 0`)。
*   一个公式 `A` 在模型 `M` 中是**有效的 (valid)** 或称**重言式 (tautology)**，记作 `⊨_M A`，当且仅当对于所有 `v ∈ V` 都有 `v ⊨ A`。
*   公式集合 `Γ` **语义蕴涵 (semantically entails)** 公式 `A`，记作 `Γ ⊨_M A`，当且仅当对于所有 `v ∈ V`，若对任意 `B ∈ Γ` 都有 `v ⊨ B`，则 `v ⊨ A`。

系统的**可靠性 (soundness)** 是指：若 `Γ ⊢ A`，则 `Γ ⊨_M A`。为证明此点，我们需证明所有公理都是有效的，且所有推理规则都保真（即，若前提被满足，则结论也被满足）。

**引理 6.3.2 (代数恒等式):** 对于任意 `x ∈ ℝ`：
1.  `max(0, min(0, x)) = 0`
2.  `min(0, max(0, x)) = 0`
3.  `x - min(0, x) = max(0, x)`

**证明:**
1.  情况 (i): 若 `x ≥ 0`，则 `min(0, x) = 0`。`max(0, 0) = 0`。
    情况 (ii): 若 `x < 0`，则 `min(0, x) = x`。`max(0, x) = 0`。
    因此，`max(0, min(0, x)) = 0` 恒成立。
2.  情况 (i): 若 `x ≥ 0`，则 `max(0, x) = x`。`min(0, x) = 0`。
    情况 (ii): 若 `x < 0`，则 `max(0, x) = 0`。`min(0, 0) = 0`。
    因此，`min(0, max(0, x)) = 0` 恒成立。
3.  情况 (i): 若 `x ≥ 0`，则 `x - min(0, x) = x - 0 = x`。而 `max(0, x) = x`。
    情况 (ii): 若 `x < 0`，则 `x - min(0, x) = x - x = 0`。而 `max(0, x) = 0`。
    因此，`x - min(0, x) = max(0, x)` 恒成立。∎

**定理 6.3.3 (公理的有效性):** 公理模式 `S₂` 在模型 `M` 中是有效的。
**证明:** 设 `v ∈ V` 为任意赋值，并令 `v(A) = a`。我们需证明 `v((A →₁ A) →₂ (A →₁ A)) = 0`。
1.  计算子公式 `X = A →₁ A` 的值：
    `v(X) = v(A →₁ A) = i₁(v(A), v(A)) = i₁(a, a) = a - min(0, a)`。
    根据引理 6.3.2.3，`v(X) = max(0, a)`。

2.  计算整个公式 `X →₂ X` 的值：
    `v(X →₂ X) = i₂(v(X), v(X)) = v(X) - max(0, v(X))`。

3.  将 `v(X)` 的值代入：
    `v(X →₂ X) = max(0, a) - max(0, max(0, a))`。

4.  由于 `max(0, a) ≥ 0`，所以 `max(0, max(0, a))` 等于 `max(0, a)`。

5.  因此，`v(X →₂ X) = max(0, a) - max(0, a) = 0`。

由于 `v` 是任意的，故 `⊨_M (A →₁ A) →₂ (A →₁ A)`。∎

**定理 6.3.4 (推理规则的可靠性):** 推理规则 `MP₁`, `EMP₁`, `EMP₂` 在模型 `M` 中是可靠的。
**证明:** 设 `v ∈ V` 为任意赋值。

1.  **MP₁: {A, A →₁ B} ⊢ B**
    假设前提被 `v` 满足，即 `v(A) = 0` 且 `v(A →₁ B) = 0`。令 `v(A) = a` 和 `v(B) = b`。
    前提为 `a = 0` 和 `i₁(a, b) = 0`。
    `i₁(a, b) = b - min(0, a) = 0`。
    将 `a = 0` 代入，得 `b - min(0, 0) = b - 0 = b = 0`。
    因此 `v(B) = 0`，结论被满足。

2.  **EMP₁: {A →₁ B, B →₂ C} ⊢ C**
    假设前提被 `v` 满足，即 `v(A →₁ B) = 0` 且 `v(B →₂ C) = 0`。令 `v(A) = a`, `v(B) = b`, `v(C) = c`。
    由 `v(A →₁ B) = 0`，得 `i₁(a, b) = b - min(0, a) = 0`，故 `b = min(0, a)`。
    由 `v(B →₂ C) = 0`，得 `i₂(b, c) = c - max(0, b) = 0`，故 `c = max(0, b)`。
    将 `b` 的表达式代入 `c`，得 `c = max(0, min(0, a))`。
    根据引理 6.3.2.1，`c = 0`。
    因此 `v(C) = 0`，结论被满足。

3.  **EMP₂: {A →₂ B, B →₁ C} ⊢ C**
    假设前提被 `v` 满足，即 `v(A →₂ B) = 0` 且 `v(B →₁ C) = 0`。令 `v(A) = a`, `v(B) = b`, `v(C) = c`。
    由 `v(A →₂ B) = 0`，得 `i₂(a, b) = b - max(0, a) = 0`，故 `b = max(0, a)`。
    由 `v(B →₁ C) = 0`，得 `i₁(b, c) = c - min(0, b) = 0`，故 `c = min(0, b)`。
    将 `b` 的表达式代入 `c`，得 `c = min(0, max(0, a))`。
    根据引理 6.3.2.2，`c = 0`。
    因此 `v(C) = 0`，结论被满足。

综上，所有推理规则均可靠。∎

**结论 6.3.5:** 形式系统 `L_EI-2` 对于代数模型 `M` 是可靠的。