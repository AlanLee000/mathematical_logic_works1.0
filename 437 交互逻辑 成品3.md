### **形式系统：PIL-M**

#### **1. 语法 (Syntax)**

##### **1.1. 字母表 (Alphabet)**

*   **命题变量 (Propositional Variables):** 一个可数的集合 $V = \{p, q, r, ...\}$。
*   **一元逻辑联结词 (Unary Connective):** `⨽`。
*   **二元逻辑联结词 (Binary Connectives):** $\{⊗, ⊕\}$。
*   **辅助符号 (Auxiliary Symbols):** $($, $)$。

##### **1.2. 合式公式 (Well-formed Formulas - WFFs)**

我们使用 $Form$ 来表示所有合式公式的集合。该集合是满足以下规则的最小集合：
1.  **基本情况：** 若 $p ∈ V$，则 $p ∈ Form$。
2.  **归纳情况 1：** 若 $A ∈ Form$，则 $(⨽A) ∈ Form$。
3.  **归纳情况 2：** 若 $A ∈ Form$ 且 $B ∈ Form$，则 $(A ⊗ B) ∈ Form$ 且 $(A ⊕ B) ∈ Form$。

为简洁起见，我们将省略最外层的括号。在元语言中，我们使用大写拉丁字母 $A, B, C, ...$ 作为表示任意合式公式的元变量，使用大写希腊字母 $Γ, Δ, ...$ 作为表示 $Form$ 的**有限多重集 (finite multisets)** 的元变量。

---

#### **2. 证明系统 (Proof System)**

##### **2.1. 公理模式 (Axiom Schema)**

系统 PIL-M 有一个公理模式。对于任意公式 $A$，以下公式是公理：

*   **(LEM) 排中律 (Law of Excluded Middle):**
    $$A ⊕ (⨽A)$$

##### **2.2. 推理规则 (Rules of Inference)**

系统 PIL-M 有五条推理规则。在下面的表示中，横线上方是前提，横线下方是结论。

*   **(LI-1) 左交互律 1 (Left Interaction 1):**
    $$ \frac{(A ⊗ B) ⊕ C}{(A ⊕ B) ⊗ C} $$

*   **(LI-2) 左交互律 2 (Left Interaction 2):**
    $$ \frac{(A ⊕ B) ⊗ C}{(A ⊗ B) ⊕ C} $$

*   **(RI-1) 右交互律 1 (Right Interaction 1):**
    $$ \frac{A ⊗ (B ⊕ C)}{A ⊕ (B ⊗ C)} $$

*   **(RI-2) 右交互律 2 (Right Interaction 2):**
    $$ \frac{A ⊕ (B ⊗ C)}{A ⊗ (B ⊕ C)} $$

*   **(IC) 交互推演 (Interaction-Cut):**
    $$ \frac{A ⊗ C \qquad (⨽A) ⊕ B}{B ⊗ C} $$

##### **2.3. 证明与推导 (Proof and Deduction)**

*   一个在 PIL-M 中对公式 $A$ 的**证明 (proof)**，是一个有限的公式序列 $C_1, C_2, ..., C_n$，满足以下条件：
    1.  序列的最后一个公式是 $A$，即 $C_n = A$。
    2.  序列中的每一个公式 $C_i$ (对于 $1 \le i \le n$) 必须满足以下条件之一：
        *   $C_i$ 是公理模式 (LEM) 的一个实例。
        *   $C_i$ 是通过对序列中早于 $C_i$ 的一个或多个公式应用某条推理规则而得到的。
    如果存在一个对 $A$ 的证明，我们称 $A$ 是 PIL-M 的一个**定理 (theorem)**，记作 $⊢_{PIL-M} A$。

*   一个在 PIL-M 中从一个**公式的多重集** $Γ$ 对公式 $A$ 的**推导 (deduction)**，是一个有限的公式序列 $C_1, C_2, ..., C_n$，满足以下条件：
    1.  序列的最后一个公式是 $A$，即 $C_n = A$。
    2.  序列中的每一个公式 $C_i$ (对于 $1 \le i \le n$) 必须满足以下条件之一：
        *   $C_i$ 是公理模式 (LEM) 的一个实例。
        *   $C_i$ 是 $Γ$ 中的一个元素（即，一个**假设 (hypothesis)**）。
        *   $C_i$ 是通过对序列中早于 $C_i$ 的一个或多个公式应用某条推理规则而得到的。
    如果存在一个从 $Γ$ 对 $A$ 的推导，我们称 $A$ 是**可从 $Γ$ 推导的**，记作 $Γ ⊢_{PIL-M} A$。

---

#### **3. 语义 (Semantics)**

##### **3.1. PIL-M-模型 (PIL-M-Model)**

一个 **PIL-M-模型** 是一个三元组 $M = \langle T, D, F \rangle$，其中：

1.  **真值集合 (Set of Truth Values):** $T$ 是整数集，即 $T = \mathbb{Z} = \{..., -1, 0, 1, ...\}$。
2.  **指定值集合 (Set of Designated Values):** $D$ 是正整数集，即 $D = \{z \in \mathbb{Z} \mid z \ge 1\}$。
3.  **联结词解释函数 (Interpretation Functions):** $F$ 是一个映射，它将逻辑联结词 `⨽`, $⊗$, $⊕$ 解释为 $T$ 上的函数：
    *   $f_⨽: T \to T$，对于任意 $x \in T, f_⨽(x) = 1 - x$。
    *   $f_⊗: T \times T \to T$，对于任意 $x, y \in T, f_⊗(x, y) = x + y + 1$。
    *   $f_⊕: T \times T \to T$，对于任意 $x, y \in T, f_⊕(x, y) = x + y$。

##### **3.2. 赋值与解释 (Valuation and Interpretation)**

1.  一个**赋值 (valuation)** 是一个函数 $v: V \to T$，它将每个命题变量映射到一个真值。
2.  任意赋值 $v$ 可以被唯一地扩展为一个**解释函数 (interpretation function)** $v^*: Form \to T$，其定义遵循以下归纳规则：
    *   **基本情况：** 对于任意命题变量 $p \in V$, $v^*(p) = v(p)$。
    *   **归纳情况：** 对于任意公式 $A, B \in Form$：
        *   $v^*(⨽A) = f_⨽(v^*(A)) = 1 - v^*(A)$。
        *   $v^*(A ⊗ B) = f_⊗(v^*(A), v^*(B)) = v^*(A) + v^*(B) + 1$。
        *   $v^*(A ⊕ B) = f_⊕(v^*(A), v^*(B)) = v^*(A) + v^*(B)$。
    为表述简洁，下文将使用 $v$ 代替 $v^*$ 来表示解释函数。

##### **3.3. 语义后承 (Semantic Consequence)**

*   **语义后承关系 (Semantic Consequence Relation):** 令 $Γ$ 为一个公式的有限多重集，$A$ 为一个公式。我们称 $A$ 是 $Γ$ 的**语义后承**，记作 $Γ \models_{PIL-M} A$，其定义为：
    > 对于**每一个**赋值 $v: V \to T$，**如果**对于所有 $B \in Γ$ 均有 $v(B) \in D$，**那么** $v(A) \in D$。

*   **有效性 (Validity):** 一个公式 $A$ 被称为**有效的 (valid)**，记作 $\models_{PIL-M} A$，当且仅当 $∅ \models_{PIL-M} A$。这等价于：
    > 对于**每一个**赋值 $v: V \to T$，都有 $v(A) \in D$。

---

#### **4. PIL-M 的可靠性定理 (Soundness Theorem for PIL-M)**

**定理：** 对于任意公式的有限多重集 $Γ$ 和任意公式 $A$，如果 $Γ ⊢_{PIL-M} A$，则 $Γ \models_{PIL-M} A$。

**证明：**
此证明通过对推导的长度 $n$ 进行数学归纳法来完成。令 $C_1, C_2, ..., C_n$ 是一个从假设 $Γ$ 得到结论 $A$ 的推导，其中 $C_n = A$。我们将证明，对于序列中的每一个公式 $C_i$ ($1 \le i \le n$)，都有 $Γ \models_{PIL-M} C_i$。

**归纳基础 (Base Case):** $n = 1$。
$C_1$ 必须是 $Γ$ 中的一个假设，或者是一个公理。

*   **情况 1: $C_1 \in Γ$ ($C_1$ 是一个假设)。**
    我们需要证明 $Γ \models_{PIL-M} C_1$。根据语义后承的定义，我们需要表明：对于任意赋值 $v$，若对所有 $B \in Γ$ 都有 $v(B) \in D$，则 $v(C_1) \in D$。此蕴含关系的前提直接包含了结论，因此该蕴含必然成立。故 $Γ \models_{PIL-M} C_1$。

*   **情况 2: $C_1$ 是公理模式 (LEM) 的一个实例。**
    $C_1$ 的形式为 $A ⊕ (⨽A)$。我们需要证明 $Γ \models_{PIL-M} C_1$。我们证明一个更强的结论：$\models_{PIL-M} C_1$。
    设 $v$ 为任意赋值。令 $v(A) = x$，其中 $x \in \mathbb{Z}$。
    $v(C_1) = v(A ⊕ (⨽A)) = v(A) + v(⨽A) = x + (1 - x) = 1$。
    由于 $1 \in D$，所以对于任意赋值 $v$ 都有 $v(C_1) \in D$。
    因此 $\models_{PIL-M} C_1$ 成立，进而 $Γ \models_{PIL-M} C_1$ 也成立。

**归纳步骤 (Inductive Step):**
**归纳假设：** 假设对于所有 $j < i$，$Γ \models_{PIL-M} C_j$ 成立。
我们需要证明 $Γ \models_{PIL-M} C_i$。
$C_i$ 的来源有三种可能：是一个假设，是一个公理，或是通过推理规则从前面的公式得到。

*   **情况 1 & 2: $C_i \in Γ$ 或 $C_i$ 是一个公理。**
    其证明与归纳基础中的情况 1, 2 完全相同，结论 $Γ \models_{PIL-M} C_i$ 成立。

*   **情况 3: $C_i$ 是通过对某个或某几个 $C_j$ ($j < i$) 应用推理规则而得到的。**
    设 $v$ 是一个任意的赋值，并假设其满足条件 $\mathcal{P}$：即对所有 $X \in Γ$ 都有 $v(X) \in D$。我们的目标是证明 $v(C_i) \in D$。
    根据归纳假设，对于任何作为前提的公式 $C_j$ ($j<i$)，都有 $Γ \models_{PIL-M} C_j$。这意味着在我们的赋值 $v$ 下，必然有 $v(C_j) \in D$。

    *   **规则 (LI-1), (LI-2), (RI-1), (RI-2):**
        这些规则的形式均为 $\frac{P}{Q}$。我们来验证其中之一，其余同理。
        以 (LI-1) 为例: $P = (A ⊗ B) ⊕ C$，$Q = (A ⊕ B) ⊗ C$。
        $v(P) = v(A ⊗ B) + v(C) = (v(A) + v(B) + 1) + v(C)$。
        $v(Q) = v(A ⊕ B) + v(C) + 1 = (v(A) + v(B)) + v(C) + 1$。
        由于整数加法的结合律和交换律，$v(P) = v(Q)$。
        根据归纳假设，$v(P) \in D$。因此，$v(Q) \in D$ 也必然成立。其他三个交互律同理可证。

    *   **规则 (IC):** $C_i$ 为 $B ⊗ C$，由前提 $C_j = A ⊗ C$ 和 $C_k = (⨽A) ⊕ B$ ($j, k < i$) 推得。
        根据归纳假设，我们有 $v(C_j) \in D$ 且 $v(C_k) \in D$。
        1.  从 $v(C_j) \in D$，我们得到 $v(A ⊗ C) \ge 1$。
            $v(A) + v(C) + 1 \ge 1 \implies v(A) + v(C) \ge 0$。 (记为 不等式 1)
        2.  从 $v(C_k) \in D$，我们得到 $v((⨽A) ⊕ B) \ge 1$。
            $v(⨽A) + v(B) \ge 1 \implies (1 - v(A)) + v(B) \ge 1 \implies v(B) \ge v(A)$。 (记为 不等式 2)

        我们需要证明 $v(C_i) \in D$，即 $v(B ⊗ C) \ge 1$。
        $v(B ⊗ C) = v(B) + v(C) + 1$。
        根据不等式 2，我们有 $v(B) \ge v(A)$。
        将此不等式两边同时加上 $v(C)$，得到：
        $v(B) + v(C) \ge v(A) + v(C)$。
        根据不等式 1，我们有 $v(A) + v(C) \ge 0$。
        通过不等式的传递性，可得：
        $v(B) + v(C) \ge 0$。
        最后，在此不等式两边同时加 1：
        $v(B) + v(C) + 1 \ge 1$。
        这正是 $v(B ⊗ C) \ge 1$。因此 $v(C_i) \in D$。

    在所有推理规则的情况下，我们都证明了若前提的语义值在 $v$ 下属于 $D$，则结论的语义值在 $v$ 下也必然属于 $D$。

**结论：**
通过对推导长度的数学归纳法，我们证明了对于推导中的任意一行 $C_i$，都有 $Γ \models_{PIL-M} C_i$。特别地，对于推导的最后一行 $C_n = A$，我们有 $Γ \models_{PIL-M} A$。

证明完毕。∎