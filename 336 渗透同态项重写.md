## 渗透同态项重写PHTR

本系统是一个基于带等词的一阶谓词逻辑的形式理论。

### **1. 形式语言 $PHTR$**

**1.1. 符号表 (Alphabet)**

1.  **变量 (Variables):** 一个可数无限集 $V = \{v_0, v_1, v_2, \dots\}$。为方便起见，我们使用 $x, y, z, \dots$ 作为其元变量。
2.  **常量 (Constants):** 一个常量符号: `1`。
3.  **函数符号 (Function Symbols):**
    *   `equiv`: 二元函数符号。
    *   `·`: 二元函数符号。
4.  **谓词符号 (Predicate Symbols):**
    *   ` = `: 二元谓词符号。
5.  **逻辑联结词 (Logical Connectives):** `¬` (否定), `→` (蕴含)。
6.  **量词 (Quantifiers):** `∀` (全称量词)。
7.  **辅助符号 (Auxiliary Symbols):** `(`, `)`。

**1.2. 项 (Terms)**

$PHTR$ 的项集合是满足以下条件的最小集合:
1.  任何变量 $v \in V$ 都是一个项。
2.  常量 `1` 是一个项。
3.  若 $t_1$ 和 $t_2$ 是项，则 `equiv(t₁, t₂)` 是一个项。
4.  若 $t_1$ 和 $t_2$ 是项，则 `·(t₁, t₂)` 是一个项。

**1.3. 合式公式 (Well-Formed Formulas - WFFs)**

$PHTR$ 的合式公式集合是满足以下条件的最小集合:
1.  若 $t_1$ 和 $t_2$ 是项，则 `t₁ = t₂` 是一个原子公式，也是一个合式公式。
2.  若 $\phi$ 是一个合式公式，则 `(¬φ)` 是一个合式公式。
3.  若 $\phi$ 和 $\psi$ 是合式公式，则 `(φ → ψ)` 是一个合式公式。
4.  若 $\phi$ 是一个合式公式且 $x$ 是一个变量，则 `(∀x φ)` 是一个合式公式。

**1.4. 辅助定义**

为简洁起见，我们引入以下元语言缩写：
*   `(φ ∧ ψ)` 定义为 `¬(φ → ¬ψ)`
*   `(φ ∨ ψ)` 定义为 `(¬φ → ψ)`
*   `(φ ↔ ψ)` 定义为 `((φ → ψ) ∧ (ψ → φ))`
*   `(∃x φ)` 定义为 `¬(∀x ¬φ)`
*   `t₁ ≠ t₂` 定义为 `¬(t₁ = t₂)`

---

### **2. 公理系统**

公理系统由逻辑公理、推理规则和非逻辑公理组成。

**2.1. 逻辑公理**

对于任意合式公式 $\phi, \psi, \chi$：

*   **A1:** $(\phi \to (\psi \to \phi))$
*   **A2:** $((\phi \to (\psi \to \chi)) \to ((\phi \to \psi) \to (\phi \to \chi)))$
*   **A3:** $((¬\phi \to ¬\psi) \to (\psi \to \phi))$
*   **A4:** $(\forall x \phi(x) \to \phi(t))$, 其中项 $t$ 在 $\phi(x)$ 中对 $x$ 是自由可代入的。
*   **A5:** $(\forall x (\phi \to \psi) \to (\phi \to \forall x \psi))$, 其中 $\phi$ 中不含自由出现的变量 $x$。

**2.2. 等词公理 (Axioms of Equality)**

对于任意变量 $x, y$ 和项 $t_1, \dots, t_n, s_1, \dots, s_n$：

*   **A6 (自反性):** $\forall x (x = x)$
*   **A7 (替换公理模式):**
    *   对于任意 $n$ 元函数符号 $f$ (在 $PHTR$ 中为 `equiv` 和 `·`):
        $\forall x_1 \dots \forall x_n \forall y_1 \dots \forall y_n ( (x_1=y_1 \land \dots \land x_n=y_n) \to f(x_1, \dots, x_n) = f(y_1, \dots, y_n) )$
    *   对于任意 $n$ 元谓词符号 $P$ (在 $PHTR$ 中为 ` = `)
        $\forall x_1 \dots \forall x_n \forall y_1 \dots \forall y_n ( (x_1=y_1 \land \dots \land x_n=y_n) \to (P(x_1, \dots, x_n) \to P(y_1, \dots, y_n)) )$

**2.3. 推理规则 (Rules of Inference)**

1.  **分离规则 (Modus Ponens):** 从 $\phi$ 和 $(\phi \to \psi)$，可推出 $\psi$。
2.  **全称概括 (Generalization):** 从 $\phi$，可推出 $(\forall x \phi)$。

**2.4. 非逻辑公理 (Non-Logical Axioms)**

以下公理定义了理论 $PHTR$ 的特定性质。

*   **B1: 左侧渗透**
    $\forall a \forall b \forall x(· (x ,\text{equiv} (a, b)) = \text{equiv}( b, · (x, a)))$

*   **B2: 左同态**
    $\forall a \forall b \forall x (· (x,\text{equiv}( a, b)) = \text{equiv} (·( x, a), ·(x, b)))$

*   **EA (等价定义):**
    $\forall x \forall y ( \text{equiv}(x, y) = 1 \leftrightarrow x = y )$


---

### **3. 语义、可靠性与一致性**

本节将为形式系统 $PHTR$ 提供一个模型论语义，并在此基础上证明其可靠性与非平凡一致性。

#### **3.1. PHTR 的模型**

我们构造一个具体的结构 $\mathcal{M}$，并证明它是 $PHTR$ 的一个模型。

##### **3.1.1. 结构定义**

定义结构 $\mathcal{M} = \langle D, I \rangle$，其中：

1.  **论域 (Domain):** $D = \{0, 1\}$。由于 $|D|=2 \ge 2$，该结构是非平凡的。
2.  **释义 (Interpretation):** $I$ 是一个释义函数，定义如下：
    *   **常量符号 `1`:**
        $1^{\mathcal{M}} = I(1) = 1 \in D$
    *   **谓词符号 ` = `:**
        $=^{\mathcal{M}} = I(=)$ 是 $D$ 上的恒等关系，即
        $x =^{\mathcal{M}} y$ 为真，当且仅当 $x$ 与 $y$ 是 $D$ 中相同的元素。
    *   **函数符号 `equiv`:**
        $\text{equiv}^{\mathcal{M}} = I(\text{equiv})$ 是一个二元函数 $\text{equiv}^{\mathcal{M}}: D \times D \to D$，定义为：
        $$ \text{equiv}^{\mathcal{M}}(x, y) = \begin{cases} 1 & \text{若 } x =^{\mathcal{M}} y \\ 0 & \text{若 } x \neq^{\mathcal{M}} y \end{cases} $$
    *   **函数符号 `·`:**
        $·^{\mathcal{M}} = I(·)$ 是一个二元函数 $·^{\mathcal{M}}: D \times D \to D$，定义为射影函数：
        $$ x ·^{\mathcal{M}} y = y $$

##### **3.1.2. 公理验证**

为证明 $\mathcal{M}$ 是 $PHTR$ 的一个模型（记为 $\mathcal{M} \models PHTR$），我们必须验证所有非逻辑公理在 $\mathcal{M}$ 中对于任意变量赋值均为真。

**1. 验证公理 EA: $\forall x \forall y ( \text{equiv}(x, y) = 1 \leftrightarrow x = y )$**

令 $v$ 是任意一个变量赋值函数 $v: V \to D$。我们需要证明 $\mathcal{M}, v \models \text{equiv}(x, y) = 1 \leftrightarrow x = y$。
设 $v(x) = x_0$ 且 $v(y) = y_0$，其中 $x_0, y_0 \in D$。

*   **情形 1: $x_0 =^{\mathcal{M}} y_0$**
    *   左端 (LHS)：$\text{equiv}^{\mathcal{M}}(x_0, y_0) = 1$。因此，等式 $\text{equiv}(x, y) = 1$ 在该赋值下被解释为 $1 =^{\mathcal{M}} 1$，此为真。
    *   右端 (RHS)：$x = y$ 在该赋值下被解释为 $x_0 =^{\mathcal{M}} y_0$，此为真。
    *   根据双条件句的真值表，$\text{真} \leftrightarrow \text{真}$ 为真。

*   **情形 2: $x_0 \neq^{\mathcal{M}} y_0$**
    *   左端 (LHS)：$\text{equiv}^{\mathcal{M}}(x_0, y_0) = 0$。因此，等式 $\text{equiv}(x, y) = 1$ 在该赋值下被解释为 $0 =^{\mathcal{M}} 1$，此为假。
    *   右端 (RHS)：$x = y$ 在该赋值下被解释为 $x_0 =^{\mathcal{M}} y_0$，此为假。
    *   根据双条件句的真值表，$\text{假} \leftrightarrow \text{假}$ 为真。

由于对 $D$ 中元素的所有选择均成立，故 $\mathcal{M} \models \text{EA}$。

**2. 验证公理 B1: $\forall a \forall b \forall x(· (x ,\text{equiv} (a, b)) = \text{equiv}( b, · (x, a)))$**

设 $v(a)=a_0, v(b)=b_0, v(x)=x_0$，其中 $a_0, b_0, x_0 \in D$。

*   左端 (LHS) 的释义为：
    $x_0 ·^{\mathcal{M}} (\text{equiv}^{\mathcal{M}}(a_0, b_0))$
    根据 $·^{\mathcal{M}}$ 的定义，该表达式的值等于其第二个参数，即 $\text{equiv}^{\mathcal{M}}(a_0, b_0)$。

*   右端 (RHS) 的释义为：
    $\text{equiv}^{\mathcal{M}}(b_0, x_0 ·^{\mathcal{M}} a_0)$
    首先计算内层函数：$x_0 ·^{\mathcal{M}} a_0 = a_0$。
    代入后，表达式变为 $\text{equiv}^{\mathcal{M}}(b_0, a_0)$。

*   验证等式：
    公理要求 $\text{equiv}^{\mathcal{M}}(a_0, b_0) =^{\mathcal{M}} \text{equiv}^{\mathcal{M}}(b_0, a_0)$。
    根据 $\text{equiv}^{\mathcal{M}}$ 的定义，其结果仅取决于输入是否相等。因为 $a_0 =^{\mathcal{M}} b_0$ 等价于 $b_0 =^{\mathcal{M}} a_0$，所以该函数是对称的。故等式恒成立。

因此，$\mathcal{M} \models \text{B1}$。

**3. 验证公理 B2: $\forall a \forall b \forall x (· (x,\text{equiv}( a, b)) = \text{equiv} (·( x, a), ·(x, b)))$**

设 $v(a)=a_0, v(b)=b_0, v(x)=x_0$，其中 $a_0, b_0, x_0 \in D$。

*   左端 (LHS) 的释义为：
    $x_0 ·^{\mathcal{M}} (\text{equiv}^{\mathcal{M}}(a_0, b_0)) = \text{equiv}^{\mathcal{M}}(a_0, b_0)$。

*   右端 (RHS) 的释义为：
    $\text{equiv}^{\mathcal{M}}(x_0 ·^{\mathcal{M}} a_0, x_0 ·^{\mathcal{M}} b_0)$
    计算内层函数：$x_0 ·^{\mathcal{M}} a_0 = a_0$ 以及 $x_0 ·^{\mathcal{M}} b_0 = b_0$。
    代入后，表达式变为 $\text{equiv}^{\mathcal{M}}(a_0, b_0)$。

*   验证等式：
    LHS 与 RHS 的释义结果均为 $\text{equiv}^{\mathcal{M}}(a_0, b_0)$，两者恒等。

因此，$\mathcal{M} \models \text{B2}$。

**结论：** 结构 $\mathcal{M}$ 满足 $PHTR$ 的所有非逻辑公理，因此 $\mathcal{M}$ 是 $PHTR$ 的一个非平凡模型。

#### **3.2. 可靠性定理 (Soundness Theorem)**

**定理 3.2.1:** 形式系统 $PHTR$ 是可靠的。即，对于任意 $PHTR$ 的合式公式集合 $\Gamma$ 和公式 $\phi$，如果 $\Gamma \vdash \phi$，则 $\Gamma \models \phi$。
(特别地，如果 $PHTR \vdash \phi$，则 $PHTR \models \phi$)

**证明:**
证明通过对推导的长度 $n$ 进行数学归纳。一个推导是一个公式序列 $\langle \phi_1, \phi_2, \dots, \phi_n \rangle$，其中每个 $\phi_i$ 要么是公理，要么是通过前面的公式应用推理规则得到的。我们需证明对于任意 $i \in \{1, \dots, n\}$，均有 $\Gamma \models \phi_i$。

*   **基础情形 (n=1):**
    若推导长度为 1，则 $\phi_1$ 必须是 $\Gamma$ 中的一个公式，或者是 $PHTR$ 的一个公理（逻辑公理、等词公理或非逻辑公理）。
    *   若 $\phi_1 \in \Gamma$，则根据模型论有效性的定义，对于满足 $\Gamma$ 的任何模型 $\mathcal{A}$，必有 $\mathcal{A} \models \phi_1$。因此 $\Gamma \models \phi_1$。
    *   若 $\phi_1$ 是一个逻辑公理或等词公理，则根据一阶逻辑的语义，它在任何结构中都为真，因此 $\Gamma \models \phi_1$。
    *   若 $\phi_1$ 是一个非逻辑公理，则根据 $PHTR$ 模型的定义，任何满足 $\Gamma$ 的模型也必须是 $PHTR$ 的模型，故 $\mathcal{A} \models \phi_1$。因此 $\Gamma \models \phi_1$。

*   **归纳步骤:**
    假设对于所有长度小于 $n$ 的推导，其结论都满足可靠性。考虑一个长度为 $n$ 的推导，其最后一个公式为 $\phi_n$。
    如果 $\phi_n$ 是一个公理或 $\Gamma$ 的成员，基础情形已覆盖。
    我们只考虑 $\phi_n$ 是通过推理规则从序列中较早的公式推导出的情况。

    *   **情形 1: $\phi_n$ 由分离规则 (Modus Ponens) 得到。**
        那么在推导序列中存在 $\phi_j$ 和 $\phi_k$ ($j, k < n$)，使得 $\phi_k = (\phi_j \to \phi_n)$。
        根据归纳假设，$\Gamma \models \phi_j$ 且 $\Gamma \models (\phi_j \to \phi_n)$。
        这意味着对于任何满足 $\Gamma$ 的模型 $\mathcal{A}$，都有 $\mathcal{A} \models \phi_j$ 和 $\mathcal{A} \models (\phi_j \to \phi_n)$。
        根据蕴含 `→` 的语义定义，若 $\mathcal{A} \models \phi_j$ 且 $\mathcal{A} \models (\phi_j \to \phi_n)$，则必然有 $\mathcal{A} \models \phi_n$。
        由于此结论对所有满足 $\Gamma$ 的模型 $\mathcal{A}$ 都成立，故 $\Gamma \models \phi_n$。

	*   **情形 2: $\phi_n$ 由全称概括 (Generalization) 得到。**
	    那么在推导序列中存在 $\phi_j$ ($j < n$)，使得 $\phi_n = (\forall x \phi_j)$。
	    一个从前提集合 $\Gamma$ 出发的推导要应用全称概括规则，其有效性要求被量化的变量 $x$ 在 $\Gamma$ 的任何公式中都**不得自由出现** (must not occur free)。这是希尔伯特式系统的标准限制，以保证可靠性。我们的证明将基于此必要条件。
	
	    根据归纳假设，我们有 $\Gamma \models \phi_j$。
	    其形式化定义为：对于任意结构 $\mathcal{A}$ 和任意变量赋值 $v: V \to D_{\mathcal{A}}$，若 $\mathcal{A}, v \models \Gamma$，则 $\mathcal{A}, v \models \phi_j$。
	
	    我们的目标是证明 $\Gamma \models \phi_n$，即 $\Gamma \models (\forall x \phi_j)$。
	    其形式化定义为：对于任意结构 $\mathcal{A}$ 和任意变量赋值 $v$，若 $\mathcal{A}, v \models \Gamma$，则 $\mathcal{A}, v \models (\forall x \phi_j)$。
	
	    **证明步骤：**
	    1.  任取一个结构 $\mathcal{A}$ 及其论域 $D$，再任取一个变量赋值 $v: V \to D$。
	    2.  假设前提成立，即 $\mathcal{A}, v \models \Gamma$。我们的任务是证明在此假设下，$\mathcal{A}, v \models (\forall x \phi_j)$ 成立。
	    3.  根据全称量词 `∀` 的语义，要证明 $\mathcal{A}, v \models (\forall x \phi_j)$，我们必须证明：对于论域 $D$ 中的**每一个**元素 $d \in D$，都有 $\mathcal{A}, v[x/d] \models \phi_j$ 成立。其中 $v[x/d]$ 是一个新的赋值，它将 $x$ 映射到 $d$，而对其他所有变量的映射与 $v$ 相同。
	    4.  为此，我们任取一个元素 $d \in D$，并令新赋值为 $v' = v[x/d]$。现在，我们需要证明 $\mathcal{A}, v' \models \phi_j$。
	    5.  为了使用归纳假设（即 $\Gamma \models \phi_j$），我们需要先验证其条件是否对 $v'$ 满足，即 $\mathcal{A}, v' \models \Gamma$ 是否成立。
	    6.  对于 $\Gamma$ 中的任意公式 $\psi \in \Gamma$，其真值仅依赖于 $\psi$ 中自由变量的赋值。根据全称概括规则的适用条件，变量 $x$ 在任何 $\psi \in \Gamma$ 中都不是自由变量。
	    7.  因此，赋值 $v$ 和 $v' = v[x/d]$ 对于 $\Gamma$ 中任何公式 $\psi$ 的自由变量的赋值都是完全相同的。这意味着，对于任意 $\psi \in \Gamma$，$\mathcal{A}, v \models \psi$ 当且仅当 $\mathcal{A}, v' \models \psi$。
	    8.  由步骤 2 的假设 $\mathcal{A}, v \models \Gamma$，我们可以立即推导出 $\mathcal{A}, v' \models \Gamma$。
	    9.  现在，我们已经满足了归纳假设的条件。将归纳假设应用于结构 $\mathcal{A}$ 和赋值 $v'$，可得 $\mathcal{A}, v' \models \phi_j$。
	    10. 将 $v'$ 替换回 $v[x/d]$，我们得到 $\mathcal{A}, v[x/d] \models \phi_j$。
	    11. 由于元素 $d$ 是从论域 $D$ 中任意选取的，因此上述结论对所有 $d \in D$ 均成立。
	    12. 根据全称量词 `∀` 的语义定义，这正是 $\mathcal{A}, v \models (\forall x \phi_j)$ 的含义。
	    13. 由于我们最开始选择的结构 $\mathcal{A}$ 和赋值 $v$ 是任意的（仅需满足 $\mathcal{A}, v \models \Gamma$），因此我们已经证明了 $\Gamma \models (\forall x \phi_j)$。
	
	    故此，全称概括规则保持语义有效性。

归纳完成。因此，系统 $PHTR$ 是可靠的。

#### **3.3. 非平凡一致性定理**

**定理 3.3.1:** 形式系统 $PHTR$ 是非平凡一致的。

**证明:**
一个理论是一致的，当且仅当存在一个它不能证明的公式。

1.  在 3.1 节中，我们已构造了 $PHTR$ 的一个模型 $\mathcal{M}$，其论域为 $D=\{0, 1\}$。因为 $|D| \ge 2$，所以 $\mathcal{M}$ 是一个非平凡模型。

2.  考虑公式 $\phi \equiv (\forall x \forall y (x = y))$。该公式断言论域中只有一个元素。

3.  我们在模型 $\mathcal{M}$ 中评估 $\phi$ 的真值。
    令 $v(x)=0, v(y)=1$。在此赋值下，$x=y$ 被解释为 $0 =^{\mathcal{M}} 1$，此为假。
    因此，$\mathcal{M}$ 不能满足 $\forall x \forall y (x = y)$。即 $\mathcal{M} \not\models \phi$。

4.  根据定理 3.2.1（可靠性），如果一个公式 $\psi$ 是可证的 ($PHTR \vdash \psi$)，那么它必须在 $PHTR$ 的所有模型中为真 ($PHTR \models \psi$)。

5.  由于我们找到了一个 $PHTR$ 的模型 $\mathcal{M}$ 使得 $\mathcal{M} \not\models \phi$，这意味着 $\phi$ 不可能在所有 $PHTR$ 模型中都为真。即 $PHTR \not\models \phi$。

6.  由可靠性定理的逆否命题可知，如果 $PHTR \not\models \phi$，那么 $PHTR \not\vdash \phi$。
    因此，我们找到了一个 $PHTR$ 无法证明的公式 $\phi$。

7.  由于存在 $PHTR$ 无法证明的公式，故 $PHTR$ 是一致的。

8.  因为用于证明一致性的模型 $\mathcal{M}$ 是一个非平凡模型，所以 $PHTR$ 的一致性是非平凡的。

综上，形式系统 $PHTR$ 是非平凡一致的。