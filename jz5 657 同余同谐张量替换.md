# 形式系统 $\mathcal{L}_{\bumpeq}$

## 1. 语法 (Syntax)

设 $\mathcal{A}$ 为一族可数无限的原子项。项的集合 $\mathcal{T}_{\text{syn}}$ 定义如下：

$$ t ::= a \mid t \bumpeq t \mid t \cong t \mid t \otimes t \mid \neg t $$

---

## 2. 公理与推理规则 (Proof Theory)

### 模块 A: 严格同一性 (Strict Identity)

*   **A1 (Refl):** $$\frac{}{t \cong t}$$
*   **A2 (Symm):** $$\frac{t_1 \cong t_2}{t_2 \cong t_1}$$
*   **A3 (Trans):** $$\frac{t_1 \cong t_2, \quad t_2 \cong t_3}{t_1 \cong t_3}$$

### 模块 B: 结构同谐性的基础性质 (Basic Coherence)

*   **B-Refl:** $$\frac{}{t \bumpeq t}$$
*   **B-Symm:** $$\frac{t_1 \bumpeq t_2}{t_2 \bumpeq t_1}$$
### 模块 C: 结构与证明的塌缩 (Structure-Proof Collapse)

*   **Rule C1 (右侧吸纳):**
    $$ \frac{t_{1} \bumpeq t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \bumpeq (t_{2}\cong t_{3})} $$

*   **Rule C2 (左侧投影):**
    $$ \frac{t_{1} \bumpeq t_{2}, \quad t_{1} \cong t_{3}}{(t_{1} \cong t_{3}) \bumpeq t_{2}} $$

*   **Rule C3 (关系的结构传递 - 右):**
    $$ \frac{(t_{1} \cong t_{2}) \bumpeq t_3, \quad t_{1} \cong t_{2},\quad t_{2}\cong t_{4}}{(t_{2}\cong t_{4}) \bumpeq t_{3}} $$

*   **Rule C4 (关系的结构传递 - 左):**
    $$ \frac{t_{1} \bumpeq (t_{2} \cong t_{3}), \quad t_{2} \cong t_{3},\quad t_{3}\cong t_{4}}{t_{1} \bumpeq (t_{3} \cong t_{4})} $$

### 模块 D: 桥接规则 (Bridge Rules)

*   **Rule D1 (降级):**
    $$ \frac{t_1 \cong t_2}{t_1 \bumpeq t_2} $$

*   **Rule D2 (全同替换):**
    $$ \frac{t_1 \bumpeq t_3, \quad t_1 \cong t_2}{t_2 \bumpeq t_3} $$

*   **Rule D3 (同余构造):**
    $$ \frac{t_{1} \cong t_{2}, \quad t_{3} \cong t_{4}}{(t_{1} \bumpeq t_{3}) \cong (t_{2}\bumpeq t_{4})} $$

### 模块 E: 否定与极性 (Negation and Polarity)

*   **Rule E1 (否定的同谐性):**
	$$ \frac{t_1 \bumpeq t_2}{\neg t_1 \bumpeq \neg t_2} $$

*   **Rule E2 (否定的严格性):**
    $$ \frac{t_1 \cong t_2}{\neg t_1 \cong \neg t_2} $$

*   **Rule E3 (双重否定):**
    $$ \frac{}{t \cong \neg \neg t} $$

*   **Rule E4 (矛盾律):**
    $$ \frac{}{\neg (t \cong \neg t)} $$


### 模块 F: 结构发散 (Structural Divergence)

*   **Rule F1 (反幂等律):**
    $$ \frac{}{\neg (t \cong (t \bumpeq t))} $$


### 模块 G：结构溯源 (Structural Genealogy)

*  **Rule G1 (逻辑局部性 / 溯源约束)**
$$ \frac{t_1 \bumpeq (t_2 \cong t_2)}{t_1 \bumpeq t_2} $$

### **模块 H: 分层图构造 (Hierarchical Graph Construction)**

*  **Rule H1 (构造的各向同性)**
$$ \frac{}{(t_1 \bumpeq t_2) \cong (t_2 \bumpeq t_1)} $$

*  **Rule H2 (递归关联性)**
$$ \frac{}{ (t_1 \bumpeq t_2) \bumpeq (t_2 \bumpeq t_3) } $$


### 模块 I: 构造性结合律 (Constructive Associativity)


*   **Rule I1 (合成的同余性):**
    $$ \frac{t_1 \cong t_3, \quad t_2 \cong t_4}{(t_1 \otimes t_2) \cong (t_3 \otimes t_4)} $$

### 模块 J: 代数正则性 (Algebraic Regularity)

*   **Rule J1 (非循环构造):**
    $$ \frac{}{\neg (t_1 \cong (t_1 \otimes t_2))} $$

*   **Rule J2 (配对的存在性):**
    $$ \frac{t_1 \bumpeq t_1, \quad t_2 \bumpeq t_2}{(t_1 \otimes t_2) \bumpeq (t_1 \otimes t_2)} $$


### 模块 K: 结构的单射性与投影 (Structural Injectivity & Projection)

*   **Rule K1 (右消去律):**
    $$ \frac{(t_1 \otimes t_2) \cong (t_1 \otimes t_3), \quad t_1 \bumpeq t_1}{t_2 \cong t_3} $$

*   **Rule K2 (左消去律):**
    $$ \frac{(t_2 \otimes t_1) \cong (t_3 \otimes t_1), \quad t_1 \bumpeq t_1}{t_2 \cong t_3} $$

*   **Rule K3 (同谐性的分量遗传):**
    $$ \frac{(t_1 \otimes t_2) \bumpeq (t_3 \otimes t_4)}{t_1 \bumpeq t_3} $$


---

## 3. 语义模型 (Semantics)
#### 3.1 语义域 (Semantic Domain)

定义语义域 $\mathbb{D}$ 为：
$$ \mathbb{D} = \Lambda \times (\mathbb{Z} \setminus \{0\}) $$

其中 **构造索引集 (Structural Indices) $\Lambda$** 扩展为递归的算术结构：
1.  **基底**: $\Lambda_0 = \{0\} \cup \mathbb{N}^+$。其中 $0$ 为逻辑层，$n \in \mathbb{N}^+$ 为原子索引。
2.  **配对编码**: 引入哥德尔配对函数 $\pi: \Lambda \times \Lambda \to \Lambda$。定义 $\pi(x, y) = 2^{x+1} \cdot 3^{y+1}$。此函数是单射且其值域与 $\Lambda_0$ 不相交（除可能被视为原子的数外，但在本系统中我们将 $\pi$ 的产物视为复合对象）。
3.  **索引集**: $\Lambda$ 是 $\Lambda_0$ 在 $\pi$ 作用下的闭包。

#### 3.2 拓扑兼容性 (Topological Compatibility)

扩展谓词 $\mathcal{C} \subseteq \Lambda \times \Lambda$ 以支持递归结构。对于任意 $k_1, k_2 \in \Lambda$，$\mathcal{C}(k_1, k_2)$ 为真当且仅当满足以下递归条件之一：

1.  **逻辑全通性**: $k_1 = 0$ 或 $k_2 = 0$。
2.  **原子同一性**: $k_1, k_2$ 均为原子（非 $\pi$ 映射产物）且 $k_1 = k_2$。
3.  **结构同态性 (Structural Homomorphism)**:
    若 $k_1 = \pi(a, b)$ 且 $k_2 = \pi(c, d)$，则必须满足分量兼容：
    $$ \mathcal{C}(a, c) \land \mathcal{C}(b, d) $$
---

### 3.3 解释函数 (Valuation)

设赋值函数 $\|\cdot\|: \mathcal{T}_{\text{syn}} \to \mathbb{D}$ 递归定义如下。
对于任意项 $t$，记其解释为 $\|t\| = (k_t, v_t)$。

#### 1. 原子项 (Atoms)
设原子集 $\mathcal{A} = \{a_1, a_2, \dots\}$。每个原子映射到唯一的对象层索引：
$$ \|a_i\| = (i, \ 1) $$

#### 2. 否定 (Negation)
否定操作翻转真值符号，但**严格保持**项的构造索引不变：
$$ \|\neg t\| = (k_t, \ -v_t) $$

#### 3. 严格同一性 (Strict Identity)
同一性判定具有**结构透明性 (Structural Transparency)**。若判定为真，解释结果将**透传**原对象的构造索引，而非塌缩至逻辑层。这保证了同一性项在后续结构规则（如溯源 G1）中可替代原对象。

设 $\|t_1\| = (k_1, v_1)$, $\|t_2\| = (k_2, v_2)$：
$$ \|t_1 \cong t_2\| = \begin{cases} (k_1, \phantom{-}(|v_1| + |v_2|)) & \text{若 } k_1 = k_2 \text{ 且 } v_1 = v_2 \\ (0, -(|v_1| + |v_2|)) & \text{其他 (矛盾则塌缩至逻辑层)} \end{cases} $$

#### 4. 结构同谐性 (Structural Coherence)
同谐性操作将两个项“熔合”为一种连接关系。凡是成功的连接，其结果均坍缩至**逻辑层 (0)**。这确保了连接本身可以作为对象参与更高阶的连接（如规则 H2 所示）。

$$ \|t_1 \bumpeq t_2\| = \begin{cases} (0, \phantom{-}(|v_1| + |v_2|)) & \text{若 } \mathcal{C}(k_1, k_2) \text{ 为真} \\ (0, -(|v_1| + |v_2|)) & \text{若 } \mathcal{C}(k_1, k_2) \text{ 为假} \end{cases} $$
#### 5 张量合成 (Tensor Composition)

张量合成 $\otimes$ 是构造有序对的代数算子。
设 $\|t_1\| = (k_1, v_1)$, $\|t_2\| = (k_2, v_2)$：

$$ \|t_1 \otimes t_2\| = (\pi(k_1, k_2), \ \text{sgn}(v_1 v_2) \cdot (|v_1| + |v_2|)) $$

*   **索引**: $\pi(k_1, k_2)$ 保留了构造的历史路径。
*   **真值**: 使用积的符号与深度的和，模拟逻辑“与”的极性。

---

### 3.4 有效性 (Validity)

公式 $t$ 在语义模型中有效，当且仅当其真值分量为正：

$$ \vDash t \iff \exists k \in \Lambda, \exists v \in \mathbb{Z}^+ \text{ s.t. } \|t\| = (k, v) $$

## 4. 形式验证 (Formal Verification)

本节将基于第 3 节定义的语义模型 $\mathbb{D}$，对 $\mathcal{L}_{\bumpeq}$ 系统的推理规则进行完全形式化的可靠性（Soundness）验证。

### 4.0 预备定义与引理

**定义 4.0.1 (有效性判定):**
对于任意项 $t$，其解释为 $\|t\| = (k_t, v_t)$。公式 $t$ 为**真 (Valid)** 当且仅当 $v_t > 0$。

**定义 4.0.2 (规则可靠性):**
推理规则 $\frac{P_1, \dots, P_n}{C}$ 是可靠的，当且仅当对于任意赋值，若 $\forall i, v_{P_i}> 0$，则必然有 $v_C > 0$。

**引理 4.0.3 (真值守恒与深度):**
根据语义定义，对于任意 $v \in \mathbb{Z} \setminus \{0\}$，有 $|v| \geq 1$。由此可知，语义定义中所有形如 $|v_a| + |v_b|$ 的操作结果均严格大于 0。

---

### 4.1 模块 A：严格同一性 (Strict Identity)

**规则 A1 (Refl):** $\frac{}{t \cong t}$

*   **证明:**
    1.  设 $\|t\| = (k, v)$。
    2.  计算 $\|t \cong t\|$：
        根据 3.3.3，比较 $t$ 与 $t$ 的解释。
        显然 $k = k$ 且 $v = v$。
    3.  解释结果为 $(k, |v| + |v|) = (k, 2|v|)$。
    4.  因 $|v| \geq 1$，故 $2|v| 0$。
    5.  结论恒为真。$\square$

**规则 A2 (Symm):** $\frac{t_1 \cong t_2}{t_2 \cong t_1}$

*   **证明:**
    1.  设 $\|t_1\| = (k_1, v_1)$, $\|t_2\| = (k_2, v_2)$。
    2.  前提成立 $\implies v_{(t_1 \cong t_2)} 0$。
    3.  根据 3.3.3，这意味着 $k_1 = k_2$ 且 $v_1 = v_2$。
    4.  考察结论 $t_2 \cong t_1$：
        由于 $k_2 = k_1$ 且 $v_2 = v_1$ 成立。
    5.  结论真值为 $|v_2| + |v_1| 0$。$\square$

**规则 A3 (Trans):** $\frac{t_1 \cong t_2, \quad t_2 \cong t_3}{t_1 \cong t_3}$

*   **证明:**
    1.  前提 1 成立 $\implies k_1 = k_2$ 且 $v_1 = v_2$。
    2.  前提 2 成立 $\implies k_2 = k_3$ 且 $v_2 = v_3$。
    3.  由等量代换公理，得 $k_1 = k_3$ 且 $v_1 = v_3$。
    4.  故 $\|t_1 \cong t_3\| = (k_1, |v_1| + |v_3|)$，其真值分量为正。$\square$

---

### 4.2 模块 B：结构同谐性的基础性质


**规则 B-Refl (自反性):** $\frac{}{t \bumpeq t}$
*   **证明:** 需证 $\forall k \in \Lambda, \mathcal{C}(k, k)$。对构造深度归纳：
    1.  **基准情形**: 若 $k=0$，由定义 Case 1，$\mathcal{C}(0,0)$ 真。若 $k$ 为原子，由定义 Case 2，$k=k$ 且为原子，真。
    2.  **归纳步骤**: 设 $k = \pi(a, b)$，且假设 $\mathcal{C}(a,a)$ 与 $\mathcal{C}(b,b)$ 成立。
        由定义 Case 3，$\mathcal{C}(\pi(a,b), \pi(a,b)) \iff \mathcal{C}(a,a) \land \mathcal{C}(b,b)$。
        由归纳假设，右侧为真，故左侧为真。
    3.  结论成立。$\square$

**规则 B-Symm:** $\frac{t_1 \bumpeq t_2}{t_2 \bumpeq t_1}$

*   **证明:**
    1.  前提成立 $\implies \mathcal{C}(k_1, k_2)$ 为真。
    2.  $\mathcal{C}(k_1, k_2)$ 的定义是逻辑析取式，对参数顺序不敏感（即 $k_1=k_2$ 与 $k_2=k_1$ 等价，等等）。
    3.  故 $\mathcal{C}(k_2, k_1)$ 必然为真。
    4.  结论真值为 $|v_2| + |v_1|$。$\square$

---

### 4.3 模块 C：结构与证明的塌缩

**规则 C1 (右侧吸纳):** $\frac{t_{1} \bumpeq t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \bumpeq (t_{2}\cong t_{3})}$

*   **证明:**
    1.  设 $\|t_i\| = (k_i, v_i)$。
    2.  前提 1 成立 $\implies \mathcal{C}(k_1, k_2)$ 为真。
    3.  前提 2 成立 $\implies k_2 = k_3$ 且 $v_2 = v_3$。
    4.  考察结论右侧项 $T = (t_2 \cong t_3)$：
        根据 3.3.3，因前提 2 成立，$\|T\| = (k_2, |v_2| + |v_3|)$。
        注意：该项的**构造索引 (Structural Index)** 保持为 $k_2$。
    5.  考察整个结论 $t_1 \bumpeq T$：
        需判定 $\mathcal{C}(k_{t_1}, k_T)$。
    6.  代入索引：需判定 $\mathcal{C}(k_1, k_2)$。
    7.  由步骤 2 可知此式为真。
    8.  结论真值为 $|v_1| + (|v_2| + |v_3|) 0$。$\square$

**规则 C2 (左侧投影):** $\frac{t_{1} \bumpeq t_{2}, \quad t_{1} \cong t_{3}}{(t_{1} \cong t_{3}) \bumpeq t_{2}}$

*   **证明:**
    1.  前提 1 $\implies \mathcal{C}(k_1, k_2)$ 为真。
    2.  前提 2 $\implies k_1 = k_3$。
    3.  结论左侧项 $T = (t_1 \cong t_3)$ 的解释为 $(k_1, |v_1|+|v_3|)$。
    4.  结论判定依赖 $\mathcal{C}(k_T, k_2) = \mathcal{C}(k_1, k_2)$。
    5.  由前提 1 保证成立。$\square$

**规则 C3 (关系的结构传递 - 右):** $\frac{(t_{1} \cong t_{2}) \bumpeq t_3, \quad t_{1} \cong t_{2},\quad t_{2}\cong t_{4}}{(t_{2}\cong t_{4}) \bumpeq t_{3}}$

*   **证明:**
    1.  前提 2 ($t_1 \cong t_2$) 成立 $\implies k_1 = k_2$。
    2.  前提 3 ($t_2 \cong t_4$) 成立 $\implies k_2 = k_4$。
    3.  由此推导：$k_1 = k_2 = k_4$。
    4.  前提 1 成立：
        左侧项 $T_{L1} = (t_1 \cong t_2)$，其索引为 $k_1$。
        故前提 1 意味着 $\mathcal{C}(k_1, k_3)$ 为真。
    5.  考察结论：
        左侧项 $T_{L2} = (t_2 \cong t_4)$，其解释为 $(k_2, |v_2|+|v_4|)$，索引为 $k_2$。
        结论判定依赖 $\mathcal{C}(k_2, k_3)$。
    6.  因 $k_1 = k_2$，故 $\mathcal{C}(k_1, k_3) \iff \mathcal{C}(k_2, k_3)$。
    7.  由步骤 4 可知结论成立。$\square$

**规则 C4 (关系的结构传递 - 左):** 对称于 C3，证明过程同构。$\square$

---

### 4.4 模块 D：桥接规则

**规则 D1 (降级):** $\frac{t_1 \cong t_2}{t_1 \bumpeq t_2}$

*   **证明:**
    1.  前提成立 $\implies k_1 = k_2$。
    2.  结论判定依赖 $\mathcal{C}(k_1, k_2)$。
    3.  代入 $k_2 = k_1$，需判定 $\mathcal{C}(k_1, k_1)$。
    4.  根据定义 3.2，$k_1 = k_1$ 恒成立，故 $\mathcal{C}$ 为真。
    5.  结论成立。$\square$

**规则 D2 (全同替换):** $\frac{t_1 \bumpeq t_3, \quad t_1 \cong t_2}{t_2 \bumpeq t_3}$

*   **证明:**
    1.  前提 1 $\implies \mathcal{C}(k_1, k_3)$ 为真。
    2.  前提 2 $\implies k_1 = k_2$。
    3.  结论判定依赖 $\mathcal{C}(k_2, k_3)$。
    4.  用 $k_1$ 替换 $k_2$，等价于判定 $\mathcal{C}(k_1, k_3)$。
    5.  由前提 1 保证成立。$\square$

**规则 D3 (同余构造):** $\frac{t_{1} \cong t_{2}, \quad t_{3} \cong t_{4}}{(t_{1} \bumpeq t_{3}) \cong (t_{2}\bumpeq t_{4})}$

*   **证明:**
    1.  前提 1 $\implies k_1 = k_2, v_1 = v_2$。
    2.  前提 2 $\implies k_3 = k_4, v_3 = v_4$。
    3.  考察结论左项 $L = (t_1 \bumpeq t_3)$：
        *   若 $\mathcal{C}(k_1, k_3)$ 真，$\|L\| = (0, |v_1|+|v_3|)$。
        *   若 $\mathcal{C}(k_1, k_3)$ 假，$\|L\| = (0, -(|v_1|+|v_3|))$。
    4.  考察结论右项 $R = (t_2 \bumpeq t_4)$：
        *   因 $k_1=k_2, k_3=k_4$，故 $\mathcal{C}(k_1, k_3) \iff \mathcal{C}(k_2, k_4)$。
        *   真值部分 $|v_2|+|v_4| = |v_1|+|v_3|$。
        *   故 $\|L\| = \|R\|$ 完全相同（索引均为0，真值相等）。
    5.  根据同一性语义，当两项解释完全一致时，同一性判定为真（结果为 $(0, |v_L|+|v_R|)$）。$\square$

---

### 4.5 模块 E：否定与极性

**规则 E1 (否定的同谐性):** $\frac{t_1 \bumpeq t_2}{\neg t_1 \bumpeq \neg t_2}$

*   **证明:**
    1.  根据语义 3.3.2，$\|\neg t\| = (k_t, -v_t)$。即否定操作**不改变索引**。
    2.  前提成立 $\implies \mathcal{C}(k_1, k_2)$ 为真。
    3.  结论判定依赖 $\mathcal{C}(k_{\neg t_1}, k_{\neg t_2})$。
    4.  因 $k_{\neg t_1} = k_1, k_{\neg t_2} = k_2$，判定条件不变。
    5.  真值部分：$|-v_1| + |-v_2| = |v_1| + |v_2| 0$。
    6.  结论成立。$\square$

**规则 E2 (否定的严格性):** $\frac{t_1 \cong t_2}{\neg t_1 \cong \neg t_2}$

*   **证明:**
    1.  前提成立 $\implies k_1 = k_2$ 且 $v_1 = v_2$。
    2.  结论左项解释：$(k_1, -v_1)$。结论右项解释：$(k_2, -v_2)$。
    3.  索引相等性：$k_1 = k_2$ (成立)。
    4.  真值相等性：$-v_1 = -v_2 \iff v_1 = v_2$ (成立)。
    5.  结论成立。$\square$

**规则 E3 (双重否定):** $\frac{}{t \cong \neg \neg t}$

*   **证明:**
    1.  $\|t\| = (k, v)$。
    2.  $\|\neg t\| = (k, -v)$。
    3.  $\|\neg \neg t\| = (k, -(-v)) = (k, v)$。
    4.  $t$ 与 $\neg \neg t$ 的解释完全一致，故同一性成立。$\square$

**规则 E4 (矛盾律):** $\frac{}{\neg (t \cong \neg t)}$

*   **证明:**
    1.  考察内部项 $X = (t \cong \neg t)$。
    2.  $\|t\| = (k, v)$, $\|\neg t\| = (k, -v)$。
    3.  同一性判定条件 1：$k = k$ (满足)。
    4.  同一性判定条件 2：$v = -v$。
    5.  由于 $v \in \mathbb{Z} \setminus \{0\}$，方程 $v = -v$ 仅在 $v=0$ 时成立，但这在定义域外。
    6.  故条件 2 恒不成立 (False)。
    7.  根据 3.3.3，$\|X\| = (0, -(|v| + |-v|)) = (0, -2|v|)$。
    8.  $X$ 的真值为负。
    9.  考察结论 $\neg X$：
        $\|\neg X\| = (0, -(-2|v|)) = (0, 2|v|)$。
    10. 真值 $2|v| 0$，恒为真。$\square$

---

### 4.6 模块 F：结构发散

**规则 F1 (反幂等律):**
$$ \frac{}{\neg (t \cong (t \bumpeq t))} $$

*   **证明:**
    1.  设 $\|t\| = (k, v)$。
    2.  设右侧项 $R = (t \bumpeq t)$。由 B-Refl 可知 $R$ 有效，且其解释为 $\|R\| = (0, 2|v|)$。
    3.  考察内部同一性判定 $X = t \cong R$。需比较 $(k, v)$ 与 $(0, 2|v|)$。
    4.  **情形 1: $k \neq 0$ (t 为对象层原子)**
        索引不匹配 ($k \neq 0$)，同一性判定失败。
        $\|X\| = (0, -(|v| + 2|v|)) = (0, -3|v|)$。
        结论 $\neg X$ 的真值为 $3|v| > 0$，成立。
    5.  **情形 2: $k = 0$ (t 为逻辑层构造)**
        索引匹配 ($k=0$)。同一性判定要求真值相等，即方程 $v = 2|v|$ 需成立。
        *   若 $v > 0$，则 $v = 2v \implies v = 0$。但定义域规定 $v \in \mathbb{Z} \setminus \{0\}$，矛盾。
        *   若 $v < 0$，则 $v = -2v \implies 3v = 0 \implies v = 0$，矛盾。
        由此可知，方程 $v = 2|v|$ 在语义域 $\mathbb{D}$ 中无解。
        判定失败，$\|X\|$ 真值为负。
    6.  综上，无论 $k$ 为何值，$X$ 恒假，故 $\neg X$ 恒真。$\square$

---

### 4.7 模块 G：结构溯源

**规则 G1 (逻辑局部性):** $\frac{t_1 \bumpeq (t_2 \cong t_2)}{t_1 \bumpeq t_2}$

*   **证明:**
    1.  前提成立 $\implies$ 右侧项 $T = (t_2 \cong t_2)$ 与 $t_1$ 兼容。
    2.  $T$ 的解释：根据同一性透明性，$\|t_2 \cong t_2\| = (k_2, 2|v_2|)$。
        关键点：索引为 $k_2$。
    3.  前提意味着 $\mathcal{C}(k_1, k_T)$ 即 $\mathcal{C}(k_1, k_2)$ 为真。
    4.  结论要求判定 $t_1 \bumpeq t_2$，即判定 $\mathcal{C}(k_1, k_2)$。
    5.  由步骤 3 可知结论必然成立。$\square$

---

### 4.8 模块 H：分层图构造

**规则 H1 (构造的各向同性):** $\frac{}{(t_1 \bumpeq t_2) \cong (t_2 \bumpeq t_1)}$
*   **证明:**
	1.  设左侧项 $L = (t_1 \bumpeq t_2)$，右侧项 $R = (t_2 \bumpeq t_1)$。
	2.  **索引一致性**: 根据语义规则 3.3.4，同谐性判定的结果总是塌缩至逻辑层，故 $\|L\|$ 与 $\|R\|$ 的构造索引均为 $0$。
	3.  **真值一致性**:
	    *   判定条件：由定义 3.2，$\mathcal{C}(k_1, k_2)$ 为真当且仅当 $\mathcal{C}(k_2, k_1)$ 为真（$\mathcal{C}$ 定义中的逻辑与具有交换律）。
	    *   数值计算：左侧真值绝对值为 $|v_1| + |v_2|$，右侧为 $|v_2| + |v_1|$，两者相等。
	    *   极性符号：若兼容，两者均为正；若不兼容，两者均为负。
	4.  综上，$\|L\| = \|R\|$ 完全成立。根据同一性语义 3.3.3，结论的真值分量为 $|v_L| + |v_R| > 0$，故规则恒成立。$\square$

**规则 H2 (递归关联性):** $\frac{}{ (t_1 \bumpeq t_2) \bumpeq (t_2 \bumpeq t_3) }$

*   **证明:**
    1.  设 $L = t_1 \bumpeq t_2$。无论 $t_1, t_2$ 为何，根据 3.3.4，$\|L\|$ 的索引 $k_L = 0$。
    2.  设 $R = t_2 \bumpeq t_3$。同理，$\|R\|$ 的索引 $k_R = 0$。
    3.  结论要求判定 $L \bumpeq R$。
    4.  这依赖于 $\mathcal{C}(k_L, k_R) = \mathcal{C}(0, 0)$。
    5.  根据 3.2 定义，$\mathcal{C}(0, 0)$ 恒为真（逻辑层元素总是彼此兼容）。
    6.  结论恒为真。$\square$

### 4.9 张量合成算子的可靠性

本节针对引入的张量合成算子 $\otimes$ 及其相关规则（模块 I、J、K）进行可靠性证明。

**引理 P1 (配对唯一性):**
根据算术基本定理，对于定义 $\pi(x, y) = 2^{x+1}3^{y+1}$，若 $\pi(a, b) = \pi(c, d)$，则必然有 $a=c$ 且 $b=d$。

**引理 P2 (层级增长):**
对于任意 $x, y \in \Lambda$，有 $\pi(x, y) > x$ 且 $\pi(x, y) > y$。

---

#### 4.9.1 模块 I：关系的代数结构

**规则 I1 (合成的同余性):** $\frac{t_1 \cong t_3, \quad t_2 \cong t_4}{(t_1 \otimes t_2) \cong (t_3 \otimes t_4)}$
*   **证明:**
    1.  前提 $\implies k_1=k_3, v_1=v_3$ 且 $k_2=k_4, v_2=v_4$。
    2.  结论左项索引: $\pi(k_1, k_2)$。右项索引: $\pi(k_3, k_4)$。由前提可得两者相等。
    3.  结论左项真值: $\text{sgn}(v_1 v_2)(|v_1|+|v_2|)$。
        结论右项真值: $\text{sgn}(v_3 v_4)(|v_3|+|v_4|)$。
        代入前提等式，真值完全相等。
    4.  结论成立。$\square$

---

#### 4.9.2. 模块 J 的可靠性验证

**规则 J1 (非循环构造):** $\frac{}{\neg (t_1 \cong (t_1 \otimes t_2))}$

*   **证明:**
    1.  设 $\|t_1\| = (k_1, v_1)$。
    2.  右侧项 $R = t_1 \otimes t_2$，其索引为 $k_R = \pi(k_1, k_2)$。
    3.  考虑同一性判定 $t_1 \cong R$。这要求 $k_1 = k_R$。
    4.  根据 **引理 P2 (层级增长)**，$\pi(k_1, k_2) > k_1$。
    5.  因此 $k_1 = \pi(k_1, k_2)$ 恒为假。
    6.  同一性判定失败，真值为负。
    7.  因此，否定式 $\neg (\dots)$ 的真值为正。规则恒成立。$\square$

**规则 J2 (配对的存在性):** $\frac{t_1 \bumpeq t_1, \quad t_2 \bumpeq t_2}{(t_1 \otimes t_2) \bumpeq (t_1 \otimes t_2)}$

*   **证明:**
	1.  结论要求证明张量项 $T = t_1 \otimes t_2$ 满足自同谐性，即证明 $\mathcal{C}(k_T, k_T)$ 为真。
	2.  根据语义 3.3.5，张量索引为 $k_T = \pi(k_1, k_2)$。
	3.  根据拓扑兼容性定义 3.2 的递归条件（Case 3），对于复合索引，$\mathcal{C}(\pi(k_1, k_2), \pi(k_1, k_2))$ 为真，当且仅当分量分别兼容，即 $\mathcal{C}(k_1, k_1) \land \mathcal{C}(k_2, k_2)$ 为真。
	4.  **前提应用**:
	    *   前提 1 ($t_1 \bumpeq t_1$) 有效，蕴含 $\mathcal{C}(k_1, k_1)$ 为真。
	    *   前提 2 ($t_2 \bumpeq t_2$) 有效，蕴含 $\mathcal{C}(k_2, k_2)$ 为真。
	5.  由步骤 3 和 4 可知，$\mathcal{C}(k_T, k_T)$ 必然成立。
	6.  结论 $T \bumpeq T$ 的解释为 $(0, 2|v_T|)$，其真值分量恒为正。$\square$

#### 4.9.3. 模块 K 的可靠性验证

**规则 K1 (右消去律):**
$$ \frac{(t_1 \otimes t_2) \cong (t_1 \otimes t_3), \quad t_1 \bumpeq t_1}{t_2 \cong t_3} $$

**证明:**
1.  设 $\|t_i\| = (k_i, v_i)$。前提 1 有效意味着解释 $\| (t_1 \otimes t_2) \cong (t_1 \otimes t_3) \|$ 的真值分量为正。
2.  根据同一性语义 3.3.3，这蕴含左右两项的解释完全相等。
3.  **索引推导**:
    由索引相等得 $\pi(k_1, k_2) = \pi(k_1, k_3)$。
    根据算术基本定理，配对函数 $\pi$ 是单射，故严格推出 $k_2 = k_3$。
4.  **真值推导**:
    由真值相等得 $v_{\text{left}} = v_{\text{right}}$。展开张量语义：
    $$ \text{sgn}(v_1 v_2)(|v_1| + |v_2|) = \text{sgn}(v_1 v_3)(|v_1| + |v_3|) $$
    *   **符号分析**: 上式非零，故 $\text{sgn}(v_1 v_2) = \text{sgn}(v_1 v_3)$。因 $v_1 \neq 0$，消去 $v_1$ 的符号得 $\text{sgn}(v_2) = \text{sgn}(v_3)$。
    *   **模长分析**: 两边取绝对值得 $|v_1| + |v_2| = |v_1| + |v_3|$。消去 $|v_1|$ 得 $|v_2| = |v_3|$。
5.  **结论**:
    综合 $k_2 = k_3$、$\text{sgn}(v_2) = \text{sgn}(v_3)$ 及 $|v_2| = |v_3|$，可得 $v_2 = v_3$。
    故 $\|t_2\| = \|t_3\|$，结论 $t_2 \cong t_3$ 成立。$\square$

**规则 K2 (左消去律):**
$$ \frac{(t_2 \otimes t_1) \cong (t_3 \otimes t_1), \quad t_1 \bumpeq t_1}{t_2 \cong t_3} $$

**证明:**
1.  逻辑结构与 K1 完全对称。
2.  **索引推导**:
    由同一性前提得 $\pi(k_2, k_1) = \pi(k_3, k_1)$。因 $\pi$ 为单射，推出 $k_2 = k_3$。
3.  **真值推导**:
    由张量语义展开等式：
    $$ \text{sgn}(v_2 v_1)(|v_2| + |v_1|) = \text{sgn}(v_3 v_1)(|v_3| + |v_1|) $$
    *   **符号一致性**: 推出 $\text{sgn}(v_2) \cdot \text{sgn}(v_1) = \text{sgn}(v_3) \cdot \text{sgn}(v_1)$。消去非零项 $\text{sgn}(v_1)$，得 $\text{sgn}(v_2) = \text{sgn}(v_3)$。
    *   **数值一致性**: 等式取模后消去 $|v_1|$，得 $|v_2| = |v_3|$。
4.  **结论**:
    由 $k_2=k_3$ 且 $v_2=v_3$ 可知 $\|t_2\| = \|t_3\|$。
    故结论 $t_2 \cong t_3$ 有效。$\square$


**规则 K3 (同谐性的分量遗传):** $\frac{(t_1 \otimes t_2) \bumpeq (t_3 \otimes t_4)}{t_1 \bumpeq t_3}$

*   **证明:**
    1.  设前提成立。记 $L = t_1 \otimes t_2$, $R = t_3 \otimes t_4$。
    2.  前提意味着 $\mathcal{C}(k_L, k_R)$ 为真。
    3.  $k_L = \pi(k_1, k_2)$, $k_R = \pi(k_3, k_4)$。两者均为合成索引（$\pi$ 的值域不包含 0 或原子）。
    4.  根据 **3.2 拓扑兼容性** 的定义，对于两个合成索引，$\mathcal{C}(\pi(k_1, k_2), \pi(k_3, k_4))$ 为真，**当且仅当** $\mathcal{C}(k_1, k_3) \land \mathcal{C}(k_2, k_4)$ 为真。
    5.  根据逻辑合取定义，$\mathcal{C}(k_1, k_3)$ 必然为真。
    6.  故结论 $t_1 \bumpeq t_3$ 成立。$\square$

## 5 系统一致性证明 (Proof of Consistency)

本节基于前述规则的可靠性验证，确立 $\mathcal{L}_{\bumpeq}$ 系统的语法一致性。一致性证明采用模型论方法，即证明该系统存在一个非平凡的模型，且在该模型中矛盾无法共存。

### 5.1 可靠性定理 (Soundness Theorem)

**定理 5.1:** 设 $\mathcal{S}$ 为 $\mathcal{L}_{\bumpeq}$ 中的所有公理与推理规则集合。若公式 $t$ 在 $\mathcal{S}$ 中可证（记为 $\vdash_{\mathcal{S}} t$），则 $t$ 在语义模型 $\mathbb{D}$ 中有效（记为 $\vDash t$）。

**证明:**
我们对推导 $t$ 的证明树深度 $d$ 进行数学归纳。

1.  **基础步骤 ($d=1$):**
    此时 $t$ 必为公理 (A1, A2(公理形式), B-Refl) 或零前提推论 (E3, E4, F1)。
    在 4.1, 4.2, 4.5, 4.6 节中，已逐一验证上述所有无前提规则的结论在模型 $\mathbb{D}$ 中恒满足 $v_t 0$。
    故基础步骤成立：公理均为真。

2.  **归纳步骤 ($d 1$):**
    假设对于深度小于 $d$ 的所有可证公式，其语义均为真。
    设 $t$ 是通过某规则 $R \in \mathcal{S}$ 从前提 $P_1, \dots, P_n$ 推导得出的，其中 $P_i$ 的证明深度小于 $d$。
    *   根据归纳假设，$\vDash P_i$ 对所有 $i$ 成立，即 $\forall i, v_{P_i} 0$。
    *   根据 4.1 至 4.9 节的验证，集合 $\mathcal{S}$ 中的每一条规则均具有性质：若前提真值分量为正，则结论真值分量为正。
    *   因此，结论 $t$ 的真值分量 $v_t 0$，即 $\vDash t$。

3.  **结论:**
    对任意可证公式 $t$，必然有 $\vDash t$。$\square$

---

### 5.2 语义排中引理 (Semantic Exclusion Lemma)

**引理 5.2:** 对于任意项 $t \in \mathcal{T}_{\text{syn}}$，在模型 $\mathbb{D}$ 中，$\vDash t$ 与 $\vDash \neg t$ 不可能同时成立。

**证明:**
1.  根据语义定义 3.3，设 $t$ 的解释为 $\|t\| = (k, v)$，其中 $v \in \mathbb{Z} \setminus \{0\}$。
2.  根据有效性定义 3.4，$\vDash t$ 当且仅当 $v 0$。
3.  根据否定语义 3.3.2，$\|\neg t\| = (k, -v)$。
4.  因此，$\vDash \neg t$ 当且仅当 $-v 0$，即 $v < 0$。
5.  在整数域 $\mathbb{Z}$ 中，不存在整数 $v$ 使得 $(v 0) \land (v < 0)$ 同时成立。
6.  故 $\vDash t$ 与 $\vDash \neg t$ 互斥。$\square$

---

### 5.3 一致性定理 (Consistency Theorem)

**定理 5.3:** 系统 $\mathcal{L}_{\bumpeq}$是语法一致的。即：不存在项 $t$，使得 $\vdash_{\mathcal{S}} t$ 与 $\vdash_{\mathcal{S}} \neg t$ 同时成立。

**证明:**
1.  **反证法假设:** 假设系统是不一致的，即存在某个项 $t$，使得 $\vdash_{\mathcal{S}} t$ 且 $\vdash_{\mathcal{S}} \neg t$。
2.  **应用可靠性定理:**
    *   由 $\vdash_{\mathcal{S}} t$ 及定理 5.1，可得 $\vDash t$。
    *   由 $\vdash_{\mathcal{S}} \neg t$ 及定理 5.1，可得 $\vDash \neg t$。
3.  **导出矛盾:**
    这意味着在语义模型 $\mathbb{D}$ 中，$\vDash t$ 和 $\vDash \neg t$ 同时成立。
    但这与引理 5.2 (语义排中引理) 相矛盾。
4.  **结论:**
    假设不成立。系统 $\mathcal{L}_{\bumpeq}$ 是绝对一致的。$\square$

