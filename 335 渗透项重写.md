## 渗透项重写PTR

本系统是一个基于带等词的一阶谓词逻辑的形式理论。

### **1. 形式语言 $PTR$**

**1.1. 符号表 (Alphabet)**

1.  **变量 (Variables):** 一个可数无限集 $V = \{v_0, v_1, v_2, \dots\}$。为方便起见，我们使用 $x, y, z, \dots$ 作为其元变量。
2.  **常量 (Constants):** 一个常量符号: `1`。
3.  **函数符号 (Function Symbols):**
    *   `equiv`: 二元函数符号。
    *   `·`: 二元函数符号。
4.  **谓词符号 (Predicate Symbols):**
    *   ` = `: 二元谓词符号。
5.  **逻辑联结词 (Logical Connectives):** `¬` (否定), `→` (蕴含)。
6.  **量词 (Quantifiers):** `∀` (全称量词)。
7.  **辅助符号 (Auxiliary Symbols):** `(`, `)`。

**1.2. 项 (Terms)**

$PTR$ 的项集合是满足以下条件的最小集合:
1.  任何变量 $v \in V$ 都是一个项。
2.  常量 `1` 是一个项。
3.  若 $t_1$ 和 $t_2$ 是项，则 `equiv(t₁, t₂)` 是一个项。
4.  若 $t_1$ 和 $t_2$ 是项，则 `·(t₁, t₂)` 是一个项。

**1.3. 合式公式 (Well-Formed Formulas - WFFs)**

$PTR$ 的合式公式集合是满足以下条件的最小集合:
1.  若 $t_1$ 和 $t_2$ 是项，则 `t₁ = t₂` 是一个原子公式，也是一个合式公式。
2.  若 $\phi$ 是一个合式公式，则 `(¬φ)` 是一个合式公式。
3.  若 $\phi$ 和 $\psi$ 是合式公式，则 `(φ → ψ)` 是一个合式公式。
4.  若 $\phi$ 是一个合式公式且 $x$ 是一个变量，则 `(∀x φ)` 是一个合式公式。

**1.4. 辅助定义**

为简洁起见，我们引入以下元语言缩写：
*   `(φ ∧ ψ)` 定义为 `¬(φ → ¬ψ)`
*   `(φ ∨ ψ)` 定义为 `(¬φ → ψ)`
*   `(φ ↔ ψ)` 定义为 `((φ → ψ) ∧ (ψ → φ))`
*   `(∃x φ)` 定义为 `¬(∀x ¬φ)`
*   `t₁ ≠ t₂` 定义为 `¬(t₁ = t₂)`

---

### **2. 公理系统 $A_{EA}$**

公理系统由逻辑公理、推理规则和非逻辑公理组成。

**2.1. 逻辑公理**

对于任意合式公式 $\phi, \psi, \chi$：

*   **A1:** $(\phi \to (\psi \to \phi))$
*   **A2:** $((\phi \to (\psi \to \chi)) \to ((\phi \to \psi) \to (\phi \to \chi)))$
*   **A3:** $((¬\phi \to ¬\psi) \to (\psi \to \phi))$
*   **A4:** $(\forall x \phi(x) \to \phi(t))$, 其中项 $t$ 在 $\phi(x)$ 中对 $x$ 是自由可代入的。
*   **A5:** $(\forall x (\phi \to \psi) \to (\phi \to \forall x \psi))$, 其中 $\phi$ 中不含自由出现的变量 $x$。

**2.2. 等词公理 (Axioms of Equality)**

对于任意变量 $x, y$ 和项 $t_1, \dots, t_n, s_1, \dots, s_n$：

*   **A6 (自反性):** $\forall x (x = x)$
*   **A7 (替换公理模式):**
    *   对于任意 $n$ 元函数符号 $f$ (在 $PTR$ 中为 `equiv` 和 `·`):
        $\forall x_1 \dots \forall x_n \forall y_1 \dots \forall y_n ( (x_1=y_1 \land \dots \land x_n=y_n) \to f(x_1, \dots, x_n) = f(y_1, \dots, y_n) )$
    *   对于任意 $n$ 元谓词符号 $P$ (在 $PTR$ 中为 ` = `)
        $\forall x_1 \dots \forall x_n \forall y_1 \dots \forall y_n ( (x_1=y_1 \land \dots \land x_n=y_n) \to (P(x_1, \dots, x_n) \to P(y_1, \dots, y_n)) )$

**2.3. 推理规则 (Rules of Inference)**

1.  **分离规则 (Modus Ponens):** 从 $\phi$ 和 $(\phi \to \psi)$，可推出 $\psi$。
2.  **全称概括 (Generalization):** 从 $\phi$，可推出 $(\forall x \phi)$。

**2.4. 非逻辑公理 (Non-Logical Axioms)**

以下公理定义了理论 $PTR$ 的特定性质。

*   **A1: 左侧渗透 (Left PerPTRtion)**
    $\forall a \forall b \forall x(· (x ,\text{equiv} (a, b)) = \text{equiv}( b, · (x, a)))$

*   **A2: 右侧渗透 (Right PerPTRtion)**
    $\forall a \forall b \forall x (· (\text{equiv}( a, b), x) = \text{equiv} (·( x, b), a))$

*   **EA (等价定义):**
    $\forall x \forall y ( \text{equiv}(x, y) = 1 \leftrightarrow x = y )$

### **3. 模型、可靠性与一致性**

本节旨在为形式系统 $PTR$ 及其公理系统 $A_{EA}$ 提供一个具体的语义解释，并基于此模型严格证明该系统的可靠性与非平凡一致性。

#### **3.1 模型 $\mathcal{M}$**

我们构建一个基于二元域 $\mathbb{Z}_2$ 的一阶结构 $\mathcal{M} = \langle M, I \rangle$ 作为理论 $PTR$ 的模型。

**3.1.1 论域 (Domain)**

模型的论域（或称域）是集合 $M = \{0, 1\}$，即整数模2的集合。

**3.1.2 解释 (Interpretation)**

解释函数 $I$ 将语言 $PTR$ 中的非逻辑符号映射到论域 $M$ 上的具体对象、函数和关系：

1.  **常量 `1`**:
    $1^\mathcal{M} = I(1) = 1 \in M$。

2.  **函数符号 `equiv`**:
    $I(\text{equiv})$ 是一个二元函数 $equiv^\mathcal{M}: M \times M \to M$，定义如下：
    $$
    equiv^\mathcal{M}(a, b) = \begin{cases} 1 & \text{若 } a = b \\ 0 & \text{若 } a \neq b \end{cases}
    $$
    在 $\mathbb{Z}_2$ 的算术中，此函数等价于 $equiv^\mathcal{M}(a, b) = 1+a+b \pmod 2$。

3.  **函数符号 `·`**:
    $I(·)$ 是一个二元函数 $\cdot^\mathcal{M}: M \times M \to M$，定义为 $\mathbb{Z}_2$ 上的加法：
    $$
    a \cdot^\mathcal{M} b = a+b \pmod 2
    $$

4.  **谓词符号 ` = `**:
    $I(=)$ 是论域 $M$ 上的标准恒等关系 $=^\mathcal{M}$。

#### **3.2 公理验证**

为证明 $\mathcal{M}$ 是 $A_{EA}$ 的一个模型（记为 $\mathcal{M} \models A_{EA}$），我们必须验证所有非逻辑公理在 $\mathcal{M}$ 中对于任意变量赋值均为真。设 $v: V \to M$ 为一个任意的变量赋值函数。

**3.2.1 公理 EA 的有效性**

公理 EA 为 $\forall x \forall y ( \text{equiv}(x, y) = 1 \leftrightarrow x = y )$。
我们需要证明，对于任意 $a, b \in M$，当 $v(x)=a, v(y)=b$ 时，$\mathcal{M}, v \models \text{equiv}(x, y) = 1 \leftrightarrow x = y$。这等价于证明 $equiv^\mathcal{M}(a, b) = 1^\mathcal{M} \iff a = b$。

*   **($\Rightarrow$)**: 假设 $equiv^\mathcal{M}(a, b) = 1^\mathcal{M} = 1$。根据 $equiv^\mathcal{M}$ 的定义，这当且仅当 $a = b$ 时成立。
*   **($\Leftarrow$)**: 假设 $a = b$。根据 $equiv^\mathcal{M}$ 的定义，$equiv^\mathcal{M}(a, b) = 1 = 1^\mathcal{M}$。

由于对于任意 $a, b \in M$ 该双向蕴含均成立，故 $\mathcal{M} \models \text{EA}$。

**3.2.2 公理 A1 (左侧渗透) 的有效性**

公理 A1 为  $\forall a \forall b \forall x(· (x ,\text{equiv} (a, b)) = \text{equiv}( b, · (x, a)))$。
我们需要证明，对于任意 $x_v, a_v, b_v \in M$，等式 $x_v \cdot^\mathcal{M} (equiv^\mathcal{M}(a_v, b_v)) = equiv^\mathcal{M}(b_v, (x_v \cdot^\mathcal{M} a_v))$ 成立。

*   **左侧 (LHS)**:
    $x_v \cdot^\mathcal{M} (equiv^\mathcal{M}(a_v, b_v)) = x_v + (1+a_v+b_v) \pmod 2$
*   **右侧 (RHS)**:
    $equiv^\mathcal{M}(b_v, (x_v \cdot^\mathcal{M} a_v)) = 1 + b_v + (x_v+a_v) \pmod 2$

根据 $\mathbb{Z}_2$ 中加法的交换律和结合律，我们有：
$x_v + 1 + a_v + b_v = 1 + b_v + x_v + a_v$
LHS = RHS 成立。因此，$\mathcal{M} \models \text{A1}$。

**3.2.3 公理 A2 (右侧渗透) 的有效性**

公理 A2 为 $\forall a \forall b \forall x (· (\text{equiv}( a, b), x) = \text{equiv} (·( x, b), a))$。
我们需要证明，对于任意 $x_v, a_v, b_v \in M$，等式 $(equiv^\mathcal{M}(a_v, b_v)) \cdot^\mathcal{M} x_v = equiv^\mathcal{M}((x_v \cdot^\mathcal{M} b_v), a_v)$ 成立。

*   **左侧 (LHS)**:
    $(equiv^\mathcal{M}(a_v, b_v)) \cdot^\mathcal{M} x_v = (1+a_v+b_v) + x_v \pmod 2$
*   **右侧 (RHS)**:
    $equiv^\mathcal{M}((x_v \cdot^\mathcal{M} b_v), a_v) = 1 + (x_v+b_v) + a_v \pmod 2$

根据 $\mathbb{Z}_2$ 中加法的交换律和结合律，LHS = RHS 成立。因此，$\mathcal{M} \models \text{A2}$。

由于所有逻辑公理和等词公理在任何标准一阶结构中均为真，且我们已证明所有非逻辑公理在 $\mathcal{M}$ 中为真，故 $\mathcal{M}$ 是理论 $PTR$ 的一个模型。

#### **3.3 可靠性证明**

**可靠性定理**: 对于 $PTR$ 语言中的任意合式公式 $\phi$，如果 $A_{EA} \vdash \phi$（$\phi$ 可从公理系统 $A_{EA}$ 中证出），则 $A_{EA} \models \phi$（$\phi$ 在 $A_{EA}$ 的所有模型中均为真）。

**证明**:
证明对 $\phi$ 的推导长度 $n$ 进行数学归纳。

*   **基础情况 (n=1)**:
    若推导长度为1，则 $\phi$ 自身是 $A_{EA}$ 中的一条公理。
    1.  若 $\phi$ 是逻辑公理（A1-A5）或等词公理（A6-A7），根据一阶谓词逻辑的定义，它们在任何结构中都有效，因此在 $A_{EA}$ 的所有模型中均为真。
    2.  若 $\phi$ 是非逻辑公理（A1, A2, EA），根据模型的定义，任何 $A_{EA}$ 的模型都必须满足这些公理。
    因此，当 $n=1$ 时，$A_{EA} \models \phi$。

*   **归纳步骤**:
    假设对于所有长度 $k < n$ 的推导所得到的公式 $\psi$，均有 $A_{EA} \models \psi$。现考虑长度为 $n$ 的推导，其最后一个公式为 $\phi$。$\phi$ 必然是通过分离规则或全称概括从长度小于 $n$ 的推导中的公式得出的。
    1.  **情况一：分离规则 (Modus Ponens)**
        $\phi$ 是从先前的公式 $\psi$ 和 $(\psi \to \phi)$ 推导出来的。根据归纳假设，$A_{EA} \models \psi$ 且 $A_{EA} \models (\psi \to \phi)$。设 $\mathcal{N}$ 是 $A_{EA}$ 的任意模型，则 $\mathcal{N} \models \psi$ 且 $\mathcal{N} \models (\psi \to \phi)$。根据蕴含联结词的语义，这必然要求 $\mathcal{N} \models \phi$。由于 $\mathcal{N}$ 是任意模型，故 $A_{EA} \models \phi$。
    2.  **情况二：全称概括 (Generalization)**
        $\phi$ 的形式为 $\forall x \psi$，是从先前的公式 $\psi$ 推导出来的。根据归纳假设，$A_{EA} \models \psi$。这意味着对于 $A_{EA}$ 的任意模型 $\mathcal{N}$ 和该模型上的任意变量赋值 $v$，都有 $\mathcal{N}, v \models \psi$。根据全称量词的语义，这直接导出 $\mathcal{N} \models \forall x \psi$。由于 $\mathcal{N}$ 是任意模型，故 $A_{EA} \models \phi$。

根据数学归纳法原理，可靠性定理成立。

#### **3.4 非平凡一致性证明**

**定义 3.4.1 (一致性)**
一个理论 $T$ 是**一致的 (consistent)**，当且仅当不存在任何公式 $\phi$，使得 $T \vdash \phi$ 和 $T \vdash \neg\phi$ 同时成立。

**引理 3.4.2**
若一个理论 $T$ 有模型，则 $T$ 是一致的。

**证明**:
假设理论 $T$ 有一个模型 $\mathcal{M}$。再假设（为了归谬）$T$ 是不一致的。那么存在一个公式 $\phi$，使得 $T \vdash \phi$ 且 $T \vdash \neg\phi$。根据可靠性定理，可得 $\mathcal{M} \models \phi$ 且 $\mathcal{M} \models \neg\phi$。然而，根据模型中真值的定义，一个公式及其否定不可能在同一个模型中同时为真。此为矛盾。因此，初始假设（$T$ 不一致）为假。故 $T$ 是一致的。

**定理 3.4.3 (一致性)**
理论 $PTR$ 是**一致的**。

**证明**:
在 3.2 节中，我们证明了 $\mathcal{M}$ 是理论 $PTR$ 的一个模型。根据引理 3.4.2，理论 $PTR$ 必然是一致的。

**定义 3.4.4 (非平凡性)**
一个理论 $T$ 是**非平凡的 (non-trivial)**，当且仅当存在至少一个合式公式 $\psi$，使得 $T \not\vdash \psi$（即 $\psi$ 不是 $T$ 的定理）。

**定理 3.4.5 (非平凡性)**
理论 $PTR$ 是**非平凡的**。

**证明**:
考虑合式公式 $\phi_F \equiv \forall x (x=1)$。我们检验此公式在模型 $\mathcal{M}$ 中的真值。
根据 $\forall$ 的语义，$\mathcal{M} \models \forall x (x=1)$ 当且仅当对于论域 $M=\{0,1\}$ 中的所有元素 $a$，都有 $a = 1^\mathcal{M}$ 成立。
取 $a=0 \in M$。显然 $0=1$ 在 $\mathcal{M}$ 中为假。
因此，$\mathcal{M} \not\models \forall x (x=1)$。
根据可靠性定理的逆否命题，若 $\mathcal{M} \not\models \phi_F$，则 $A_{EA} \not\vdash \phi_F$。
我们找到了一个合式公式 $\phi_F$ 不是理论 $PTR$ 的定理。根据定义 3.4.4，理论 $PTR$ 是非平凡的。

**结论**: 理论 $PTR$ 是非平凡一致的。