### 形式系统 $\mathcal{S}$

#### 1. 语言

*   **命题变量 (Atoms):** 一个可数的集合 $\mathcal{P} = \{p, q, r, \dots\}$
*   **二元联结词 (Binary Connectives):** $\{1, 2\}$
*   **括号 (Parentheses):** $\{ (, ) \}$
*   **合式公式 (Well-formed Formulas, WFFs):**
    1.  如果 $p \in \mathcal{P}$，那么 $p$ 是一个 WFF。
    2.  如果 $A$ 和 $B$ 是 WFFs，那么 $(A \ 1 \ B)$ 和 $(A \ 2 \ B)$ 是 WFFs。
    3.  无他。
    *注：为清晰起见，我们将省略最外层括号，并采用中缀表示法，例如 $A \ 1 \ B$。*

#### 2. 公理模式

设 $A, B$ 为任意的 WFFs。

*   **A1:** $A \ 1 \ A$
*   **A2:** $(A \ 1 \ B) \ 2 \ (A \ 2 \ B)$
*   **A3:** $A \ 2 \ A$

#### 3. 推理规则

设 $A, B, C$ 为任意的 WFFs。$\vdash A$ 表示 $A$ 是一个定理。

*   **R1 (Symmetry of 1):**
    $$ \frac{\vdash A \ 1 \ B}{\vdash B \ 1 \ A} $$
*   **R2 (Transitivity of 1):**
    $$ \frac{\vdash A \ 1 \ B \quad , \quad \vdash B \ 1 \ C}{\vdash A \ 1 \ C} $$
*   **R3 (Right Congruence for 2):**
    $$ \frac{\vdash A \ 1 \ B}{\vdash (A \ 2 \ C) \ 1 \ (B \ 2 \ C)} $$
*   **R4 (Left Congruence for 2):**
    $$ \frac{\vdash A \ 1 \ B}{\vdash (C \ 2 \ A) \ 1 \ (C \ 2 \ B)} $$
*   **R5 (Right Congruence for 1):**
    $$ \frac{\vdash A \ 1 \ B}{\vdash (A \ 1 \ C) \ 1 \ (B \ 1 \ C)} $$
*   **R6 (Left Congruence for 1):**
    $$ \frac{\vdash A \ 1 \ B}{\vdash (C \ 1 \ A) \ 1 \ (C \ 1 \ B)} $$
*   **R7 (Interaction Rule):**
    $$ \frac{\vdash A \ 1 \ B \quad , \quad \vdash A \ 2 \ C}{\vdash (A \ 1 \ B) \ 2 \ C} $$

*   **R8 (Interaction Rule 2):**
    $$ \frac{\vdash A \ 1 \ B \quad , \quad \vdash B \ 2 \ C}{\vdash A \ 1 \ (B \ 2 \ C)} $$
*   **R9 (Symmetry of 2):**
    $$ \frac{\vdash A \ 2 \ B}{\vdash B \ 2 \ A} $$
*   **R10 (Transitivity of 2):**
    $$ \frac{\vdash A \ 2 \ B \quad , \quad \vdash B \ 2 \ C}{\vdash A \ 2 \ C} $$



### **4. 系统 $\mathcal{S}$ 的一致性证明**

本节将通过句法方法证明形式系统 $\mathcal{S}$ 是一致的。证明的核心在于定义一个所有系统中的定理都必须满足的句法属性，然后展示存在一个合式公式不满足此属性。

---

**定义 4.1 (变量集)**

对于任意合式公式（WFF） $F$，我们定义函数 $V(F)$ 为 $F$ 中出现的所有命题变量的集合。该函数通过对 $F$ 的结构进行递归定义：
1.  如果 $F$ 是一个命题变量 $p$，则 $V(F) = \{p\}$。
2.  如果 $F$ 的形式为 $(A \ 1 \ B)$，则 $V(F) = V(A) \cup V(B)$。
3.  如果 $F$ 的形式为 $(A \ 2 \ B)$，则 $V(F) = V(A) \cup V(B)$。

---

**定义 4.2 (属性 $\mathbb{P}^*$)**

一个合式公式 $F$ 被称为拥有属性 $\mathbb{P}^*$，当且仅当以下条件之一成立：
1.  $F$ 是一个原子命题变量。
2.  $F$ 的结构为 $(A \ 1 \ B)$ 或 $(A \ 2 \ B)$，并且 $V(A) = V(B)$。

---

**引理 4.3**

系统 $\mathcal{S}$ 的所有公理模式（A1, A2, A3）的实例都拥有属性 $\mathbb{P}^*$。

**证明：**

1.  **对于 A1:** $A \ 1 \ A$
    *   此公式结构为 $(X \ 1 \ Y)$，其中 $X=A$ 且 $Y=A$。
    *   根据定义 4.1，$V(X) = V(A)$ 且 $V(Y) = V(A)$。
    *   显然 $V(X) = V(Y)$。
    *   因此，A1 的所有实例均满足定义 4.2 的第 2 条标准，故拥有属性 $\mathbb{P}^*$。

2.  **对于 A2:** $(A \ 1 \ B) \ 2 \ (A \ 2 \ B)$
    *   此公式结构为 $(X \ 2 \ Y)$，其中 $X = (A \ 1 \ B)$ 且 $Y = (A \ 2 \ B)$。
    *   根据定义 4.1，$V(X) = V(A \ 1 \ B) = V(A) \cup V(B)$。
    *   根据定义 4.1，$V(Y) = V(A \ 2 \ B) = V(A) \cup V(B)$。
    *   因此 $V(X) = V(Y)$。
    *   因此，A2 的所有实例均满足定义 4.2 的第 2 条标准，故拥有属性 $\mathbb{P}^*$。

3.  **对于 A3:** $A \ 2 \ A$
    *   此公式结构为 $(X \ 2 \ Y)$，其中 $X=A$ 且 $Y=A$。
    *   $V(X) = V(A)$ 且 $V(Y) = V(A)$。
    *   因此 $V(X) = V(Y)$。
    *   因此，A3 的所有实例均满足定义 4.2 的第 2 条标准，故拥有属性 $\mathbb{P}^*$。

所有公理模式的实例均拥有属性 $\mathbb{P}^*$。**引理 4.3 证毕。**

---

**引理 4.4**

系统 $\mathcal{S}$ 的所有推理规则 (R1-R10) 均保持属性 $\mathbb{P}^*$。即，若一个规则的所有前提公式都拥有属性 $\mathbb{P}^*$，则其结论公式也拥有属性 $\mathbb{P}^*$。

**证明：**

对于每一个推理规则，我们都进行如下论证：我们假设其前提公式拥有属性 $\mathbb{P}^*$，并证明其结论公式也必然拥有属性 $\mathbb{P}^*$。

一个关键的初始步骤如下：任何推理规则的前提公式，其形式均为 $(X \ 1 \ Y)$ 或 $(X \ 2 \ Y)$。这种形式的公式是复合公式，不是原子命题变量。因此，若我们假设这样一个前提公式拥有属性 $\mathbb{P}^*$，根据定义 4.2，它不能满足条件 1。故它必须满足条件 2，即其直接子公式的变量集必须相等。我们将此推论应用于每个规则。

*   **R1 (Symmetry of 1):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 拥有属性 $\mathbb{P}^*$。
    *   **推论：** 由于 $(A \ 1 \ B)$ 是复合公式，此假设意味着 $V(A) = V(B)$。
    *   **结论：** 需证明结论公式 $(B \ 1 \ A)$ 拥有属性 $\mathbb{P}^*$。该公式是复合公式，其直接子公式为 $B$ 和 $A$。根据我们从假设中得到的推论 $V(A) = V(B)$，可知 $V(B) = V(A)$。因此，$(B \ 1 \ A)$ 满足定义 4.2 的条件 2，故拥有属性 $\mathbb{P}^*$。

*   **R2 (Transitivity of 1):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 与 $(B \ 1 \ C)$ 均拥有属性 $\mathbb{P}^*$。
    *   **推论：** 从第一个前提，我们推得 $V(A) = V(B)$。从第二个前提，我们推得 $V(B) = V(C)$。
    *   **结论：** 需证明结论公式 $(A \ 1 \ C)$ 拥有属性 $\mathbb{P}^*$。该公式是复合公式，其直接子公式为 $A$ 和 $C$。根据集合相等的传递性，由 $V(A) = V(B)$ 和 $V(B) = V(C)$ 可得 $V(A) = V(C)$。因此，$(A \ 1 \ C)$ 满足定义 4.2 的条件 2，故拥有属性 $\mathbb{P}^*$。

*   **R3 (Right Congruence for 2):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 拥有属性 $\mathbb{P}^*$。
    *   **推论：** $V(A) = V(B)$。
    *   **结论：** 需证明结论公式 $((A \ 2 \ C) \ 1 \ (B \ 2 \ C))$ 拥有属性 $\mathbb{P}^*$。该公式为复合公式，其直接子公式为 $(A \ 2 \ C)$ 和 $(B \ 2 \ C)$。根据定义 4.1，$V(A \ 2 \ C) = V(A) \cup V(C)$ 且 $V(B \ 2 \ C) = V(B) \cup V(C)$。由于 $V(A) = V(B)$，可得 $V(A) \cup V(C) = V(B) \cup V(C)$。因此，$V(A \ 2 \ C) = V(B \ 2 \ C)$。故结论公式满足定义 4.2 的条件 2，拥有属性 $\mathbb{P}^*$。

*   **R4 (Left Congruence for 2):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 拥有属性 $\mathbb{P}^*$。
    *   **推论：** $V(A) = V(B)$。
    *   **结论：** 需证明结论公式 $((C \ 2 \ A) \ 1 \ (C \ 2 \ B))$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $(C \ 2 \ A)$ 和 $(C \ 2 \ B)$。$V(C \ 2 \ A) = V(C) \cup V(A)$ 且 $V(C \ 2 \ B) = V(C) \cup V(B)$。由于 $V(A) = V(B)$，可得 $V(C) \cup V(A) = V(C) \cup V(B)$。因此，$V(C \ 2 \ A) = V(C \ 2 \ B)$。故结论公式拥有属性 $\mathbb{P}^*$。

*   **R5 (Right Congruence for 1):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 拥有属性 $\mathbb{P}^*$。
    *   **推论：** $V(A) = V(B)$。
    *   **结论：** 需证明结论公式 $((A \ 1 \ C) \ 1 \ (B \ 1 \ C))$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $(A \ 1 \ C)$ 和 $(B \ 1 \ C)$。$V(A \ 1 \ C) = V(A) \cup V(C)$ 且 $V(B \ 1 \ C) = V(B) \cup V(C)$。由于 $V(A) = V(B)$，可得 $V(A) \cup V(C) = V(B) \cup V(C)$。因此，$V(A \ 1 \ C) = V(B \ 1 \ C)$。故结论公式拥有属性 $\mathbb{P}^*$。

*   **R6 (Left Congruence for 1):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 拥有属性 $\mathbb{P}^*$。
    *   **推论：** $V(A) = V(B)$。
    *   **结论：** 需证明结论公式 $((C \ 1 \ A) \ 1 \ (C \ 1 \ B))$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $(C \ 1 \ A)$ 和 $(C \ 1 \ B)$。$V(C \ 1 \ A) = V(C) \cup V(A)$ 且 $V(C \ 1 \ B) = V(C) \cup V(B)$。由于 $V(A) = V(B)$，可得 $V(C) \cup V(A) = V(C) \cup V(B)$。因此，$V(C \ 1 \ A) = V(C \ 1 \ B)$。故结论公式拥有属性 $\mathbb{P}^*$。

*   **R7 (Interaction Rule):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 与 $(A \ 2 \ C)$ 均拥有属性 $\mathbb{P}^*$。
    *   **推论：** 从第一个前提，推得 $V(A) = V(B)$。从第二个前提，推得 $V(A) = V(C)$。
    *   **结论：** 需证明结论公式 $((A \ 1 \ B) \ 2 \ C)$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $(A \ 1 \ B)$ 和 $C$。我们有 $V(A \ 1 \ B) = V(A) \cup V(B)$。由于 $V(A)=V(B)$，可得 $V(A \ 1 \ B) = V(A)$。又因 $V(A)=V(C)$，故 $V(A \ 1 \ B) = V(C)$。因此，结论公式满足定义 4.2 的条件 2，拥有属性 $\mathbb{P}^*$。

*   **R8 (Interaction Rule 2):**
    *   **假设：** 前提公式 $(A \ 1 \ B)$ 与 $(B \ 2 \ C)$ 均拥有属性 $\mathbb{P}^*$。
    *   **推论：** 从第一个前提，推得 $V(A) = V(B)$。从第二个前提，推得 $V(B) = V(C)$。
    *   **结论：** 需证明结论公式 $(A \ 1 \ (B \ 2 \ C))$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $A$ 和 $(B \ 2 \ C)$。我们有 $V(B \ 2 \ C) = V(B) \cup V(C)$。由于 $V(B)=V(C)$，可得 $V(B \ 2 \ C) = V(B)$。又因 $V(A)=V(B)$，故 $V(A) = V(B \ 2 \ C)$。因此，结论公式满足定义 4.2 的条件 2，拥有属性 $\mathbb{P}^*$。

*   **R9 (Symmetry of 2):**
    *   **假设：** 前提公式 $(A \ 2 \ B)$ 拥有属性 $\mathbb{P}^*$。
    *   **推论：** $V(A) = V(B)$。
    *   **结论：** 需证明结论公式 $(B \ 2 \ A)$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $B$ 和 $A$。已知 $V(A) = V(B)$，则 $V(B) = V(A)$。因此，$(B \ 2 \ A)$ 满足定义 4.2 的条件 2，拥有属性 $\mathbb{P}^*$。

*   **R10 (Transitivity of 2):**
    *   **假设：** 前提公式 $(A \ 2 \ B)$ 与 $(B \ 2 \ C)$ 均拥有属性 $\mathbb{P}^*$。
    *   **推论：** 从第一个前提，推得 $V(A) = V(B)$。从第二个前提，推得 $V(B) = V(C)$。
    *   **结论：** 需证明结论公式 $(A \ 2 \ C)$ 拥有属性 $\mathbb{P}^*$。其直接子公式为 $A$ 和 $C$。由 $V(A) = V(B)$ 和 $V(B) = V(C)$ 可得 $V(A) = V(C)$。因此，$(A \ 2 \ C)$ 满足定义 4.2 的条件 2，拥有属性 $\mathbb{P}^*$。

由于所有推理规则均保持属性 $\mathbb{P}^*$，**引理 4.4 证毕。**

---

**定理 4.5**

在系统 $\mathcal{S}$ 中，每一个可证明的公式（定理）都拥有属性 $\mathbb{P}^*$。

**证明：**

我们对证明的长度 $n$ 进行数学归纳。

1.  **基础情况 ($n=1$):**
    一个长度为 1 的证明其结论就是一个公理。根据**引理 4.3**，所有公理都拥有属性 $\mathbb{P}^*$。基础情况成立。

2.  **归纳假设:**
    假设所有长度小于 $n$ 的证明，其结论（定理）都拥有属性 $\mathbb{P}^*$。

3.  **归纳步骤 ($n$):**
    考虑一个长度为 $n$ 的证明，其结论为公式 $T$。如果 $T$ 是一个公理，则基础情况已证明其拥有属性 $\mathbb{P}^*$。如果 $T$ 是通过应用某个推理规则 $R$ 从前提公式 $P_1, P_2, \dots, P_k$ 推导出来的，那么这些前提公式的证明长度都小于 $n$。根据归纳假设，$P_1, P_2, \dots, P_k$ 均拥有属性 $\mathbb{P}^*$。根据**引理 4.4**，所有推理规则都保持属性 $\mathbb{P}^*$，因此结论 $T$ 也必然拥有属性 $\mathbb{P}^*$。

根据数学归纳法原理，系统 $\mathcal{S}$ 的所有定理都拥有属性 $\mathbb{P}^*$。**定理 4.5 证毕。**

---

**定理 4.6**

形式系统 $\mathcal{S}$ 是一致的。

**证明：**

为了证明系统 $\mathcal{S}$ 是一致的，我们只需证明存在至少一个合式公式在 $\mathcal{S}$ 中是不可证明的。

令 $p$ 和 $q$ 为两个不同的命题变量，即 $p, q \in \mathcal{P}$ 且 $p \neq q$。
考虑合式公式 $F = (p \ 1 \ q)$。

我们检验 $F$ 是否拥有属性 $\mathbb{P}^*$：
1.  $F$ 不是一个原子命题变量，故不满足定义 4.2 的第 1 条标准。
2.  $F$ 的结构为 $(A \ 1 \ B)$，其中 $A=p$ 且 $B=q$。我们检验其子公式的变量集是否相等：
    *   根据定义 4.1，$V(A) = V(p) = \{p\}$。
    *   根据定义 4.1，$V(B) = V(q) = \{q\}$。
    *   由于 $p \neq q$，可知 $V(A) \neq V(B)$。
    故 $F$ 也不满足定义 4.2 的第 2 条标准。

由于公式 $F=(p \ 1 \ q)$ 不满足属性 $\mathbb{P}^*$ 定义的任何一条标准，所以它不拥有属性 $\mathbb{P}^*$。

然而，根据**定理 4.5**，系统 $\mathcal{S}$ 中的每一个定理都必须拥有属性 $\mathbb{P}^*$。

因此，公式 $F=(p \ 1 \ q)$ 不可能是系统 $\mathcal{S}$ 的一个定理。

既然存在一个在 $\mathcal{S}$ 中不可证明的合式公式，系统 $\mathcal{S}$ 就不是不一致的。

因此，形式系统 $\mathcal{S}$ 是一致的。**定理 4.6 证毕。**

---

### **5. 模型与可靠性 (Model and Soundness)**

本节将为形式系统 $\mathcal{S}$ 构建一个代数模型 $\mathcal{M}$，并证明系统 $\mathcal{S}$ 对于此模型是可靠的（Sound）。可靠性意味着系统中的所有定理在该模型中均为真（或称有效）。

---

#### **定义 5.1 (模型 $\mathcal{M}$)**

模型 $\mathcal{M}$ 是一个四元组 $\langle \mathcal{D}, ⟦ \cdot ⟧, \approx_1, \approx_2 \rangle$，其组成部分定义如下。

**5.1.1 论域 (Domain) $\mathcal{D}$**

论域 $\mathcal{D}$ 通过递归方式定义：
1.  **基础:** 所有命题变量构成 $\mathcal{D}$ 的一个子集: $\mathcal{P} \subseteq \mathcal{D}$。
2.  **递归:** 若 $d_1, d_2 \in \mathcal{D}$，则有序三元组 $\langle 1, (d_1, d_2) \rangle$ 和 $\langle 2, (d_1, d_2) \rangle$ 均为 $\mathcal{D}$ 中的元素。其中 $(d_1, d_2)$ 是一个有序对。
3.  **封闭性:** $\mathcal{D}$ 中不包含任何其他元素。

**5.1.2 解释函数 (Interpretation Function) $⟦ \cdot ⟧$**

解释函数 $⟦ \cdot ⟧$ 将任意合式公式 (WFF) 映射到论域 $\mathcal{D}$ 中的一个元素：
1.  对于任意命题变量 $p \in \mathcal{P}$，$⟦ p ⟧ = p$。
2.  对于任意 WFFs $A, B$，$⟦ A \ 1 \ B ⟧ = \langle 1, (⟦ A ⟧, ⟦ B ⟧) \rangle$。
3.  对于任意 WFFs $A, B$，$⟦ A \ 2 \ B ⟧ = \langle 2, (⟦ A ⟧, ⟦ B ⟧) \rangle$。

**5.1.3 原子集函数 (Atom Set Function) `atoms`**

为定义语义关系，我们首先定义一个辅助函数 `atoms`: $\mathcal{D} \to 2^\mathcal{P}$，它返回一个域元素所依赖的所有命题变量的集合。
1.  若 $d \in \mathcal{P}$，则 $atoms(d) = \{d\}$。
2.  若 $d = \langle op, (d_1, d_2) \rangle$ (其中 $op \in \{1, 2\}$)，则 $atoms(d) = atoms(d_1) \cup atoms(d_2)$。

**5.1.4 语义关系 (Semantic Relations) $\approx_1$ 和 $\approx_2$**

$\approx_1$ 和 $\approx_2$ 是定义在 $\mathcal{D}$ 上的二元关系。

1.  **关系 $\approx_2$**: 对于任意 $d_1, d_2 \in \mathcal{D}$，
    $$ d_1 \approx_2 d_2 \quad \iff \quad atoms(d_1) = atoms(d_2) $$

2.  **关系 $\approx_1$**: $\approx_1$ 是满足以下所有条件的、在 $\mathcal{D}$ 上**最小**的二元关系：
    a.  **等价关系**: $\approx_1$ 是自反的、对称的、传递的。
    b.  **合同关系 (Congruence)**: 若 $d_1 \approx_1 d_2$，则对于任意 $d_3 \in \mathcal{D}$ 和 $op \in \{1, 2\}$:
        *   (Right Congruence) $\langle op, (d_1, d_3) \rangle \approx_1 \langle op, (d_2, d_3) \rangle$
        *   (Left Congruence) $\langle op, (d_3, d_1) \rangle \approx_1 \langle op, (d_3, d_2) \rangle$
    c.  **交互属性**: 若 $d_1 \approx_1 d_2$ 且 $d_2 \approx_2 d_3$，则:
        $$ d_1 \approx_1 \langle 2, (d_2, d_3) \rangle $$
    d.  **原子集约束**: 若 $d_1 \approx_1 d_2$，则必须有 $atoms(d_1) = atoms(d_2)$。

**5.1.5 模型中的有效性 (Validity)**

一个 WFF $F$ 在模型 $\mathcal{M}$ 中是有效的，记为 $\mathcal{M} \vDash F$，其定义如下：
1.  $\mathcal{M} \vDash A \ 1 \ B \quad \iff \quad ⟦ A ⟧ \approx_1 ⟦ B ⟧$。
2.  $\mathcal{M} \vDash A \ 2 \ B \quad \iff \quad ⟦ A ⟧ \approx_2 ⟦ B ⟧$。

---

#### **定理 5.2 (系统 $\mathcal{S}$ 的可靠性)**

对于任意合式公式 $F$，如果 $\vdash F$，则 $\mathcal{M} \vDash F$。

**证明：**
我们对证明的长度 $n$ 进行数学归纳。

**基础情况 ($n=1$):**
证明的结论是一个公理。我们需要证明所有公理在模型 $\mathcal{M}$ 中均有效。

*   **A1: $A \ 1 \ A$**
    *   我们需要证明 $\mathcal{M} \vDash A \ 1 \ A$，即 $⟦ A ⟧ \approx_1 ⟦ A ⟧$。
    *   根据定义 5.1.4(a)，关系 $\approx_1$ 是自反的。因此该公理有效。

*   **A2: $(A \ 1 \ B) \ 2 \ (A \ 2 \ B)$**
    *   我们需要证明 $\mathcal{M} \vDash (A \ 1 \ B) \ 2 \ (A \ 2 \ B)$，即 $⟦ A \ 1 \ B ⟧ \approx_2 ⟦ A \ 2 \ B ⟧$。
    *   根据 $\approx_2$ 的定义，这等价于 $atoms(⟦ A \ 1 \ B ⟧) = atoms(⟦ A \ 2 \ B ⟧)$。
    *   $atoms(⟦ A \ 1 \ B ⟧) = atoms(\langle 1, (⟦ A ⟧, ⟦ B ⟧) \rangle) = atoms(⟦ A ⟧) \cup atoms(⟦ B ⟧)$。
    *   $atoms(⟦ A \ 2 \ B ⟧) = atoms(\langle 2, (⟦ A ⟧, ⟦ B ⟧) \rangle) = atoms(⟦ A ⟧) \cup atoms(⟦ B ⟧)$。
    *   二者相等，因此该公理有效。

*   **A3: $A \ 2 \ A$**
    *   我们需要证明 $\mathcal{M} \vDash A \ 2 \ A$，即 $⟦ A ⟧ \approx_2 ⟦ A ⟧$。
    *   这等价于 $atoms(⟦ A ⟧) = atoms(⟦ A ⟧)$，此为永真式。因此该公理有效。

**归纳假设:**
假设所有长度小于 $n$ 的证明，其结论（定理）在 $\mathcal{M}$ 中均有效。

**归纳步骤 ($n$):**
考虑一个长度为 $n$ 的证明，其结论 $F$ 是通过应用某个推理规则从前提 $P_1, \dots, P_k$ 推导出来的。根据归纳假设，$\mathcal{M} \vDash P_i$ 对所有 $i$ 成立。我们需要证明 $\mathcal{M} \vDash F$。

*   **R1 (Symmetry of 1):** 假设 $\mathcal{M} \vDash A \ 1 \ B$，即 $⟦ A ⟧ \approx_1 ⟦ B ⟧$。根据定义 5.1.4(a)，$\approx_1$ 是对称的，故 $⟦ B ⟧ \approx_1 ⟦ A ⟧$。因此 $\mathcal{M} \vDash B \ 1 \ A$。
*   **R2 (Transitivity of 1):** 假设 $\mathcal{M} \vDash A \ 1 \ B$ 且 $\mathcal{M} \vDash B \ 1 \ C$，即 $⟦ A ⟧ \approx_1 ⟦ B ⟧$ 且 $⟦ B ⟧ \approx_1 ⟦ C ⟧$。根据定义 5.1.4(a)，$\approx_1$ 是传递的，故 $⟦ A ⟧ \approx_1 ⟦ C ⟧$。因此 $\mathcal{M} \vDash A \ 1 \ C$。
*   **R3 (Right Congruence for 2):** 假设 $\mathcal{M} \vDash A \ 1 \ B$，即 $⟦ A ⟧ \approx_1 ⟦ B ⟧$。根据定义 5.1.4(b) 的 Right Congruence 属性，对于任意 $C$ 和 $op=2$，有 $\langle 2, (⟦ A ⟧, ⟦ C ⟧) \rangle \approx_1 \langle 2, (⟦ B ⟧, ⟦ C ⟧) \rangle$。这等价于 $⟦ A \ 2 \ C ⟧ \approx_1 ⟦ B \ 2 \ C ⟧$。因此 $\mathcal{M} \vDash (A \ 2 \ C) \ 1 \ (B \ 2 \ C)$。
*   **R4 (Left Congruence for 2):** 假设 $\mathcal{M} \vDash A \ 1 \ B$，即 $⟦ A ⟧ \approx_1 ⟦ B ⟧$。根据定义 5.1.4(b) 的 Left Congruence 属性，对于任意 $C$ 和 $op=2$，有 $\langle 2, (⟦ C ⟧, ⟦ A ⟧) \rangle \approx_1 \langle 2, (⟦ C ⟧, ⟦ B ⟧) \rangle$。这等价于 $⟦ C \ 2 \ A ⟧ \approx_1 ⟦ C \ 2 \ B ⟧$。因此 $\mathcal{M} \vDash (C \ 2 \ A) \ 1 \ (C \ 2 \ B)$。
*   **R5 (Right Congruence for 1):** 证明与 R3 完全相同，仅 $op=1$。
*   **R6 (Left Congruence for 1):** 证明与 R4 完全相同，仅 $op=1$。
*   **R7 (Interaction Rule):** 假设 $\mathcal{M} \vDash A \ 1 \ B$ 且 $\mathcal{M} \vDash A \ 2 \ C$。我们需要证明 $\mathcal{M} \vDash (A \ 1 \ B) \ 2 \ C$。
    1.  从 $\mathcal{M} \vDash A \ 1 \ B$ 可得 $⟦ A ⟧ \approx_1 ⟦ B ⟧$。根据定义 5.1.4(d) 的原子集约束，有 $atoms(⟦ A ⟧) = atoms(⟦ B ⟧)$。
    2.  从 $\mathcal{M} \vDash A \ 2 \ C$ 可得 $⟦ A ⟧ \approx_2 ⟦ C ⟧$，根据 $\approx_2$ 的定义，有 $atoms(⟦ A ⟧) = atoms(⟦ C ⟧)$。
    3.  我们需要证明 $⟦ A \ 1 \ B ⟧ \approx_2 ⟦ C ⟧$，即 $atoms(⟦ A \ 1 \ B ⟧) = atoms(⟦ C ⟧)$。
    4.  $atoms(⟦ A \ 1 \ B ⟧) = atoms(⟦ A ⟧) \cup atoms(⟦ B ⟧)$。
    5.  结合 (1)，可得 $atoms(⟦ A \ 1 \ B ⟧) = atoms(⟦ A ⟧) \cup atoms(⟦ A ⟧) = atoms(⟦ A ⟧)$。
    6.  结合 (2)，可得 $atoms(⟦ A \ 1 \ B ⟧) = atoms(⟦ C ⟧)$。结论得证。
*   **R8 (Interaction Rule 2):** 假设 $\mathcal{M} \vDash A \ 1 \ B$ 且 $\mathcal{M} \vDash B \ 2 \ C$。我们需要证明 $\mathcal{M} \vDash A \ 1 \ (B \ 2 \ C)$。
    1.  前提为 $⟦ A ⟧ \approx_1 ⟦ B ⟧$ 和 $⟦ B ⟧ \approx_2 ⟦ C ⟧$。
    2.  根据定义 5.1.4(c) 的交互属性，令 $d_1=⟦ A ⟧, d_2=⟦ B ⟧, d_3=⟦ C ⟧$，可直接推得 $⟦ A ⟧ \approx_1 \langle 2, (⟦ B ⟧, ⟦ C ⟧) \rangle$。
    3.  这等价于 $⟦ A ⟧ \approx_1 ⟦ B \ 2 \ C ⟧$。因此 $\mathcal{M} \vDash A \ 1 \ (B \ 2 \ C)$。
*   **R9 (Symmetry of 2):** 假设 $\mathcal{M} \vDash A \ 2 \ B$，即 $⟦ A ⟧ \approx_2 ⟦ B ⟧$。这等价于 $atoms(⟦ A ⟧) = atoms(⟦ B ⟧)$，根据集合相等的对称性，这也意味着 $atoms(⟦ B ⟧) = atoms(⟦ A ⟧)$。因此 $⟦ B ⟧ \approx_2 ⟦ A ⟧$ 成立，即 $\mathcal{M} \vDash B \ 2 \ A$。
*   **R10 (Transitivity of 2):** 假设 $\mathcal{M} \vDash A \ 2 \ B$ 且 $\mathcal{M} \vDash B \ 2 \ C$。这意味着 $atoms(⟦ A ⟧) = atoms(⟦ B ⟧)$ 且 $atoms(⟦ B ⟧) = atoms(⟦ C ⟧)$。根据集合相等的传递性，$atoms(⟦ A ⟧) = atoms(⟦ C ⟧)$。因此 $⟦ A ⟧ \approx_2 ⟦ C ⟧$，即 $\mathcal{M} \vDash A \ 2 \ C$。

所有推理规则均保持有效性。根据数学归纳法原理，系统 $\mathcal{S}$ 的所有定理在模型 $\mathcal{M}$ 中均有效。**定理 5.2 证毕。**

---

#### **定理 5.3 (模型的非平凡性)**

模型 $\mathcal{M}$ 是非平凡的，即存在一个合式公式 $F$ 使得 $\mathcal{M} \nvDash F$。

**证明：**
令 $p, q$ 为两个不同的命题变量，即 $p, q \in \mathcal{P}$ 且 $p \neq q$。
考虑合式公式 $F = (p \ 1 \ q)$。

为使 $\mathcal{M} \vDash p \ 1 \ q$ 成立，必须满足条件 $⟦ p ⟧ \approx_1 ⟦ q ⟧$。
根据关系 $\approx_1$ 的原子集约束 (定义 5.1.4(d))，如果 $⟦ p ⟧ \approx_1 ⟦ q ⟧$ 成立，则必须有 $atoms(⟦ p ⟧) = atoms(⟦ q ⟧)$。

我们计算相应的原子集：
*   $atoms(⟦ p ⟧) = atoms(p) = \{p\}$。
*   $atoms(⟦ q ⟧) = atoms(q) = \{q\}$。

由于 $p \neq q$，可知 $\{p\} \neq \{q\}$。
因此，$atoms(⟦ p ⟧) \neq atoms(⟦ q ⟧)$。

这与原子集约束的必要条件相矛盾。因此，$⟦ p ⟧ \approx_1 ⟦ q ⟧$ 不成立。
故 $\mathcal{M} \nvDash p \ 1 \ q$。

由于存在一个在模型 $\mathcal{M}$ 中无效的合式公式，故该模型是非平凡的。**定理 5.3 证毕。**