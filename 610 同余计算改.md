# 形式系统 $\mathcal{L}$

## 1. 语法 (Syntax)

设 $\mathcal{A}$ 为一族可数无限的原子项（Atoms），记为 $a, b, c, \dots$。项（Terms）的集合 $\mathcal{T}_{\text{syn}}$ 通过以下巴科斯-诺尔范式（BNF）归纳定义：
$$ t ::= a \mid t \leq t \mid t \cong t \mid \neg t $$
其中 $t \in \mathcal{T}_{\text{syn}}$。在此系统中，我们使用符号 $\equiv$ 表示元语言上的语法等同关系（Syntactic Identity）。

## 2. 公理与推理规则 (Axioms and Inference Rules)

我们用 $\vdash t$ 表示项 $t$ 在系统 $\mathcal{L}$ 中是可证的。$\Gamma \vdash t$表示在前提集$\Gamma$下是可证的。

### 模块 A: 等价性质
*   **Refl:** $$\frac{}{t_{1} \cong t_{1} }$$
*   **Symm:** $$\frac{t_{1} \cong t_{2}}{t_{2}\cong t_{1} }$$
*   **Trans:** $$\frac{t_{1} \cong t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \cong t_{3}}$$

### 模块 B: 预序与同余引入
*   **Id-Intro:** $$\frac{}{t_{1} \leq t_{1} }$$
*   **Transitivity:**$$\frac{t_{1}\leq t_{2},\quad t_{2}\leq t_{3}}{t_{1}\leq t_{3}}$$
*   **Cumulativity:** $$\frac{t_1 \leq t_2}{t_2 \leq (t_1 \leq t_2)}$$

*   **Rule B1:** $$\frac{t_{1} \leq t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \leq (t_{2}\cong t_{3})}$$
*   **Rule B2:** $$\frac{t_{1} \leq t_{2}, \quad t_{1} \cong t_{3}}{(t_{1} \cong t_{3}) \leq t_{2}}$$
*   **Rule B3:** $$\frac{(t_{1} \cong t_{2}) \leq t_{3}, \quad t_{2}\cong t_{4}}{(t_{2}\cong t_{4}) \leq t_{3}}$$
*   **Rule B4:** $$\frac{t_{1} \leq (t_{2} \cong t_{3}), \quad t_{3}\cong t_{4}}{t_{1} \leq (t_{3} \cong t_{4})}$$

### 模块 C: 构造同余
*   **Rule C1:** $$\frac{t_{1} \cong t_{2}, \quad t_{3} \cong t_{4}}{(t_{1} \leq t_{3}) \cong (t_{2}\leq t_{4})}$$
*   **Rule C2:** $$\frac{t_{1} \cong t_{2}}{\neg t_{1} \cong \neg t_{2}}$$

### 模块 D: 否定逻辑
*   **Rule D1:** $$\frac{t_{1} \leq t_{2}}{\neg t_{2}\leq \neg t_{1} }$$
*   **Rule D2:** $$\frac{}{ t_{1} \leq \neg \neg t_{1} }$$
*   **Rule D3:** $$\frac{}{\neg ( t_{1} \cong \neg t_{1})}$$
*   **Rule D5:** $$\frac{}{\neg \neg t_{1} \cong t_{1} }$$
*   **Rule D6:** $$\frac{t_{1}, \quad \neg t_{1}}{ t_{2}}$$

### 模块 E: 替换规则
*   **Rule E1:** $$\frac{t_{1} \cong t_{2}, \quad t_{1} \leq t_{3}}{t_{2}\leq t_{3}}$$
*   **Rule E2:** $$\frac {t_{3} \leq t_{1}, \quad t_{1}\cong t_{2}} {t_{3} \leq t_{2}}$$
*   **Rule E3:** $$\frac{t_{1} \cong t_{2}, \quad \neg t_{1} }{\neg t_{2}}$$
*   **Rule E4:** $$\frac{t_{1}, \quad t_{1} \cong t_{2}}{t_{2}}$$
---

### 模块 F: 层级规则

*   **Rule F1:** $$ \frac{}{ t \leq (t \cong t) } $$
*   **Rule F3:** $$ \frac{t_1 \cong t_2}{t_1 \leq (t_1 \cong t_2)} $$
*   **Rule F4:** $$ \frac{t_1 \cong t_2}{t_2 \leq (t_1 \cong t_2)} $$

## 3. 语义模型 $\mathfrak{M}$ 定义

### 3.1 语义空间与赋值
定义 **值空间** $\mathcal{V} = \mathbb{N} \times \mathbb{Z} \times \mathbb{N} \times \{0, 1\}$。其中任意元素 $\mathbf{v} = \langle i, l, k, p \rangle$ 分别代表：
*   $i \in \mathbb{N}$: **标识符 (Identity)**。$0$ 为错误/无效值。
*   $l \in \mathbb{Z}$: **极限层级 (Limit Level)**。表示项的主层级。
*   $k \in \mathbb{N}$: **后继索引 (Successor Index)**。表示在主层级基础上的微小结构提升。
*   $p \in \{0, 1\}$: **极性 (Polarity)**。

定义 **论域** $\mathcal{D} = \{0, 1\} \times \mathcal{V}$。任意模型元素 $x = \langle \tau, \mathbf{v} \rangle$。

### 3.2 辅助定义
1.  **模后继相等 ($\approx$):**
    对于 $\mathbf{v}_1, \mathbf{v}_2 \in \mathcal{V}$，若它们除 $k$ 以外的所有分量均相等（即 $i_1=i_2, l_1=l_2, p_1=p_2$），则称它们模后继相等，记为 $\mathbf{v}_1 \approx \mathbf{v}_2$。
2.  **提升函数 (lift):**
    $$ \text{lift}(\langle i, l, k, p \rangle) = \langle i, l, k+1, p \rangle $$
    *(注意：提升操作仅增加后继索引，不改变极限层级 $l$)*
3. **合并提升函数 (merge-lift):**
	对于任意两个语义值 $\mathbf{v}_1 = \langle i_1, l_1, k_1, p_1 \rangle$ 和 $\mathbf{v}_2 = \langle i_2, l_2, k_2, p_2 \rangle$，定义合并提升函数如下：
	$$ \text{merge-lift}(\mathbf{v}_1, \mathbf{v}_2) = \langle i_2, l_2, \max(k_1, k_2) + 1, p_2 \rangle $$
	*(解析：此函数确保生成的项在后继索引 $k$ 上严格高于其两个子项，从而防止在嵌套构造中丢失层级信息。)*

### 3.3 解释函数
记 $⟦ t ⟧ = \langle \tau(t), \mathbf{v}(t) \rangle$。

1.  **原子项 (Atoms):**
    $$ ⟦ a_j ⟧ = \langle 1, \langle j, 0, 0, 0 \rangle \rangle $$

2.  **否定 (Negation):**
    设 $⟦ t ⟧ = \langle \tau, \langle i, l, k, p \rangle \rangle$，则：
    $$ ⟦ \neg t ⟧ = \langle 1-\tau, \langle i, l, k, 1-p \rangle \rangle $$

3.  **等价 (Equivalence):**
    $$ ⟦ t_1 \cong t_2 ⟧ = \begin{cases} \langle 1, \text{lift}(\mathbf{v}_1) \rangle & \text{若 } \mathbf{v}_1 \approx \mathbf{v}_2 \textbf{ 且 } \tau_1 = \tau_2 \textbf{ 且 } k_{1}=k_{2}\\ \langle 0, \mathbf{e} \rangle & \text{其他情况} \end{cases} $$

4.  **序关系 (Order):**
$$ ⟦ t_1 \leq t_2 ⟧ = \begin{cases} \langle 1, \text{merge-lift}(\mathbf{v}_1, \mathbf{v}_2) \rangle & \text{若 } \mathbf{v}_1 \preceq \mathbf{v}_2 \\ \langle 0, \mathbf{e} \rangle & \text{若 } \mathbf{v}_1 \npreceq \mathbf{v}_2 \end{cases} $$

其中序关系 $\mathbf{v}_1 \preceq \mathbf{v}_2$ 的真值判定条件为：
*   必须满足极性一致：$p_1 = p_2$。
*   **层级条件**：
    *   若 $p=0$，则 $l_1 \leq l_2$。
    *   若 $p=1$，则 $l_1 \geq l_2$。*

---

## 4. 元理论性质分析

### 4.1 可靠性验证 (Soundness Verification)

定义 **语义有效性 (Validity)**：若对于任意项 $t$，其解释 $⟦t⟧ = \langle \tau, \mathbf{v} \rangle$ 满足 $\tau = 1$，则称 $t$ 是语义有效的，记为 $\vDash t$。
若对于推导规则 $\frac{t_1, \dots, t_n}{t}$，当 $\vDash t_1, \dots, \vDash t_n$ 均成立时必有 $\vDash t$，则称该规则是可靠的。

为确保证明的严谨性，我们引入以下关键引理：

**引理 1 (不变量引理):**
1.  **基础提升 (lift):** $\mathbf{v} \approx \text{lift}(\mathbf{v})$ 且 $\mathbf{v} \preceq \text{lift}(\mathbf{v})$ 且 $\text{lift}(\mathbf{v}) \preceq \mathbf{v}$。
2.  **合并提升 (merge-lift):** 对于任意 $\mathbf{v}_1$，有 $\text{merge-lift}(\mathbf{v}_1, \mathbf{v}_2) \approx \mathbf{v}_2$。因此 $\mathbf{v}_2 \preceq \text{merge-lift}(\mathbf{v}_1, \mathbf{v}_2)$ 亦成立。
*证明：* `lift` 仅增加 $\mathbf{v}$ 的 $k$ 值；`merge-lift` 虽结合了 $\mathbf{v}_1$ 的 $k$ 值，但其 $i, l, p$ 分量完全继承自 $\mathbf{v}_2$。由于 $\approx$ 和 $\preceq$ 对 $k$ 盲目，故性质成立。

**引理 2 (同余代换引理):** 若 $\mathbf{v}_1 \approx \mathbf{v}_2$，则对于任意 $\mathbf{v}_3$：
1.  $\mathbf{v}_1 \preceq \mathbf{v}_3 \iff \mathbf{v}_2 \preceq \mathbf{v}_3$
2.  $\mathbf{v}_3 \preceq \mathbf{v}_1 \iff \mathbf{v}_3 \preceq \mathbf{v}_2$
*证明：* $\mathbf{v}_1 \approx \mathbf{v}_2$ 蕴含 $i_1=i_2, l_1=l_2, p_1=p_2$。序关系 $\preceq$ 的真值条件完全由三元组 $(i, l, p)$ 决定，故 $\mathbf{v}_1$ 与 $\mathbf{v}_2$ 在序关系中可自由代换。

以下逐一验证各模块规则的可靠性。设 $⟦ t_n ⟧ = \langle \tau_n, \mathbf{v}_n \rangle$。

#### **模块 A: 等价性质**
*   **Refl ($t \cong t$):**
    总是满足 $\tau = \tau$ 且 $\mathbf{v} \approx \mathbf{v}$。故 $⟦t \cong t⟧$ 的真值为 1。结构值为 $\text{lift}(\mathbf{v})$，有效。
*   **Symm:**
    前提 $\vDash t_1 \cong t_2 \implies \tau_1=\tau_2 \land \mathbf{v}_1 \approx \mathbf{v}_2$。
    由 $\approx$ 的对称性，$\mathbf{v}_2 \approx \mathbf{v}_1$ 成立，故 $\vDash t_2 \cong t_1$。
*   **Trans:**
    由 $\approx$ 在 $(i, l, p)$ 上的传递性及 $\tau$ 的传递性直接得出。

#### **模块 B: 预序与同余引入**
*   **Id-Intro ($t \leq t$):**
    序关系 $\preceq$ 要求 $(i, p)$ 一致且 $l \leq l$ (或 $l \geq l$)，这由 $\mathbb{Z}$ 上序的自反性保证。故 $\tau=1$。
*   **Transitivity:**
    由 $\mathbb{Z}$ 上 $\leq$ 的传递性及标识符/极性的一致性直接得出。
*   **Cumulativity ($t_1 \leq t_2 \vdash t_2 \leq (t_1 \leq t_2)$):**
    设结论右项为 $R = (t_1 \le t_2)$。根据新定义，$⟦R⟧ = \langle 1, \text{merge-lift}(\mathbf{v}_1, \mathbf{v}_2) \rangle$。
    需验证 $t_2 \le R$，即验证 $\mathbf{v}_2 \preceq \mathbf{v}_R = \text{merge-lift}(\mathbf{v}_1, \mathbf{v}_2)$。
    由 **引理 1**，$\text{merge-lift}$ 操作生成的项与第二个参数模后继相等（$\approx$），即 $\mathbf{v}_R$ 与 $\mathbf{v}_2$ 仅在 $k$ 值上不同。
    由于序关系 $\preceq$ 对 $k$ 盲目，且序具有自反性，故 $\mathbf{v}_2 \preceq \mathbf{v}_R$ 恒成立。结论有效。
*   **Rule B1 ($\frac{t_{1} \leq t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \leq (t_{2}\cong t_{3})}$):**
    前提 1 $\implies \mathbf{v}_1 \preceq \mathbf{v}_2$。
    前提 2 $\implies \mathbf{v}_2 \approx \mathbf{v}_3$。
    结论右项 $R = (t_2 \cong t_3)$ 的结构为 $\text{lift}(\mathbf{v}_2)$。
    需验证 $\mathbf{v}_1 \preceq \text{lift}(\mathbf{v}_2)$。因 $\preceq$ 忽略 $k$，此条件等价于 $\mathbf{v}_1 \preceq \mathbf{v}_2$，即前提 1。得证。
*   **Rule B2 ($\frac{t_{1} \leq t_{2}, \quad t_{1} \cong t_{3}}{(t_{1} \cong t_{3}) \leq t_{2}}$):** 
	前提 1 $\implies \mathbf{v}_1 \preceq \mathbf{v}_2$。 前提 2 $\implies \mathbf{v}_1 \approx \mathbf{v}_3$。 结论左项 $L = (t_1 \cong t_3)$ 的结构为 $\text{lift}(\mathbf{v}_1)$。 需验证 $\text{lift}(\mathbf{v}_1) \preceq \mathbf{v}_2$。 由 **引理 1**，$\text{lift}(\mathbf{v}_1) \preceq \mathbf{v}_1$ 恒成立。 结合前提 1 利用 $\preceq$ 的传递性，即有 $\text{lift}(\mathbf{v}_1) \preceq \mathbf{v}_1 \preceq \mathbf{v}_2$，故结论成立。

*   **Rule B3：**
$$ \frac{(t_{1} \cong t_{2}) \leq t_{3}, \quad t_{2}\cong t_{4}}{(t_{2}\cong t_{4}) \leq t_{3}} $$

	设 $⟦ t_n ⟧ = \langle \tau_n, \mathbf{v}_n \rangle$。
	我们需要证明：当前提均为真时，结论的序关系成立。
	
	1.  **分析前提 1:** $\vDash (t_1 \cong t_2) \leq t_3$
	    *   该序关系成立意味着左侧的同余项 $(t_1 \cong t_2)$ 必须是良定义的（非错误值）。
	    *   由此推出：$\mathbf{v}_1$ 与 $\mathbf{v}_2$ 满足结构相容性，即 $\mathbf{v}_1 \approx \mathbf{v}_2$（共享相同的 $i, l, p$）。
	    *   左侧项的结构值为 $\mathbf{v}_{L1} = \text{lift}(\mathbf{v}_1)$。
	    *   前提的语义含义为：**$\text{lift}(\mathbf{v}_1) \preceq \mathbf{v}_3$**。
	
	2.  **分析结论目标:** $(t_2 \cong t_4) \leq t_3$
	    *   结论左侧项为 $(t_2 \cong t_4)$。其结构值定义为 $\mathbf{v}_{L2} = \text{lift}(\mathbf{v}_2)$。
	    *   我们需要验证：**$\text{lift}(\mathbf{v}_2) \preceq \mathbf{v}_3$**。
	
	3.  **推导:**
	    *   由步骤 1 知：$\mathbf{v}_1 \approx \mathbf{v}_2$。
	    *   这意味着 $\mathbf{v}_1$ 与 $\mathbf{v}_2$ 的 $i, l, p$ 分量完全相同。
	    *   $\text{lift}$ 操作仅改变 $k$ 值，不改变 $i, l, p$。因此，$\text{lift}(\mathbf{v}_1)$ 与 $\text{lift}(\mathbf{v}_2)$ 的 $i, l, p$ 分量也完全相同。
	    *   利用 **序关系的盲目性**：由于 $\text{lift}(\mathbf{v}_1)$ 与 $\text{lift}(\mathbf{v}_2)$ 在序关系关注的所有维度上均一致，故它们在序关系中可互换。
	    *   因为前提已证 $\text{lift}(\mathbf{v}_1) \preceq \mathbf{v}_3$，所以必然有 **$\text{lift}(\mathbf{v}_2) \preceq \mathbf{v}_3$**。
	
	**结论：** Rule B3 有效。


*   **Rule B4：**
$$ \frac{t_{1} \leq (t_{2} \cong t_{3}), \quad t_{3}\cong t_{4}}{t_{1} \leq (t_{3} \cong t_{4})} $$


	1.  **分析前提 1:** $\vDash t_1 \leq (t_2 \cong t_3)$
	    *   该序关系成立意味着右侧同余项 $(t_2 \cong t_3)$ 是良定义的。
	    *   由此推出：$\mathbf{v}_2 \approx \mathbf{v}_3$（共享相同的 $i, l, p$）。
	    *   右侧项的结构值为 $\mathbf{v}_{R1} = \text{lift}(\mathbf{v}_2)$。
	    *   前提的语义含义为：**$\mathbf{v}_1 \preceq \text{lift}(\mathbf{v}_2)$**。
	
	2.  **分析结论目标:** $t_1 \leq (t_3 \cong t_4)$
	    *   结论右侧项为 $(t_3 \cong t_4)$。其结构值定义为 $\mathbf{v}_{R2} = \text{lift}(\mathbf{v}_3)$。
	    *   我们需要验证：**$\mathbf{v}_1 \preceq \text{lift}(\mathbf{v}_3)$**。
	
	3.  **推导:**
	    *   由步骤 1 知：$\mathbf{v}_2 \approx \mathbf{v}_3$。
	    *   这保证了 $\mathbf{v}_2$ 与 $\mathbf{v}_3$ 在 $i, l, p$ 上完全一致。
	    *   进而 $\text{lift}(\mathbf{v}_2)$ 与 $\text{lift}(\mathbf{v}_3)$ 在 $i, l, p$ 上也完全一致。
	    *   利用 **序关系的盲目性**：在序关系 $\preceq$ 的右侧位置，$\text{lift}(\mathbf{v}_2)$ 与 $\text{lift}(\mathbf{v}_3)$ 是等价的。
	    *   因为前提已证 $\mathbf{v}_1 \preceq \text{lift}(\mathbf{v}_2)$，所以必然有 **$\mathbf{v}_1 \preceq \text{lift}(\mathbf{v}_3)$**。
	**结论：** Rule B4 有效。


#### **模块 C: 构造同余**
*   **Rule C1 ($\frac{t_{1} \cong t_{2}, \quad t_{3} \cong t_{4}}{(t_{1} \leq t_{3}) \cong (t_{2}\leq t_{4})}$):**
    设结论左项 $L = (t_1 \le t_3)$，右项 $R = (t_2 \le t_4)$。
    由语义定义：
    $\mathbf{v}_L = \text{merge-lift}(\mathbf{v}_1, \mathbf{v}_3) = \langle i_3, l_3, \max(k_1, k_3)+1, p_3 \rangle$
    $\mathbf{v}_R = \text{merge-lift}(\mathbf{v}_2, \mathbf{v}_4) = \langle i_4, l_4, \max(k_2, k_4)+1, p_4 \rangle$

    1.  **真值相等 ($\tau_L = \tau_R$):**
        前提蕴含 $\mathbf{v}_1 \approx \mathbf{v}_2$ 且 $\mathbf{v}_3 \approx \mathbf{v}_4$。由 **引理 2 (同余代换)**，$\mathbf{v}_1 \preceq \mathbf{v}_3 \iff \mathbf{v}_2 \preceq \mathbf{v}_4$。故 $L$与 $R$ 的真值一致。
    2.  **结构近似 ($\mathbf{v}_L \approx \mathbf{v}_R$):**
        因前提 $\mathbf{v}_3 \approx \mathbf{v}_4$，即 $i_3=i_4, l_3=l_4, p_3=p_4$。而 $\mathbf{v}_L, \mathbf{v}_R$ 的非 $k$ 分量分别继承自 $\mathbf{v}_3, \mathbf{v}_4$，故 $\mathbf{v}_L \approx \mathbf{v}_R$。
    3.  **后继索引严格相等 ($k_L = k_R$):**
        前提 $t_1 \cong t_2$ 蕴含 $k_1 = k_2$。
        前提 $t_3 \cong t_4$ 蕴含 $k_3 = k_4$。
        因此 $\max(k_1, k_3) = \max(k_2, k_4)$。
        进而 $k_L = \max(k_1, k_3) + 1 = \max(k_2, k_4) + 1 = k_R$。
    
    综上，$\mathbf{v}_L$ 与 $\mathbf{v}_R$ 满足完全相等条件（$\approx$ 且 $k$ 相等），且真值一致，故结论有效。
*   **Rule C2:**
    否定操作 $\neg$ 仅翻转 $\tau$ 和 $p$。若 $\mathbf{v}_1 \approx \mathbf{v}_2$，则 $p_1=p_2 \implies (1-p_1)=(1-p_2)$，且 $i, l$ 不变。故 $\neg t_1 \cong \neg t_2$ 成立。

#### **模块 D: 否定逻辑**
*   **Rule D1 ($t_1 \le t_2 \vdash \neg t_2 \le \neg t_1$):**
    前提 $\mathbf{v}_1 \preceq \mathbf{v}_2 \implies i_1=i_2, p_1=p_2$。
    设 $p_1=0$，则 $l_1 \le l_2$。
    对于结论：$\neg t$ 的极性为 $1-p_1 = 1$。
    在极性为 1 时，序关系 $\preceq$ 定义为“极限层级较大者为小”。
    需验证 $\mathbf{v}_{\neg t_2} \preceq \mathbf{v}_{\neg t_1}$。即验证 $l_{\neg t_2} \ge l_{\neg t_1}$。
    因否定不改变 $l$，这等价于 $l_2 \ge l_1$，即 $l_1 \le l_2$。与前提一致，得证。
*   **Rule D2:** 双重否定回复原极性，显然成立。
*   **Rule D3 ($\neg ( t_{1} \cong \neg t_{1})$):**
    考察 $X = t_1 \cong \neg t_1$。
    $\mathbf{v}_{t_1}$ 的极性为 $p$，$\mathbf{v}_{\neg t_1}$ 的极性为 $1-p$。
    因 $p \neq 1-p$，故 $\mathbf{v}_{t_1} \not\approx \mathbf{v}_{\neg t_1}$。
    根据 $\cong$ 定义，此时 $X$ 的真值 $\tau_X = 0$。
    则 $\neg X$ 的真值为 $1 - 0 = 1$。结论有效。
*   **Rule D5:** 双重否定结构值完全复原，满足 $\approx$。
*   **Rule D6:**
    若前提 $\tau(t)=1$ 且 $\tau(\neg t)=1$，则 $1 = 1-\tau(t) = 0$，导致矛盾。
    在经典逻辑语义下，前提集不满足意味着结论在此前提下真空有效（Vacuously true）。

#### **模块 E: 替换规则**
*   **Rule E1 ($t_1 \cong t_2, t_1 \le t_3 \vdash t_2 \le t_3$):**
    前提 1 蕴含 $\mathbf{v}_1 \approx \mathbf{v}_2$。
    前提 2 蕴含 $\mathbf{v}_1 \preceq \mathbf{v}_3$。
    结论要求 $\mathbf{v}_2 \preceq \mathbf{v}_3$。
    直接应用 **引理 2 (同余代换引理)** 即可得证。
*   **Rule E2:** 同理，利用引理 2 在序关系的左侧进行代换。
*   **Rule E3 ($t_1 \cong t_2, \neg t_1 \vdash \neg t_2$):**
    前提 1 蕴含 $\tau_1 = \tau_2$。
    前提 2 蕴含 $\tau(\neg t_1) = 1 \implies \tau_1 = 0$。
    因此 $\tau_2 = 0 \implies \tau(\neg t_2) = 1$。得证。
*   **Rule E4:** 直接由 $t_1 \cong t_2 \implies \tau_1 = \tau_2$ 得证。

#### **模块 F: 层级规则**
*   **Rule F1 ($\vdash t \leq (t \cong t)$):**
    右项 $R = (t \cong t)$，其结构为 $\mathbf{v}_R = \text{lift}(\mathbf{v}_t)$。
    需验证 $t \le R$，即 $\mathbf{v}_t \preceq \text{lift}(\mathbf{v}_t)$。
    由**引理 1**，此式恒成立。
*   **Rule F3 ($\frac{t_1 \cong t_2}{t_1 \leq (t_1 \cong t_2)}$):**
    前提 $\implies \mathbf{v}_1 \approx \mathbf{v}_2$。
    右项 $R$ 结构为 $\text{lift}(\mathbf{v}_1)$。
    需验证 $\mathbf{v}_1 \preceq \text{lift}(\mathbf{v}_1)$。由**引理 1**，恒成立。
    (注意：此处前提仅用于确保 $R$ 是良定义的同余项，实际上只要项存在，序关系即成立)。
*   **Rule F4 ($\frac{t_1 \cong t_2}{t_2 \leq (t_1 \cong t_2)}$):**
    右项 $R$ 结构为 $\text{lift}(\mathbf{v}_1)$。
    需验证 $\mathbf{v}_2 \preceq \text{lift}(\mathbf{v}_1)$。
    因 $\preceq$ 忽略 $k$，等价于 $\mathbf{v}_2 \preceq \mathbf{v}_1$。
    又前提 $\mathbf{v}_1 \approx \mathbf{v}_2$ 蕴含 $\mathbf{v}_2 \preceq \mathbf{v}_1$ (由**引理 2**及序的自反性)。得证。


### 4.2 一致性与非平凡性证明 (Consistency and Non-triviality)

基于 4.1 节确立的可靠性定理（Soundness Theorem），我们在此证明形式系统 $\mathcal{L}$ 的否定一致性与绝对非平凡性。

#### **定理 4.2.1 (否定一致性 Negation Consistency)**
形式系统 $\mathcal{L}$ 是相容的，即不存在任何项 $t \in \mathcal{T}_{\text{syn}}$，使得 $\vdash t$ 与 $\vdash \neg t$ 同时成立。

**证明：**
1.  **反证假设：** 假设存在项 $t$ 使得 $\Gamma_{\emptyset} \vdash t$ 且 $\Gamma_{\emptyset} \vdash \neg t$。
2.  **应用可靠性：** 根据 4.1 节证明的可靠性，若 $\vdash \phi$，则 $\vDash \phi$（即对于任意解释，其真值 $\tau(\phi) = 1$）。
    因此，必然有 $\vDash t$ 且 $\vDash \neg t$。
3.  **语义分析：**
    设 $⟦ t ⟧ = \langle \tau, \mathbf{v} \rangle$。
    由 $\vDash t$，得 $\tau = 1$。
    由 $\vDash \neg t$，根据否定语义定义 $⟦ \neg t ⟧ = \langle 1-\tau, \mathbf{v}' \rangle$，得 $1-\tau = 1$。
4.  **导出矛盾：**
    由 $1-\tau = 1$ 解得 $\tau = 0$。
    这与步骤 3 中导出的 $\tau = 1$ 矛盾（在经典二值逻辑中 $0 \neq 1$）。
5.  **结论：** 假设不成立，$\mathcal{L}$ 满足否定一致性。

#### **定理 4.2.2 (非平凡性 Non-triviality)**
形式系统 $\mathcal{L}$ 不是平凡的，即存在至少一个项 $t$，使得 $\nvdash t$。更具体地，系统无法证明不同原子项之间的等价性或序关系混淆。

**证明：**
我们要构造一个反例 $t_{false}$ 使得 $\not\vDash t_{false}$，从而由可靠性定理的逆否命题推导出 $\nvdash t_{false}$。

1.  **反例构造：**
    考虑两个不同的原子项 $a_1, a_2 \in \mathcal{A}$，其中 $a_1 \not\equiv a_2$。
    考察命题 $t_{false} := a_1 \cong a_2$。

2.  **模型求值：**
    根据 3.3 节定义：
    $⟦ a_1 ⟧ = \langle 1, \langle 1, 0, 0, 0 \rangle \rangle$ （设 $a_1$ 对应索引 $j=1$）
    $⟦ a_2 ⟧ = \langle 1, \langle 2, 0, 0, 0 \rangle \rangle$ （设 $a_2$ 对应索引 $j=2$）

3.  **验证条件：**
    判断 $a_1 \cong a_2$ 的真值需验证 $\mathbf{v}_{a_1} \approx \mathbf{v}_{a_2}$。
    根据 $\approx$ 的定义，要求标识符 $i$ 相等。
    此处 $i(a_1) = 1 \neq 2 = i(a_2)$。
    因此 $\mathbf{v}_{a_1} \not\approx \mathbf{v}_{a_2}$。

4.  **计算结果：**
    根据同余语义：
    $$ ⟦ a_1 \cong a_2 ⟧ = \langle 0, \mathbf{e} \rangle $$
    因为真值 $\tau = 0$，所以 $\not\vDash a_1 \cong a_2$。

5.  **结论：**
    由 $\not\vDash a_1 \cong a_2$ 及可靠性定理，得 $\nvdash a_1 \cong a_2$。
    同理可证 $\nvdash a_1 \leq a_2$（因序关系同样要求 $i_1 = i_2$）。
    因此，系统 $\mathcal{L}$ 能够区分不同的原子项，是非平凡的。

#### **推论 4.2.3 (结构层级的非坍缩性)**
该系统中的序关系 $\leq$ 不会坍缩为全域关系或空关系。
*   **存在性：** $\vdash a_1 \leq a_1$ (由 Rule Id-Intro)。
*   **非全域性：** $\nvdash a_1 \leq \neg a_1$。
    *证明：* $a_1$ 极性 $p=0$，$\neg a_1$ 极性 $p=1$。序关系要求 $p_1=p_2$，故语义真值为 0。
