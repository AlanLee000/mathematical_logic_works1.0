# 形式化定义：递归二叉空间上的拓扑雕刻博弈
# Formal Definition: The Topological Sculpting Game on Recursive Binary Space

## 1. 基础架构 (Infrastructure)

### 定义 1.1 (全空间拓扑 $\Omega$)
全空间被定义为一个无限有向完全二叉树结构 $\Omega = (V_{\Omega}, E_{\Omega})$。
*   **节点集合** $V_{\Omega} = \{0, 1\}^*$。
    *   $\lambda$ 表示空串（全局根节点）。
    *   对于任意 $u \in V_{\Omega}$，定义左子节点为 $u0$，右子节点为 $u1$。
*   **基础边集** $E_{\Omega} \subset V_{\Omega} \times V_{\Omega}$。
    *   $E_{\Omega} = \{ (u, u\sigma) \mid u \in V_{\Omega}, \sigma \in \{0, 1\} \}$。
    *   对于任意 $e \in E_{\Omega}$，定义其边类型为 $\tau(e) = \mathbf{T}$ (Tree Edge)。

### 定义 1.2 (配置空间 $\mathbb{G}$)
系统的任意瞬间配置由子图 $G = (V_{\Omega}, E)$ 描述，其中 $E$ 是有限边集。
*   边集分解：$E = E_T \cup E_V$。
    *   $E_T \subseteq E_{\Omega}$ (残留的原始树边)。
    *   $E_V$ 为玩家添加的虚边 (Virtual Edge)，满足 $E_V \cap E_{\Omega} = \emptyset$。
    *   对于任意 $e \in E_V$，定义其边类型为 $\tau(e) = \mathbf{V}$。
*   初始状态 $G_0 = (V_{\Omega}, E_{\Omega})$，即 $E_T = E_{\Omega}, E_V = \emptyset$。

### 定义 1.3 (目标流形 $G^*$)
给定一个有限、简单、连通的无向图 $G^* = (V^*, E^*)$ 作为同构目标。

---

## 2. 动态约束系统 (Dynamic Constraint System)

### 定义 2.1 (路径属性)
在任意配置 $G = (V_{\Omega}, E)$ 中，定义路径 $P$ 为顶点与边的序列 $(v_0, e_1, v_1, \dots, e_k, v_k)$。
令 $\Sigma_P = (\tau(e_1), \tau(e_2), \dots, \tau(e_k))$ 为路径的类型序列。

#### 2.1.1 密度约束 (The Density Constraint)
谓词 $\Phi_{\text{dense}}(P)$ 为真，当且仅当序列 $\Sigma_P$ 中**不包含**子序列 $(\mathbf{V}, \underbrace{\mathbf{T}, \mathbf{T}, \dots, \mathbf{T}}_{n \ge 2}, \mathbf{V})$。
> *注：即任意两条虚边之间，至多间隔 1 条树边。*

#### 2.1.2 归根性 (Radicality)
谓词 $\Phi_{\text{root}}(P)$ 为真，当且仅当 $v_k = \lambda$。

#### 2.1.3 新生包含性 (Novelty Inclusion)
对于给定的特定边 $e_{new}$，谓词 $\Phi_{\text{inc}}(P, e_{new})$ 为真，当且仅当 $e_{new} \in \{e_1, \dots, e_k\}$。

### 定义 2.2 (合法毁灭路径集合 $\mathcal{R}$)
对于给定的图 $G$ 和新插入的边 $e_{new}$，定义合法毁灭路径集合 $\mathcal{R}(G, e_{new})$ 为：
$$
\mathcal{R}(G, e_{new}) = \{ P \text{ is a path in } G \mid \Phi_{\text{root}}(P) \land \Phi_{\text{dense}}(P) \land \Phi_{\text{inc}}(P, e_{new}) \}
$$

---

## 3. 游戏进程与状态转移 (Gameplay & Transitions)

游戏在离散时间 $t \in \mathbb{N}$ 上进行。状态转移由**玩家策略**与**环境反作用**共同驱动。

### 3.1 玩家动作 (Player Move)
在时刻 $t$，给定当前状态 $G_t = (V_{\Omega}, E_t)$，玩家选择一个三元组 $\mu_t = (u, p, q)$，其中 $u \in V_{\Omega}$ 且 $p, q \in \{0, 1\}^*$。
此动作构造一条候选虚边 $e_{new} = \{u \cdot p, u \cdot q\}$。
定义中间态 $G'_{t} = (V_{\Omega}, E_t \cup \{e_{new}\})$。

### 3.2 判定消去协议 (The Erasure Resolution)
环境依据中间态 $G'_t$ 和新边 $e_{new}$ 计算毁灭集合 $\mathcal{R}(G'_t, e_{new})$。状态 $G_{t+1}$ 的生成遵循以下非确定性转移规则：

#### 情况 A：稳定态 (Stability)
若 $\mathcal{R}(G'_t, e_{new}) = \emptyset$，则：
$$
E_{t+1} = E_t \cup \{e_{new}\}
$$
*(新边成功驻留)*

#### 情况 B：崩塌态 (Collapse)
若 $\mathcal{R}(G'_t, e_{new}) \neq \emptyset$，则系统进入非确定性分支。
系统**非确定性地选择**一条路径 $P^* \in \mathcal{R}(G'_t, e_{new})$。
下一时刻的边集定义为：
$$
E_{t+1} = (E_t \cup \{e_{new}\}) \setminus E(P^*)
$$
其中 $E(P^*)$ 表示路径 $P^*$ 中包含的所有边（含 $e_{new}$ 及相关树边）。

> **推论**：在此情况下，$e_{new}$ 总是被移除，且至少有一条或多条原始树边同时被永久移除。

---

## 4. 胜利条件 (Victory Condition)

定义算子 $\text{Components}(G)$ 为图 $G$ 中所有连通分支的集合。
游戏在时刻 $t$ 结束并判定玩家胜利，当且仅当：
$$
\exists C \in \text{Components}(G_t) : C \cong G^*
$$
其中 $\cong$ 表示图同构关系。

---

## 5. 系统总结 (System Summary)

该动力系统可形式化为五元组 $\mathcal{S} = \langle \Omega, G^*, \mathcal{A}, \Delta, \mathcal{W} \rangle$：

1.  **空间** $\Omega$: 标记无限二叉树。
2.  **目标** $G^*$: 有限简单图。
3.  **动作集** $\mathcal{A}$: $V_{\Omega} \times \{0,1\}^* \times \{0,1\}^*$。
4.  **转移关系** $\Delta \subseteq \mathbb{G} \times \mathcal{A} \times \mathbb{G}$:
    $((V, E), \mu, (V, E')) \in \Delta$ 当且仅当:
    令 $e_{new}$ 由 $\mu$ 生成，
    *   若 $\mathcal{R} = \emptyset$, 则 $E' = E \cup \{e_{new}\}$.
    *   若 $\mathcal{R} \neq \emptyset$, 则 $\exists P \in \mathcal{R}$ 使得 $E' = (E \cup \{e_{new}\}) \setminus E(P)$.
5.  **胜利集** $\mathcal{W} \subset \mathbb{G}$: 包含同构于 $G^*$ 子图的状态集。

---