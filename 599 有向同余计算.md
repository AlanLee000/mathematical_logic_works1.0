# 形式系统 $\mathcal{L}$ 及其元理论性质分析报告

## 1. 语法 (Syntax)

设 $\mathcal{A}$ 为一族可数无限的原子项（Atoms），记为 $a, b, c, \dots$。项（Terms）的集合 $\mathcal{T}_{\text{syn}}$ 通过以下巴科斯-诺尔范式（BNF）归纳定义：
$$ t ::= a \mid t \leq t \mid t \cong t \mid \neg t $$
其中 $t \in \mathcal{T}_{\text{syn}}$。在此系统中，我们使用符号 $\equiv$ 表示元语言上的语法等同关系（Syntactic Identity）。

## 2. 公理与推理规则 (Axioms and Inference Rules)

我们用 $\vdash t$ 表示项 $t$ 在系统 $\mathcal{L}$ 中是可证的。

### 模块 A: 等价性质
*   **Refl:** $$\frac{}{t_{1} \cong t_{1} }$$
*   **Symm:** $$\frac{t_{1} \cong t_{2}}{t_{2}\cong t_{1} }$$
*   **Trans:** $$\frac{t_{1} \cong t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \cong t_{3}}$$

### 模块 B: 预序与同余引入
*   **Id-Intro:** $$\frac{}{t_{1} \leq t_{1} }$$
*   **Rule B1:** $$\frac{t_{1} \leq t_{2}, \quad t_{2}\cong t_{3}}{t_{1} \leq (t_{2}\cong t_{3})}$$
*   **Rule B2:** $$\frac{t_{1} \leq t_{2}, \quad t_{1} \cong t_{3}}{(t_{1} \cong t_{3}) \leq t_{2}}$$
*   **Rule B3:** $$\frac{(t_{1} \cong t_{2}) \leq t_{3}, \quad t_{2}\cong t_{4}}{(t_{2}\cong t_{4}) \leq t_{3}}$$

### 模块 C: 构造同余
*   **Rule C1:** $$\frac{t_{1} \cong t_{2}, \quad t_{3} \cong t_{4}}{(t_{1} \leq t_{3}) \cong (t_{2}\leq t_{4})}$$
*   **Rule C2:** $$\frac{t_{1} \cong t_{2}}{\neg t_{1} \cong \neg t_{2}}$$

### 模块 D: 同余提取
*   **Rule D1:** $$\frac{(t_{1} \cong t_{2}) \leq t_{3}}{t_{1} \leq t_{3}} \quad \text{以及} \quad \frac{(t_{1} \cong t_{2}) \leq t_{3}}{t_{2}\leq t_{3}}$$

### 模块 E: 替换规则
*   **Rule E1:** $$\frac{t_{1} \cong t_{2}, \quad t_{1} \leq t_{3}}{t_{2}\leq t_{3}}$$
*   **Rule E2:** $$\frac{t_{1} \cong t_{2}, \quad \neg t_{1} }{\neg t_{2}}$$
*   **Rule E3:** $$\frac {t_{3} \leq t_{1}, \quad t_{1}\cong t_{2}} {t_{3} \leq t_{2}}$$

### 模块 F: 传递规则
*   **Rule F1:** $$\frac{t_{1} \leq t_{2}, \quad t_{2}\leq t_{3}}{t_{1} \leq t_{3}}$$

### 模块 G: 否定逻辑
*   **Rule G1:** $$\frac{t_{1} \leq t_{2}}{\neg t_{2}\leq \neg t_{1} }$$
*   **Rule G2:** $$\frac{}{ t_{1} \leq \neg \neg t_{1} }$$
*   **Rule G3:** $$\frac{}{\neg ( t_{1} \cong \neg t_{1})}$$
*   **Rule G4:** $$\frac{}{\neg ( t_{1} \cong (t_{1} \leq t_{2}))}$$

### 模块 H: 破坏性规则
*   **Rule H1:** $$\frac{t_{1}, \quad t_{1} \cong t_{2}}{t_{2}}$$
*   **Rule H2:** $$\frac{t_{1}, \quad \neg t_{1}}{t_{2}}$$
---

## 3. 第一个语义模型 (Semantic Model)

为了证明系统 $\mathcal{L}$ 的可靠性与非平凡性，我们构造一个基于真值与复杂度阶层的代数结构 $\mathcal{M}$。

### 3.1 论域与指定值
定义论域 $\mathcal{D} = \{0, 1\} \times \mathbb{N}$。论域中的元素记为序对 $(v, n)$，其中 $v \in \{0, 1\}$ 代表真值，$n \in \mathbb{N}$ 代表项的语法复杂度阶数。
定义**指定值集合 (Designated Values)** 为：
$$ D^+ = \{ (1, n) \mid n \in \mathbb{N} \} $$
对于任意项 $t$，若其语义解释 $⟦ t ⟧ \in D^+$，则称 $t$ 在模型 $\mathcal{M}$ 中为真，记作 $\mathcal{M} \vDash t$。

### 3.2 解释函数
定义解释函数 $⟦ \cdot ⟧: \mathcal{T}_{\text{syn}} \to \mathcal{D}$ 如下：

1.  **原子项：** 对于任意 $a \in \mathcal{A}$，$⟦ a ⟧ = (0, 0)$。
2.  **否定：** 若 $⟦ t ⟧ = (v, n)$，则 $⟦ \neg t ⟧ = (1-v, n)$。
3.  **等价：** 
    $$ ⟦ t_1 \cong t_2 ⟧ = \begin{cases} (1, 0) & \text{若 } ⟦ t_1 ⟧ = ⟦ t_2 ⟧ \\ (0, 0) & \text{若 } ⟦ t_1 ⟧ \neq ⟦ t_2 ⟧ \end{cases} $$
4.  **预序：** 设 $⟦ t_1 ⟧ = (v_1, n_1)$ 且 $⟦ t_2 ⟧ = (v_2, n_2)$，则：
    $$ ⟦ t_1 \leq t_2 ⟧ = (1, \max(n_1, n_2) + 1) $$

---

## 4. 元理论性质分析 (Meta-theoretical Analysis)

### 4.1 可靠性定理 (Soundness Theorem)
**定理 1：** 若 $\vdash t$，则 $\mathcal{M} \vDash t$。
**证明：** 对证明过程的长度进行归纳法，只需验证所有公理在 $\mathcal{M}$ 中有效，且推理规则保持有效性。

*   **模块 A (等价性质):**
    *   **Refl:** $⟦ t_1 \cong t_1 ⟧$。因 $⟦ t_1 ⟧ = ⟦ t_1 ⟧$，故结果为 $(1, 0) \in D^+$。
    *   **Symm/Trans:** 由元语言中相等关系 $=$ 的对称性与传递性直接导出。
*   **模块 B, F (预序性质):**
    所有形式为 $t_i \leq t_j$ 的结论（包括 Id-Intro, Rule B1-B3, Rule F1），其解释 $⟦ t_i \leq t_j ⟧$ 的首分量根据定义恒为 $1$。故结论必属于 $D^+$。
*   **模块 C (构造同余):**
	*   **Rule C1:** 若 $⟦ t_1 \cong t_2 ⟧ \in D^+$ 且 $⟦ t_3 \cong t_4 ⟧ \in D^+$，则这意味着解释的完全相等：$⟦ t_1 ⟧ = ⟦ t_2 ⟧$ 且 $⟦ t_3 ⟧ = ⟦ t_4 ⟧$。
		因此，由解释函数的函数性质可知：
		$⟦ t_1 \leq t_3 ⟧ = (1, \max(n_1, n_3) + 1) = (1, \max(n_2, n_4) + 1) = ⟦ t_2 \leq t_4 ⟧$。
		因为左右两项的解释完全相同，故结论 $(t_1 \leq t_3) \cong (t_2 \leq t_4)$ 的解释为 $(1, 0) \in D^+$。
    *   **Rule C2:** 若 $⟦ t_1 ⟧ = ⟦ t_2 ⟧$，则 $(1-v_1, n_1) = (1-v_2, n_2)$，即 $⟦ \neg t_1 ⟧ = ⟦ \neg t_2 ⟧$。
        等价项的解释为 $(1, 0) \in D^+$。
*   **模块 D, E (提取与替换):**
    *   对于 **Rule D1** 及其变体，结论形式均为 $t_i \leq t_3$。根据解释函数定义 4，对于任意 $t_i, t_3$，其解释的首分量恒为 1，故 $⟦ t_i \leq t_3 ⟧ \in D^+$ 恒成立。
    *   **Rule E1:** 设 $⟦ t_1 \cong t_2 ⟧ = (1, 0)$ 且 $⟦ t_1 \leq t_3 ⟧ \in D^+$。由前者可知 $⟦ t_1 ⟧ = ⟦ t_2 ⟧$。结论 $⟦ t_2 \leq t_3 ⟧ = (1, \max(n_{t_2}, n_{t_3}) + 1)$，其首分量恒为 1，故属于 $D^+$。
    *   **Rule E2:** 若 $⟦ t_1 \cong t_2 ⟧ = (1, 0)$ 且 $⟦ \neg t_1 ⟧ = (1, n)$，则由 $⟦ t_1 ⟧ = ⟦ t_2 ⟧$ 导出 $⟦ \neg t_2 ⟧ = (1-v_1, n_1) = ⟦ \neg t_1 ⟧ \in D^+$。
    *   **Rule E3:** 设 $⟦ t_1 \cong t_2 ⟧ = (1, 0)$ 且 $⟦ t_3 \leq t_1 ⟧ \in D^+$。由前者可知 $⟦ t_1 ⟧ = ⟦ t_2 ⟧$。结论 $⟦ t_3 \leq t_2 ⟧ = (1, \max(n_{t_2}, n_{t_3}) + 1)$，其首分量恒为 1，故属于 $D^+$。
*   **模块 G (否定逻辑):**
	*   **Rule G1:** 结论为 $\neg t_2 \leq \neg t_1$。根据解释函数定义，其解释为 $(1, \max(n_{\neg t_2}, n_{\neg t_1}) + 1)$。由于首分量恒为 1，故结论恒属于 $D^+$，规则保持有效。
	*   **Rule G2:** 结论为 $t_1 \leq \neg \neg t_1$。同理，作为 $\leq$ 形式的项，其解释的首分量恒为 1，故解释恒属于 $D^+$。
	*   **Rule G3:** 考察 $⟦ t_1 \cong \neg t_1 ⟧$。由于 $⟦ t_1 ⟧ = (v, n)$ 且 $⟦ \neg t_1 ⟧ = (1-v, n)$，而 $v \in \{0,1\}$ 意味着 $v \neq 1-v$，故两者不相等。内部等价式的解释为 $(0, 0)$，取否定后得 $⟦ \neg (t_1 \cong \neg t_1) ⟧ = (1, 0) \in D^+$。
	*   **Rule G4:** 考察 $⟦ t_1 \cong (t_1 \leq t_2) ⟧$。左侧复杂度阶数为 $n_1$，右侧作为 $\leq$ 项，其复杂度阶数为 $\max(n_1, n_2) + 1$。显然 $n_1 < \max(n_1, n_2) + 1$，故两项解释不同。内部等价式解释为 $(0, 0)$，取否定后得 $(1, 0) \in D^+$。
*   **模块 H (破坏性规则):**
	*   **Rule H1:** 若 $⟦ t_1 ⟧ \in D^+$ 且 $⟦ t_1 \cong t_2 ⟧ \in D^+$，由 $D^+$ 的定义知 $⟦ t_1 \cong t_2 ⟧ = (1, 0)$，这蕴含 $⟦ t_1 ⟧ = ⟦ t_2 ⟧$（元语言相等）。因此 $⟦ t_2 ⟧ = ⟦ t_1 ⟧ \in D^+$。
	*   **Rule H2:** 假设前提同时成立，即 $⟦ t_1 ⟧ \in D^+$ 且 $⟦ \neg t_1 ⟧ \in D^+$。设 $⟦ t_1 ⟧ = (v, n)$，则要求 $v=1$（来自第一个前提）且 $1-v=1$（来自第二个前提），这在 $\{0, 1\}$ 中是不可能的。因此，在模型 $\mathcal{M}$ 中前提集不可满足（Vacuously Satisfied），该规则平凡地保持了“若前提为真则结论为真”的性质。


**证毕。**

### 4.2 非平凡性定理 (Non-triviality Theorem)
**定理 2：** 存在项 $t$，使得 $\nvdash t$。
**证明：**
1.  选取原子项 $a \in \mathcal{A}$。
2.  根据模型定义，$⟦ a ⟧ = (0, 0)$。
3.  因为 $(0, 0) \notin D^+$，所以 $\mathcal{M} \nvDash a$。
4.  根据定理 1（可靠性）的逆否命题，由 $\mathcal{M} \nvDash a$ 可导出 $\nvdash a$。
5.  同理，考虑项 $\neg (a \leq a)$：
    $⟦ a \leq a ⟧ = (1, 1)$。
    $⟦ \neg (a \leq a) ⟧ = (0, 1) \notin D^+$。
    故 $\nvdash \neg (a \leq a)$。
系统不产生全部项，因此是非平凡的。

**证毕。**

### 4.3 一致性定理 (Consistency Theorem)
**定理 3：** 系统 $\mathcal{L}$ 是一致的，即不存在项 $t$ 使得 $\vdash t$ 且 $\vdash \neg t$。
**证明：**
假设系统不一致，即存在 $t$ 使得 $\vdash t$ 且 $\vdash \neg t$。
根据 **Rule H2**（$\frac{t, \neg t}{t'}$），对于任意项 $x$（例如原子项 $a$），我们均可推导出 $\vdash x$。
这意味着 $\vdash a$。
然而，根据 **定理 2（非平凡性）**，我们已知 $\nvdash a$。
产生矛盾。因此假设不成立，系统 $\mathcal{L}$ 是一致的。


## 5. 原子不变量 (Atomic Invariants)

本节建立系统 $\mathcal{L}$ 的结构守恒性，证明原子项（$\mathcal{A}$）上的同余关系与序关系均退化为语法等同。此结论排除了在原子层面存在非平凡推理的可能性。

### 5.1 预备定义与辅助引理

**定义 5.0 (原子判断)**
对于任意项 $t \in \mathcal{T}_{\text{syn}}$，谓词 $\text{Atom}(t)$ 当且仅当 $t \in \mathcal{A}$ 时为真。

**引理 5.0 (原子项的非生成性)**
根据第4节的一致性结论，对于任意 $a \in \mathcal{A}$，$\nvdash a$。
由此推论，规则 H1 与 H2 不会以原子项作为结论出现在推导树的根部，除非该结论是前提中已有的假设。

---

### 5.2 同余关系的结构守恒性

#### 5.2.1 定义：正向原子支撑函数 (Positive Atomic Support)


**定义 5.1 (原子支撑映射)**
定义映射 $\Psi: \mathcal{T}_{\text{syn}} \to \mathcal{P}(\mathcal{A}) \cup \{ \bot \}$，其中 $\bot$ 表示“非原子结构标记”：
1. 若 $t \in \mathcal{A}$，则 $\Psi(t) = \{t\}$。
2. 若 $t \equiv (t_1 \cong t_2)$：
	   - 若 $\Psi(t_1) \neq \bot$ 且 $\Psi(t_2) \neq \bot$，则 $\Psi(t) = \Psi(t_1) \cup \Psi(t_2)$；
	   - 若 $t_1$ 或 $t_2$ 中存在一方为 $\bot$（如包含 $\neg$ 或 $\leq$），则 $\Psi(t) = \bot$。
	   - 特别地，根据 Rule G4，原子项 $a$ 永远不会与包含自己的 $\leq$ 项语法相等，这确保了映射的良定性。
3. 若 $t \equiv (t_1 \leq t_2)$ 或 $t \equiv \neg t_1$，则 $\Psi(t) = \bot$。

**引理 5.1.1 (类型隔离):** 若 $\vdash t_1 \cong t_2$，则 $\Psi(t_1) = \bot \iff \Psi(t_2) = \bot$。
**证明：** 对 $\vdash t_1 \cong t_2$ 的推导长度进行归纳。
1.  **基础情况 (Refl):** $t_1 \equiv t_2$，性质平凡成立。
2.  **构造规则 (Rule C1, C2):** 
    - Rule C1 结论为 $(t_1 \leq t_3) \cong (t_2 \leq t_4)$。根据定义 5.1，两侧均为 $\leq$ 项，其 $\Psi$ 值均为 $\bot$。
    - Rule C2 同理，两侧均为 $\neg$ 项，$\Psi$ 值为 $\bot$。
3.  **传递规则 (Symm, Trans):** 由逻辑等价关系的对称性与传递性保持。
4.  **替换规则 (Rule H1):** 
	1. 我们需要证明一个更强的元定理：**结构一致性性质**。
		**声明：** 若 $\vdash t_1 \cong t_2$，则 $t_1$ 与 $t_2$ 具有相同的**顶层构造算子类型**（Top-level Constructor Type）。
		**证明（对推导高度归纳）：**
		*   **基础情况 (Refl):** 左右等价，类型必相同。
		*   **构造规则 (C1, C2):** 结论左右两侧均为固定类型（C1 为 $\leq$，C2 为 $\neg$），性质保持。
		*   **破坏性规则 (H1):** 假设结论为 $t_2$，前提为 $\vdash t_1$ 与 $\vdash t_1 \cong t_2$。由归纳假设，$t_1$ 与 $t_2$ 类型一致。
		*   **特别注意 (H2):** 若前提 $t_1, \neg t_1$ 同时成立，虽然结论 $t_2$ 可为任意项，但此处讨论的是同余项的生成。在模型 $\mathcal{M}$ 的一致性约束下，H2 实际上在可证定理集中是‘空触发’的。
		由此，排除所有形如 $\text{Atom} \cong \text{Non-Atom}$ 或 $\leq \text{项} \cong \neg \text{项}$ 的可证同余式。
	2. 设结论 $t_1 \cong t_2$ 由前提 $\vdash u$ 与 $\vdash u \cong (t_1 \cong t_2)$ 导出。根据定理 1（可靠性），$⟦ u \cong (t_1 \cong t_2) ⟧ = (1, 0)$，即 $⟦ u ⟧ = ⟦ t_1 \cong t_2 ⟧$。由定义 3.2，同余式的解释阶数恒为 0。
	3. 若 $u$ 为原子项，由定理 2 知其不可证，矛盾；
	4. 若 $u$ 为 $\leq$ 项，根据定义 3.2，其语义阶数 $n \geq 1$，与 $⟦ t_1 \cong t_2 ⟧$ 的阶数 0 冲突。
	5. 若 $u$ 为 $\neg$ 项（即 $u \equiv \neg k$），虽然当 $k$ 为同余式时 $⟦ \neg k ⟧$ 的阶数可能为 0，但我们需要考察 $u \cong (t_1 \cong t_2)$ 的**句法推导来源**。观察系统 $\mathcal{L}$ 中所有引入 $\cong$ 的规则：
		*   **Refl:** 左侧与右侧结构完全相同。
		*   **Rule C1:** 左侧与右侧均为同余式结构 $(\dots \cong \dots)$。
		*   **Rule C2:** 左侧与右侧均为否定结构 $\neg(\dots) \cong \neg(\dots)$。
		*   **Rule H1 (作为前提):** 归纳假设保证了前提中的同余关系保持了顶层结构的一致性（同余式对同余式，否定对否定）。
		系统中不存在任何规则能够构造出“否定项 $\cong$ 同余项”的混合形式（即不存在形如 $\neg k \cong (x \cong y)$ 的可证等式）。因此，若 $u \cong (t_1 \cong t_2)$ 可证，则 $u$ 必须在句法上也是一个同余式结构。从而 $\Psi(u)$ 与 $\Psi(t_1 \cong t_2)$ 遵循相同的定义分支，引理得证。
	6. 因此 $u$ 必须亦为同余式。根据归纳假设，既然 $u$ 满足隔离性且 $t_1 \cong t_2$ 与其语义等同且结构类型一致，隔离性在替换下保持。
$\square$

---

#### 5.2.2 辅助引理

**引理 5.A (同余关系的原子支撑稳定性)**
若 $\vdash t_1 \cong t_2$，则 $\Psi(t_1) = \Psi(t_2)$。

**证明：**
我们采用模型论方法。构造一个**结构分辨模型 (Structural Discrimination Model)** $\mathcal{M}_{\Psi}$，证明系统 $\mathcal{L}$ 相对于原子支撑函数是可靠的。

**1. 模型构造**
*   **代数结构**：设 $\mathbb{S} = \mathcal{P}(\mathcal{A}) \cup \{ \bot \}$。定义 $\mathbb{S}$ 上的“严格并”运算 $\oplus$：
    $$ S_1 \oplus S_2 = \begin{cases} S_1 \cup S_2 & \text{若 } S_1 \neq \bot \text{ 且 } S_2 \neq \bot \\ \bot & \text{其他情况} \end{cases} $$
*   **论域**：$\mathcal{D}_{\Psi} = \{0, 1\} \times \mathbb{S}$。
*   **指定值**：$D^+_{\Psi} = \{ (1, S) \mid S \in \mathbb{S} \}$。即只要首分量（真值）为 1，无论支撑值为何，均视为真。
*   **解释函数** $V: \mathcal{T}_{\text{syn}} \to \mathcal{D}_{\Psi}$：
    1.  **原子项**：对于 $a \in \mathcal{A}$，$V(a) = (0, \{a\})$。
    2.  **否定项**：$V(\neg t) = (1 - \text{proj}_1(V(t)), \bot)$。
    3.  **预序项**：$V(t_1 \leq t_2) = (1, \bot)$。
    4.  **等价项**：设 $V(t_1) = (v_1, S_1)$，$V(t_2) = (v_2, S_2)$。
        $$ V(t_1 \cong t_2) = \begin{cases} (1, S_1) & \text{若 } V(t_1) = V(t_2) \\ (0, S_1 \oplus S_2) & \text{若 } V(t_1) \neq V(t_2) \end{cases} $$

**2. 桥接引理 (Bridge Lemma)**
**断言**：对于任意项 $t$，若 $V(t) = (v, S)$，则 $S = \Psi(t)$。
*证明*：对 $t$ 的结构进行归纳。
*   $t=a$: $S=\{a\}=\Psi(a)$。
*   $t=\neg t'$ 或 $t=t_1 \leq t_2$: 定义直接给出 $S=\bot=\Psi(t)$。
*   $t=t_1 \cong t_2$:
    *   若 $V(t_1)=V(t_2)$，则 $S=S_1$。此时由归纳假设 $\Psi(t_1)=\Psi(t_2)$，故 $\Psi(t) = \Psi(t_1) \cup \Psi(t_2) = \Psi(t_1) = S_1$。
    *   若 $V(t_1) \neq V(t_2)$，则 $S = S_1 \oplus S_2$。由归纳假设 $S_1=\Psi(t_1), S_2=\Psi(t_2)$。根据 $\Psi$ 的定义，此时 $\Psi(t)$ 正是 $\Psi(t_1) \cup \Psi(t_2)$（需注意 $\oplus$ 与 $\Psi$ 定义中对 $\bot$ 处理的一致性）。
    此断言确保了模型中的 $S$ 分量忠实地追踪了语法上的 $\Psi$ 值。

**3. 可靠性验证 (Soundness Check)**
我们需要验证所有推理规则在 $\mathcal{M}_{\Psi}$ 中保持有效性（即前提在 $D^+_{\Psi}$ 中蕴含结论在 $D^+_{\Psi}$ 中）。
*   **模块 A (Refl, Symm, Trans)**: 直接由解释中“$=$”的性质保证。
*   **模块 C (Rule C1, C2)**:
    *   Rule C1 结论为 $(t_1 \leq t_3) \cong (t_2 \leq t_4)$。左右均为 $\leq$ 项，解释均为 $(1, \bot)$，完全相等，故结论解释为 $(1, \bot) \in D^+_{\Psi}$。
    *   Rule C2 同理，否定项解释只依赖于子项解释，若子项解释相等，否定项解释亦相等。
*   **模块 B (预序与同余)**:
    *   所有结论形式为 $X \leq Y$ 的规则（Id-Intro, B1-B3, F1, D1, E1, E3, G1, G2），其解释恒为 $(1, \bot)$。由于 $(1, \bot) \in D^+_{\Psi}$，这些规则在模型中**恒真**。这是模型构造的关键：$\leq$ 的真值“吸收”了所有结构复杂性。
*   **模块 H (Rule H1)**: $\frac{t_1, \quad t_1 \cong t_2}{t_2}$
    假设 $V(t_1) \in D^+_{\Psi}$ 且 $V(t_1 \cong t_2) \in D^+_{\Psi}$。
    由 $V(t_1 \cong t_2) \in D^+_{\Psi}$ 及解释定义可知，必须满足条件 $V(t_1) = V(t_2)$。
    既然 $V(t_1) \in D^+_{\Psi}$ 且 $V(t_1) = V(t_2)$，显然 $V(t_2) \in D^+_{\Psi}$。

**4. 结论**
若 $\vdash t_1 \cong t_2$，根据可靠性，$\mathcal{M}_{\Psi} \vDash t_1 \cong t_2$，即 $V(t_1 \cong t_2) \in D^+_{\Psi}$。
根据 $V$ 对 $\cong$ 的定义，这意味着 $V(t_1) = V(t_2)$。
比较两个序对的第二分量：$\text{proj}_2(V(t_1)) = \text{proj}_2(V(t_2))$。
应用桥接引理，得出 $\Psi(t_1) = \Psi(t_2)$。 $\square$

---

**引理 5.B (序关系的原子保全性)**
若 $\vdash t_1 \leq t_2$，且 $\Psi(t_2) \neq \bot$，则满足：
1.  $\Psi(t_1) \neq \bot$
2.  $\Psi(t_1) \subseteq \Psi(t_2)$

**证明：**
对推导树的高度进行归纳。我们考察最后一步使用的推理规则：

1.  **平凡情况**：
    *   若规则结论为 $\neg t_a \leq \neg t_b$ (Rule G1) 或 $t \leq \neg \neg t$ (Rule G2)，由于右侧主算子为 $\neg$，$\Psi(\text{RHS}) = \bot$，前提条件不满足，蕴含式真空为真。
    *   **Rule C1** 的结论同理，左右均为 $\leq$ 项，$\Psi$ 值为 $\bot$，真空为真。

2.  **传递规则 (Rule F1)**: $\frac{t_1 \leq u, \quad u \leq t_2}{t_1 \leq t_2}$
    假设 $\Psi(t_2) \neq \bot$。由归纳假设（应用于第二个前提），$\Psi(u) \neq \bot$ 且 $\Psi(u) \subseteq \Psi(t_2)$。
    既然 $\Psi(u) \neq \bot$，可对第一个前提应用归纳假设：$\Psi(t_1) \neq \bot$ 且 $\Psi(t_1) \subseteq \Psi(u)$。
    由集合包含的传递性，$\Psi(t_1) \subseteq \Psi(t_2)$。

3.  **同余介入规则 (模块 B)**：
    *   **Rule B1**: $\frac{t_1 \leq u, \quad u \cong v}{t_1 \leq (u \cong v)}$
        目标 $t_2 = (u \cong v)$。若 $\Psi(t_2) \neq \bot$，则 $\Psi(u), \Psi(v) \neq \bot$。
        由前提 $u \cong v$ 及 **引理 5.A**，$\Psi(u) = \Psi(v)$。
        因此 $\Psi(t_2) = \Psi(u) \cup \Psi(v) = \Psi(u)$。
        对前提 $t_1 \leq u$ 应用归纳假设，得 $\Psi(t_1) \subseteq \Psi(u) = \Psi(t_2)$。
    *   **Rule B2**: $\frac{u \leq t_2, \quad u \cong v}{(u \cong v) \leq t_2}$
        假设 $\Psi(t_2) \neq \bot$。由归纳假设，$\Psi(u) \subseteq \Psi(t_2)$。
        由 $u \cong v$ 及引理 5.A，$\Psi(v) = \Psi(u)$。
        左侧支撑 $\Psi(u \cong v) = \Psi(u) \cup \Psi(v) = \Psi(u)$。
        故 $\Psi(u \cong v) \subseteq \Psi(t_2)$。
    *   **Rule B3**: $\frac{(u \cong v) \leq w, \quad v \cong z}{(v \cong z) \leq w}$
        假设 $\Psi(w) \neq \bot$。归纳假设得 $\Psi(u \cong v) \subseteq \Psi(w)$，这意味着 $\Psi(u) \cup \Psi(v) \subseteq \Psi(w)$。
        特别地，$\Psi(v) \subseteq \Psi(w)$。
        由引理 5.A，$v \cong z \implies \Psi(v) = \Psi(z)$。
        左侧支撑 $\Psi(v \cong z) = \Psi(v) \cup \Psi(z) = \Psi(v) \subseteq \Psi(w)$。

4.  **替换与提取规则**:
    *   **Rule D1**: $\frac{(t_1 \cong t_2) \leq t_3}{t_1 \leq t_3}$
        假设 $\Psi(t_3) \neq \bot$。归纳假设知 $\Psi(t_1 \cong t_2) \subseteq \Psi(t_3)$。
        即 $\Psi(t_1) \cup \Psi(t_2) \subseteq \Psi(t_3)$，这直接蕴含 $\Psi(t_1) \subseteq \Psi(t_3)$。
    *   **Rule E1**: $\frac{u \cong t_1, \quad u \leq t_2}{t_1 \leq t_2}$
        假设 $\Psi(t_2) \neq \bot$。归纳假设知 $\Psi(u) \subseteq \Psi(t_2)$。
        由 $u \cong t_1$ 及引理 5.A，$\Psi(u) = \Psi(t_1)$。
        故 $\Psi(t_1) \subseteq \Psi(t_2)$。
    *   **Rule E3**: $\frac{u \cong t_1, \quad t_{2} \leq u}{t_2 \leq t_1}$
        假设 $\Psi(t_2) \neq \bot$。归纳假设知 $\Psi(t_{2}) \subseteq \Psi(u)$。
        由 $u \cong t_1$ 及引理 5.A，$\Psi(u) = \Psi(t_1)$。
        故 $\Psi(t_2) \subseteq \Psi(t_1)$。

5.  **Rule H1 (作为前提)**:
    若结论 $t_1 \leq t_2$ 是通过 Rule H1 替换得来的，其推导逻辑可归结为上述 Rule E1 的变体或通过同余的传递性处理，已被引理 5.A 覆盖。

综上所述，所有规则均保持了原子支撑的包含关系。 $\square$

---

#### 5.2.3 原子序的退化性

**定理 5.2 (空假设集情形下的原子序的退化性)**
考虑假设集为空，若 $\vdash a \leq b$ 且 $a, b \in \mathcal{A}$，则 $a \equiv b$。

**证明：**
对证明高度 $h$ 进行归纳。
1. **基础情况 ($h=1$):** 唯一能产生原子间 $\leq$ 关系的公理是 **Id-Intro**。此时结论为 $a \leq a$，显然 $a \equiv a$。
2. **归纳步骤:** 检查所有可能产生 $t_1 \leq t_2$ 的推理规则：
	-   **Rule F1 (传递):** 前提为 $\vdash a \leq u$ 与 $\vdash u \leq b$。
		1.  考察第二个前提 $\vdash u \leq b$。由于 $b \in \mathcal{A}$，根据定义 5.1，$\Psi(b) = \{b\} \neq \bot$。
		2.  根据 **引理 B**，若右侧项的原子支撑非 $\bot$，则左侧项的原子支撑被包含于右侧。因此 $\Psi(u) \subseteq \Psi(b) = \{b\}$。
		3.  由 $\Psi(u) \subseteq \{b\}$ 可知，$\Psi(u)$ 是非空集合（包含于单元素集合且系统内不存在空集支撑定义）或 $\{b\}$ 本身，这就蕴含了 $\Psi(u) \neq \bot$。
		4.  既然确定了 $\Psi(u) \neq \bot$，我们可以对第一个前提 $\vdash a \leq u$ 再次合法应用 **引理 B**。得出 $\Psi(a) \subseteq \Psi(u)$。
		5.  联立上述包含关系：$\{a\} = \Psi(a) \subseteq \Psi(u) \subseteq \Psi(b) = \{b\}$。
		6.  由 $\{a\} \subseteq \{b\}$ 直接导出 $a \equiv b$。
	*   **Rule H1 (破坏性替换):**
	    假设结论 $\vdash a \leq b$ 是由前提 $\vdash u$ 与 $\vdash u \cong (a \leq b)$ 导出的。
	    1.  **结构分析：** 考察前提 $\vdash u \cong (a \leq b)$。在系统 $\mathcal{L}$ 中，能够生成同余式 $\cong$ 的规则（模块 A, C）具有严格的**结构隔离性**（Structural Isolation）。具体而言：
	        *   Rule C2 仅生成 $\neg(\dots) \cong \neg(\dots)$；
	        *   Rule C1 仅生成 $(\dots \leq \dots) \cong (\dots \leq \dots)$。
	        由于右侧 $(a \leq b)$ 是一个 $\leq$ 结构的项，根据同余关系的归纳定义，$u$ 必须具有 $u_1 \leq u_2$ 的句法形式，且满足 $\vdash u_1 \cong a$ 以及 $\vdash u_2 \cong b$。
	    2.  **应用引理 A：** 由 $\vdash u_1 \cong a$ 及 **引理 A (同余稳定性)**，可知 $\Psi(u_1) = \Psi(a) = \{a\}$。同理，$\Psi(u_2) = \Psi(b) = \{b\}$。
	    3.  **应用引理 B：** 回到前提 $\vdash u$，即 $\vdash u_1 \leq u_2$。我们已经确定 $\Psi(u_2) = \{b\} \neq \bot$。根据 **引理 B (序关系的原子保全性)**，必须满足 $\Psi(u_1) \subseteq \Psi(u_2)$。
	    4.  **导出结论：** 代入原子支撑集，得 $\{a\} \subseteq \{b\}$。这直接蕴含 $a \equiv b$。
	- **Rule G1/G2:** 结论必含有否定符 $\neg$，由于目标项 $b$ 是原子项（根据定义 5.1，$\Psi(b) \neq \bot$），而 $\Psi(\neg t) = \bot$，此类规则不可能产生原子间的序关系。
	- **Rule D1 (提取):** 若结论为 $a \leq b$，其前提必为 $(a \cong u) \leq b$。根据引理 B，$\Psi(a \cong u) \subseteq \Psi(b) = \{b\}$。由定义 5.1，这要求 $\Psi(a) \cup \Psi(u) \subseteq \{b\}$，即 $\{a\} \subseteq \{b\}$，导出 $a \equiv b$。
	- **Rule E1 (替换):** 若前提为 $u \cong a$ 且 $u \leq b$，由引理 5.1.1，$u$ 必为原子，且由引理 A 知 $u \equiv a$。前提 2 变为 $a \leq b$，由归纳假设得 $a \equiv b$。
	- **Rule E3 (替换):** 若前提为 $u \cong a$ 且 $b \leq u$，由引理 5.1.1，$u$ 必为原子，且由引理 A 知 $u \equiv a$。前提 2 变为 $b \leq a$，由归纳假设得 $a \equiv b$。
3. **其他规则:** **Rule B1-B3, G1, G2** 的结论至少有一侧包含复合构造符，与 $a, b \in \mathcal{A}$ 矛盾。

综上，原子间的序关系被锁定在语法等同关系上。 $\square$


