### **形式系统 H**

#### **1. 语法 (Syntax)**

**1.1. 字母表 (Alphabet)**
*   一个可数的**变量 (Variables)** 集合: $V = {x, y, z, ...}$
*   三个**二元算子 (Binary Operators)**: $O = {\to, \sim, ≠}$
*   两个**辅助符号 (Auxiliary Symbols)**: $($, $)$

**1.2. 合式表达式 (Well-Formed Expressions - WFE)**
合式表达式集合 $W$ 是满足以下条件的最小集合：
1.  **基础条款:** 如果 $v ∈ V$, 那么 $v ∈ W$.
2.  **归纳条款:** 如果 $φ ∈ W$ 且 $ψ ∈ W$, 并且 $* ∈ O$, 那么 $(φ * ψ) ∈ W$.

*约定：为便于阅读，最外层的括号可以省略。*

#### **2. 证明系统 (Proof System)**

**2.1. 推导 (Derivation)**
一个从前提集合 $Γ$ (一个WFE集合) 对 $φ$ (一个WFE) 的**推导**是一个有限的WFE序列 $⟨φ₁, φ₂, ..., φₙ⟩$，其中 $φₙ = φ$，并且对于序列中的每一个 $φᵢ$ ($1 ≤ i ≤ n$)，至少满足以下条件之一：
*   $φᵢ$ 是一个公理。
*   $φᵢ ∈ Γ$.
*   $φᵢ$ 是通过对序列中 $i$ 之前的某些表达式应用一条推理规则得到的结果。

如果存在这样一个推导，我们称 $φ$ 可由 $Γ$ **推导**，记作 $Γ ⊢ φ$。如果 $Γ$ 为空集，我们记作 $⊢ φ$，并称 $φ$ 是一个**定理**。

**2.2. 公理模式 (Axiom Schemas)**
对于任意合式表达式 $φ, ψ ∈ W$:
*   **(A1)** $⊢ φ ≠ (φ \to ψ)$
*   **(A2)** $⊢ φ ≠ (φ \sim ψ)$

**2.3. 推理规则 (Rules of Inference)**
对于任意合式表达式 $φ, ψ, χ, ω ∈ W$:
*   **(R1) 超图传递 (Hypergraph Transitivity):**
    $φ \to ψ,  φ \sim χ  ⊢  (φ \to ψ) \sim χ$

*   **(R2) 连接重定向 (Connection Redirection):**
    $φ \to (ψ \sim χ),  χ \sim ω  ⊢  φ \to (χ \sim ω)$

*   **(R3) 共属对称性 (Co-membership Symmetry):**
    $φ \sim ψ  ⊢  ψ \sim φ$

*   **(R4) 排斥性 (Exclusion):**
    $φ \to ψ,  φ \sim χ  ⊢  ψ ≠ χ$

*   **(R5) 不等对称性 (Inequality Symmetry):**
    $φ ≠ ψ  ⊢  ψ ≠ φ$

*   **(R6) 不等式的结构合同性 (Structural Congruence for Inequality):**
    *   **(R6a)** $φ ≠ ψ  ⊢  (α * φ) ≠ (α * ψ)$
    *   **(R6b)** $φ ≠ ψ  ⊢  (φ * α) ≠ (ψ * α)$

*   **(R7) 算子相异性 (Operator Distinction):**
    $⊢ (φ₁ \to φ₂) ≠ (ψ₁ \sim ψ₂)$

---

#### **3. 语义学：一个超重图模型 (Semantics: A Hyper-DiGraph Model)**

##### **3.1. 模型的定义**

我们为形式系统 **H** 定义一个模型 $M = <D, I>$，其中 $D$ 是论域 (Domain of Discourse)，$I$ 是解释函数 (Interpretation Function)。

**3.1.1. 论域 (Domain)**

论域 $D$ 是系统 **H** 的所有合式表达式 (WFE) 的集合 $W$。
$D := W$

**3.1.2. 解释函数 (Interpretation)**

解释函数 $I$ 将系统 **H** 中的三个二元算子映射为 $D × D$ 上的三个二元关系：
*   $I(\to) = \toᴹ ⊆ D × D$
*   $I(\sim) = \simᴹ ⊆ D × D$
*   $I(≠) = ≠ᴹ ⊆ D × D$

这些关系的具体定义如下。

**A. 不等关系 $≠ᴹ$**

$≠ᴹ$ 被解释为语法上的不恒等。
*   $(φ, ψ) ∈ ≠ᴹ$ 当且仅当 $φ$ 和 $ψ$ 不是同一个合式表达式（即，作为字符串它们不相同）。我们用 $φ ≢ ψ$ 表示 $φ$ 和 $ψ$ 语法不恒等。
由于变量集 $V$ 被等同于自然数集合 $ℕ$，其等价性是可判定的。合式表达式的等价性（结构相等）因此也是可判定的。

**B. 有向边关系 $\toᴹ$ 与共属关系 $\simᴹ$**

这两个关系的定义基于一个在变量集合 $V$ 上的基础结构，并通过一个闭包过程扩展到整个论域 $D$。

**步骤 1: 在变量集 $V$ 上定义基础结构 $S$**

为了支持模型中基于索引的构造，我们明确将变量集合 $V$ 与自然数集合 $ℕ$ 等同。
*   $V := ℕ$

因此，每个变量 $vᵢ$ 就是自然数 $i$。这种表示法确保了变量之间存在一个全序关系和可判定的等价性（即，对于任意变量 $vᵢ, vⱼ$，$vᵢ ≡ vⱼ$ 当且仅当 $i = j$）。

我们在这个具体化的变量集上定义一个基础结构 $S = (V, E, H)$，其中：
*   **顶点集:** $V$ (即 $ℕ$)
*   **有向边集 $E ⊆ V × V$:**
    $E := { (vᵢ, vᵢ₊₁) | i ∈ ℕ 且 i 为偶数 }$
*   **超边集 $H$ (一个 $V$ 的子集族):**
    $H := { {vᵢ, vᵢ₊₂} | i ∈ ℕ }$

**步骤 2: 构造真命题集合 $T$**

我们定义集合 $T ⊆ W$ 为满足以下条件的**最小集合**：

1.  **基础条款 (Basis):**
    *   对于任意变量 $u, v ∈ V$，如果 $(u, v) ∈ E$，则表达式 $(u \to v) ∈ T$。
	*   对于任意变量 $u, v \in V$，如果满足以下**超边谓词** $P_H(u, v)$，则表达式 $(u \sim v) \in T$。
	    谓词 $P_H(u, v)$ 定义为：
	    $$ \exists k \in \mathbb{N}, (u = v_k \land v = v_{k+2}) \lor (u = v_{k+2} \land v = v_k) $$


1.  **闭包条款 (Closure):**
    *   **(C1)** 如果 $(φ \to ψ) ∈ T$ 且 $(φ \sim χ) ∈ T$，则 $((φ \to ψ) \sim χ) ∈ T$。
    *   **(C2)** 如果 $(φ \to (ψ \sim χ)) ∈ T$ 且 $(χ \sim ω) ∈ T$，则 $(φ \to (χ \sim ω)) ∈ T$。
    *   **(C3)** 如果 $(φ \sim ψ) ∈ T$，则 $(ψ \sim φ) ∈ T$。

**步骤 3: 定义 $\toᴹ$ 和 $\simᴹ$**

利用集合 $T$，我们完成最后两个关系的定义：
*   $(φ, ψ) ∈ \toᴹ$ 当且仅当 $(φ \to ψ) ∈ T$。
*   $(φ, ψ) ∈ \simᴹ$ 当且仅当 $(φ \sim ψ) ∈ T$。

##### **3.2. 满足性 (Satisfaction)**

一个表达式 $φ * ψ$ (其中 $* ∈ {\to, \sim, ≠}$) 在模型 $M$ 中为真，记作 $M ⊨ φ * ψ$，其定义如下：
$M ⊨ φ * ψ$ 当且仅当 $(φ, ψ) ∈ *ᴹ$。

一个前提集合 $Γ$ 在模型 $M$ 中为真，记作 $M ⊨ Γ$，当且仅当对于所有 $γ ∈ Γ$，都有 $M ⊨ γ$。

##### **3.3. 可靠性证明 (Soundness Proof)**

我们需要证明系统 **H** 对于模型 $M$ 是可靠的。这意味着，如果 $Γ ⊢ φ$，则 $Γ ⊨ φ$ (即 $M ⊨ Γ$ 蕴含 $M ⊨ φ$)。这等价于证明所有公理在 $M$ 中都为真（有效），并且所有推理规则在 $M$ 中都保真。

**3.3.1. 公理验证**

在验证前，我们先引入一个关于合式表达式 (WFE) 结构的引理。

*   **引理 (WFE 的尺寸与非循环性):** 对于任何合式表达式 $φ$，$φ$ 不可能在语法上恒等于一个以 $φ$ 作为其直接或间接子表达式的表达式。

*   **证明:**
    1.  我们首先为每一个合式表达式 $φ ∈ W$ 定义一个**尺寸 (size)** 函数 $s(φ) : W \to ℕ$：
        *   如果 $v ∈ V$，则 $s(v) := 0$。
        *   如果 $φ$ 的形式为 $(φ₁ * φ₂)$，则 $s(φ) := 1 + max(s(φ₁), s(φ₂))$。

    2.  根据此定义，如果 $φ₁$ 是 $φ$ 的一个**直接子表达式** (immediate sub-expression)，那么 $s(φ₁) < s(φ)$。例如，对于表达式 $(α * β)$，$s(α) ≤ max(s(α), s(β)) < 1 + max(s(α), s(β)) = s((α * β))$。

    3.  通过对子表达式关系的传递闭包进行归纳，可以得出：如果 $φ'$ 是 $φ$ 的一个**真子表达式** (proper sub-expression)，则 $s(φ') < s(φ)$。

    4.  假设存在一个表达式 $ψ$，$φ$ 是 $ψ$ 的一个真子表达式，且 $φ ≡ ψ$。
    5.  如果 $φ ≡ ψ$，那么根据等价性定义，它们的尺寸必须相等，即 $s(φ) = s(ψ)$。
    6.  但由于 $φ$ 是 $ψ$ 的真子表达式，我们有 $s(φ) < s(ψ)$。
    7.  这导致了矛盾 $s(φ) < s(φ)$。因此，初始假设为假。
    8.  引理得证。

*   **公理 (A1): $⊢ φ ≠ (φ \to ψ)$**
	1.  我们需要证明 $M ⊨ φ ≠ (φ \to ψ)$，这等价于证明 $φ ≢ (φ \to ψ)$。
	2.  表达式 $φ$ 是表达式 $(φ \to ψ)$ 的一个真子表达式。
	3.  根据 WFE 的尺寸与非循环性引理，一个表达式不可能与其自身的真子表达式在语法上恒等。
	4.  因此，$φ ≢ (φ \to ψ)$ 成立。

*   **公理 (A2): $⊢ φ ≠ (φ \sim ψ)$**
	1.  我们需要证明 $M ⊨ φ ≠ (φ \sim ψ)$，这等价于证明 $φ ≢ (φ \sim ψ)$。
	2.  表达式 $φ$ 是表达式 $(φ \sim ψ)$ 的一个真子表达式。
	3.  根据 WFE 的尺寸与非循环性引理，$φ ≢ (φ \sim ψ)$ 成立。

**3.3.2. 推理规则验证**

*   **规则 (R1) $φ \to ψ, φ \sim χ ⊢ (φ \to ψ) \sim χ$**
    1.  假设前提在 $M$ 中为真：$M ⊨ φ \to ψ$ 且 $M ⊨ φ \sim χ$。
    2.  根据满足性定义，这意味着 $(φ, ψ) ∈ \toᴹ$ 且 $(φ, χ) ∈ \simᴹ$。
    3.  根据 $\toᴹ$ 和 $\simᴹ$ 的定义，这意味着 $(φ \to ψ) ∈ T$ 且 $(φ \sim χ) ∈ T$。
    4.  根据集合 $T$ 的闭包条款 (C1)，如果 $(φ \to ψ) ∈ T$ 且 $(φ \sim χ) ∈ T$，则 $((φ \to ψ) \sim χ) ∈ T$ 必须成立。
    5.  根据 $\simᴹ$ 的定义，$((φ \to ψ) \sim χ) ∈ T$ 意味着 $((φ \to ψ), χ) ∈ \simᴹ$。
    6.  根据满足性定义，这正是 $M ⊨ (φ \to ψ) \sim χ$。
    7.  因此，该规则在 $M$ 中保真。

*   **规则 (R2) $φ \to (ψ \sim χ), χ \sim ω ⊢ φ \to (χ \sim ω)$**
    1.  假设 $M ⊨ φ \to (ψ \sim χ)$ 且 $M ⊨ χ \sim ω$。
    2.  这意味着 $(φ, (ψ \sim χ)) ∈ \toᴹ$ 且 $(χ, ω) ∈ \simᴹ$。
    3.  这意味着 $(φ \to (ψ \sim χ)) ∈ T$ 且 $(χ \sim ω) ∈ T$。
    4.  根据集合 $T$ 的闭包条款 (C2)，则 $(φ \to (χ \sim ω)) ∈ T$ 必须成立。
    5.  根据 $\toᴹ$ 的定义，这意味着 $(φ, (χ \sim ω)) ∈ \toᴹ$。
    6.  这正是 $M ⊨ φ \to (χ \sim ω)$。
    7.  因此，该规则在 $M$ 中保真。

*   **规则 (R3) $φ \sim ψ ⊢ ψ \sim φ$**
    1.  假设 $M ⊨ φ \sim ψ$。
    2.  这意味着 $(φ, ψ) ∈ \simᴹ$，即 $(φ \sim ψ) ∈ T$。
    3.  根据集合 $T$ 的闭包条款 (C3)，则 $(ψ \sim φ) ∈ T$ 必须成立。
    4.  这意味着 $(ψ, φ) ∈ \simᴹ$。
    5.  这正是 $M ⊨ ψ \sim φ$。
    6.  因此，该规则在 $M$ 中保真。
*   **规则 (R4) $\phi \to \psi, \phi \sim \chi \vdash \psi \neq \chi$**

    我们需要证明：若 $( \phi \to \psi ) \in T$ 且 $( \phi \sim \chi ) \in T$，则 $\psi \not\equiv \chi$。
    为此，我们首先建立关于集合 $T$ 中表达式形状的**反演引理 (Inversion Lemmas)**。

    **引理 I1 ($T$ 中 $\to$-表达式的形状):**
    如果 $(\alpha \to \beta) \in T$，则必然满足以下两个条件：
    1.  $\alpha \in V$。
    2.  $\beta \in V$ 或者 $\exists \gamma, \delta, \beta = (\gamma \sim \delta)$。
    **证明：** 对 $(\alpha \to \beta) \in T$ 的推导进行归纳 (Induction on derivation of $T$)。
    *   **基础条款：** 若源于基础定义，则 $\alpha, \beta \in V$。结论成立。
    *   **归纳条款 (C1):** 产生的形式为 $((\dots) \sim \dots)$，主算子为 $\sim$。此情况对 $(\alpha \to \beta)$ 不适用 (Discriminate)。
    *   **归纳条款 (C2):** 产生的形式为 $(\phi \to (\chi \sim \omega))$。此时 $\alpha = \phi$，$\beta = (\chi \sim \omega)$。前提中有 $(\phi \to (\psi \sim \chi)) \in T$。根据归纳假设，$\phi \in V$。且 $\beta$ 显然是 $\sim$ 类型表达式。结论成立。
    *   **归纳条款 (C3):** 产生的形式为 $(\dots \sim \dots)$。此情况不适用。

    **引理 I2 ($T$ 中变量 $\sim$-表达式的形状):**
    如果 $(\alpha \sim \beta) \in T$ 且 $\alpha \in V$，则 $\beta \in V$ 或者 $\exists \gamma, \delta, \beta = (\gamma \to \delta)$。
    **证明：** 对 $(\alpha \sim \beta) \in T$ 的推导进行归纳。
    *   **基础条款：** $\alpha, \beta \in V$。结论成立（$\beta \in V$）。
    *   **归纳条款 (C1):** 产生的形式为 $((\phi \to \psi) \sim \chi)$。此时左侧是 $(\phi \to \psi)$。由于前提假设 $\alpha \in V$，而 $(\phi \to \psi) \notin V$，此情况由构造函数的结构不相交性排除 (Impossible case)。
    *   **归纳条款 (C2):** 产生 $\to$ 表达式，不适用。
    *   **归纳条款 (C3):** 产生的形式为 $(\beta \sim \alpha)$，源于前提 $(\alpha \sim \beta) \in T$。这里我们需要证明：若 $(\beta \sim \alpha) \in T$ 且 $\beta \in V$，则 $\alpha$ 是变量或 $\to$-表达式。
        这实际上是本引理的对称形式。我们可以通过定义一个更强的归纳不变量来同时证明两侧：
        *不变量 $P(\Phi)$*: 若 $\Phi = (\mu \sim \nu) \in T$，则 ($\mu \in V \implies \nu \in V \lor \nu$ 是 $\to$-式) 且 ($\nu \in V \implies \mu \in V \lor \mu$ 是 $\to$-式)。
        该不变量在基础条款、C1（前提满足，结论左侧非变量无需验证，右侧继承性质）和 C3（对称性直接保持）下均保持。

    **引理 I3 (索引奇偶性):**
    1.  若 $(v_i \to \psi) \in T$，则 $i$ 是偶数。
    2.  若 $(v_i \sim v_j) \in T$，则 $i$ 和 $j$ 奇偶性相同。
    **证明：** 联合归纳证明。
    *   对于 $\to$ 表达式，仅基础条款和 (C2) 生成。基础条款明确要求 $i$ 为偶数。(C2) 中左侧变量来自前提的左侧变量，由归纳假设保持偶数性。
    *   对于 $\sim$ 表达式，若两侧均为变量，必须源于基础条款（定义要求 $i, j$ 均为 $k$ 或 $k+2$，同奇偶）或 (C3) 的对称翻转（保持同奇偶）。注意 (C1) 生成的左侧不是变量，因此不适用于 $(v_i \sim v_j)$ 的情况。

    **主证明 (Main Proof of R4):**
    假设 $M \models \phi \to \psi$ 且 $M \models \phi \sim \chi$。
    这意味着 $(\phi \to \psi) \in T$ 且 $(\phi \sim \chi) \in T$。

    1.  根据 **引理 I1** 应用于 $(\phi \to \psi) \in T$，得出 $\phi \in V$。设 $\phi = v_i$。
    2.  同时根据 **引理 I3**，因 $(v_i \to \psi) \in T$，可知 $i$ 是偶数。
    3.  现在考察 $\psi$ 和 $\chi$ 的结构。我们利用 WFE 的可判定性进行构造性分类讨论 (Destruct on structure)：

        *   **情形 A: $\psi$ 和 $\chi$ 都是变量。**
            设 $\psi = v_j, \chi = v_k$。
            *   由 $(v_i \to v_j) \in T$：根据 **引理 I1**，$\psi$ 为变量意味着这必须来自基础条款（因为 (C2) 产生的右侧是 $\sim$-式）。根据基础条款定义，$(v_i, v_j) \in E$，故 $j = i+1$。因 $i$ 偶，则 $j$ 奇。
            *   由 $(v_i \sim v_k) \in T$：根据 **引理 I3**，因 $i$ 偶，则 $k$ 偶。
            *   结论：$j$ (奇) $\neq k$ (偶)，故 $v_j \not\equiv v_k$，即 $\psi \not\equiv \chi$。

        *   **情形 B: $\psi$ 是变量，$\chi$ 不是变量。**
            *   由 $\chi \notin V$ 和前提 $(v_i \sim \chi) \in T$（其中 $v_i \in V$），根据 **引理 I2**，$\chi$ 必须是一个 $\to$-表达式（主算子为 $\to$）。
            *   $\psi$ 是变量（主算子为 $V$）。
            *   因主算子不同 ($V \neq \to$)，$\psi \not\equiv \chi$。

        *   **情形 C: $\psi$ 不是变量，$\chi$ 是变量。**
            *   由 $\psi \notin V$ 和前提 $(v_i \to \psi) \in T$，根据 **引理 I1**，$\psi$ 必须是一个 $\sim$-表达式（主算子为 $\sim$）。
            *   $\chi$ 是变量。
            *   因主算子不同 ($\sim \neq V$)，$\psi \not\equiv \chi$。

        *   **情形 D: $\psi$ 和 $\chi$ 都不是变量。**
            *   由 $(v_i \to \psi) \in T$ 和 **引理 I1**，$\psi$ 是一个 $\sim$-表达式。
            *   由 $(v_i \sim \chi) \in T$ 和 **引理 I2**，$\chi$ 是一个 $\to$-表达式。
            *   因主算子不同 ($\sim \neq \to$)，$\psi \not\equiv \chi$。

    在所有情形下，均得出 $\psi \not\equiv \chi$，即 $M \models \psi \neq \chi$。证毕。



*   **规则 (R5) $φ ≠ ψ ⊢ ψ ≠ φ$**
    1.  假设 $M ⊨ φ ≠ ψ$。
    2.  这意味着 $(φ, ψ) ∈ ≠ᴹ$，即 $φ ≢ ψ$。
    3.  语法不恒等关系是对称的：如果 $φ ≢ ψ$，则 $ψ ≢ φ$。
    4.  这意味着 $(ψ, φ) ∈ ≠ᴹ$。
    5.  这正是 $M ⊨ ψ ≠ φ$。
    6.  因此，该规则在 $M$ 中保真。

*   **规则 (R6) 不等式的结构合同性**
    $φ ≠ ψ ⊢ (α * φ) ≠ (α * ψ)$ 及 $φ ≠ ψ ⊢ (φ * α) ≠ (ψ * α)$

    **验证 (R6a):**
    1.  **前提假设:** 假设前提在 $M$ 中为真：$M ⊨ φ ≠ ψ$。
    2.  **语义翻译:** 这意味着 $(φ, ψ) ∈ ≠ᴹ$，即 $φ ≢ ψ$。
    3.  **结论目标:** 我们需要证明 $M ⊨ (α * φ) ≠ (α * ψ)$，即 $(α * φ) ≢ (α * ψ)$。
	4.  **证明:** 为了证明 $(α * φ) ≢ (α * ψ)$，我们依据语法非恒等的定义，即证明其否命题 $(α * φ) ≡ (α * ψ)$ 会导出一个矛盾。
	5.  假设 $(α * φ) ≡ (α * ψ)$。
	6.  根据合式表达式 (WFE) 的归纳定义，两个复杂表达式在语法上恒等，当且仅当它们的主运算符相同，且对应的直接子表达式也分别在语法上恒等。
	7.  从 $(α * φ) ≡ (α * ψ)$，我们推断出：
	    *   主运算符 $*$ 相同。
	    *   第一个直接子表达式 $α$ 相同。
	    *   因此，第二个直接子表达式也必须恒等，即 $φ ≡ ψ$。
	8.  这个结论 $φ ≡ ψ$ 与我们的前提 $φ ≢ ψ$ 直接矛盾。
	9.  因此，初始假设 $(α * φ) ≡ (α * ψ)$ 为假。
	10. 我们得出结论 $(α * φ) ≢ (α * ψ)$，即 $M ⊨ (α * φ) ≠ (α * ψ)$。

    **验证 (R6b):**
    11.  **前提假设:** 假设 $M ⊨ φ ≠ ψ$，即 $φ ≢ ψ$。
    12.  **结论目标:** 我们需要证明 $M ⊨ (φ * α) ≠ (ψ * α)$，即 $(φ * α) ≢ (ψ * α)$。
    13.  **证明 (通过否定引入):** 假设 $(φ * α) ≡ (ψ * α)$。
    14.  根据 WFE 的定义，由于主运算符 $*$ 和第二个直接子表达式 $α$ 相同，第一个直接子表达式必须恒等，即 $φ ≡ ψ$。
    15.  这与前提 $φ ≢ ψ$ 矛盾。
    16.  因此，$(φ * α) ≢ (ψ * α)$ 成立。
    17.  因此，规则 (R6b) 在模型 $M$ 中保真。

*   **规则 (R7)**
    1.  该规则没有前提。我们需要证明其结论对于任意 $φ₁, φ₂, ψ₁, ψ₂ ∈ W$ 在模型 $M$ 中始终为真。
    2.  我们需要证明 $M ⊨ (φ₁ \to φ₂) ≠ (ψ₁ \sim ψ₂)$。
    3.  根据满足性定义，这等价于证明 $((φ₁ \to φ₂), (ψ₁ \sim ψ₂)) ∈ ≠ᴹ$。
    4.  根据 $≠ᴹ$ 的定义，这等价于证明 $(φ₁ \to φ₂)$ 和 $(ψ₁ \sim ψ₂)$ 在语法上不恒等，即 $(φ₁ \to φ₂) ≢ (ψ₁ \sim ψ₂)$。
    5.  根据合式表达式 (WFE) 的归纳定义，一个表达式由其最外层（主）运算符及其直接子表达式唯一确定。表达式 $(φ₁ \to φ₂)$ 的主运算符是 $\to$，而表达式 $(ψ₁ \sim ψ₂)$ 的主运算符是 $\sim$。
    6.  由于主运算符不同，这两个表达式在语法上永远不可能恒等。
    7.  因此，$(φ₁ \to φ₂) ≢ (ψ₁ \sim ψ₂)$ 成立，规则 (R7) 的结论在模型 $M$ 中是有效的。

所有公理均在模型 $M$ 中有效，所有推理规则均在模型 $M$ 中保真。因此，系统 **H** 对于模型 $M$ 是可靠的。



#### **4. 语义学：H-图模型 (Semantics: H-Graph Models)**

本节为形式系统 **H** 定义一个模型类，并证明系统 **H** 对于此类中的任何模型都是可靠的。

##### **4.1. 预备定义：类型化层级图 (Typed Hierarchical Graph)**

一个**类型化层级图 (THG)** 是一个六元组 $G = (O, τ, λ, src, tgt, con)$，其构成如下：

*   **1. 对象集 (Set of Objects) $O$:** 一个非空集合。
*   **2. 类型函数 (Type Function) $τ: O \to \{V, E, H\}$:** 为 $O$ 中每一个对象 $o$ 指派一个类型：顶点 (V)、有向边 (E) 或超边 (H)。我们将 $O$ 划分为三个不相交的子集：$O_V$, $O_E$, $O_H$。
*   **3. 层级函数 (Level Function) $λ: O \to ℕ$:** 为每一个对象 $o$ 指派一个自然数层级。
*   **4. 源/目标函数 (Source/Target Functions) $src: O_E \to O$, $tgt: O_E \to O$:** 为每个有向边对象指定其源对象和目标对象。
*   **5. 构成函数 (Constituent Function) $con: O_H \to P(O)$:** 为每个超边对象指定其构成对象的集合。

一个 THG 必须满足以下**良定性公理 (Well-formedness Axioms)**：
*   **(G1) 有向边层级约束:** $∀e ∈ O_E, (λ(e) > λ(src(e))) ∧ (λ(e) > λ(tgt(e)))$
*   **(G2) 超边层级约束:** $∀h ∈ O_H, ∀o' ∈ con(h), λ(h) > λ(o')$
*   **(G3) 基础层级约束:** $∀o ∈ O, (λ(o) = 0) ⇒ (τ(o) = V)$

##### **4.2. 模型类 C_H 的定义**

一个**H-模型 (H-Model)** $M$ 是由一个特定的类型化层级图 $G_M$ 唯一确定的。模型类 $C_H$ 是所有 H-模型的集合。一个模型 $M$ 属于 $C_H$ 当且仅当其对应的图 $G_M$ 满足以下所有条件：

**1. 论域 (Domain):**
图 $G_M$ 的对象集 $O$ 必须是系统 **H** 的合式表达式集合 $W$。
$O := W$

**2. 语义关系 (Semantic Relations):**
模型 $M$ 上的三个二元关系 $\toᴹ, \simᴹ, ≠ᴹ ⊆ W × W$ 由图 $G_M$ 的结构定义：
*   $(φ, ψ) ∈ ≠ᴹ$ 当且仅当 $φ$ 和 $ψ$ 不是同一个合式表达式（语法不恒等）。
*   $(φ, ψ) ∈ \toᴹ$ 当且仅当 $∃e ∈ O_E$ 使得 $src(e) = φ$ 且 $tgt(e) = ψ$。
*   $(φ, ψ) ∈ \simᴹ$ 当且仅当 $∃h ∈ O_H$ 使得 ${φ, ψ} ⊆ con(h)$。

**3. 结构公理 (Structural Axioms):**
图 $G_M$ 的结构必须与 $W$ 的语法结构严格对应：
*   **(S1) 类型公理:** 类型函数 $τ$ 必须满足：
    *   $∀v ∈ V$, $τ(v) = V$。
    *   $∀φ, ψ ∈ W$, $τ((φ \to ψ)) = E$。
    *   $∀φ, ψ ∈ W$, $τ((φ \sim ψ)) = H$。
    *   $∀φ, ψ ∈ W$, $τ((φ ≠ ψ)) = V$。
*   **(S2) 有向边结构公理:** $∀e ∈ O_E$, $e$ 必为 $(φ \to ψ)$ 形式，且 $src(e) = φ$, $tgt(e) = ψ$。
*   **(S3) 超边结构公理:** $∀h ∈ O_H$, $h$ 必为 $(φ \sim ψ)$ 或 $(ψ \sim φ)$ 形式，且 $con(h) = {φ, ψ}$。

**4. 约束公理 (Constraint Axioms):**
图 $G_M$ 必须满足以下约束条件，这些公理是对系统 **H** 推理规则的语义编码：
*   **(C1) 共属传递公理 (Hypergraph Transitivity Axiom):**
    对于任意有向边 $e ∈ O_E$ 和任意对象 $χ ∈ W$，若 $(src(e), χ) ∈ \simᴹ$，则 $(e, χ) ∈ \simᴹ$ 必须成立。

*   **(C2) 连接重定向公理 (Connection Redirection Axiom):**
    对于任意对象 $φ ∈ W$ 及任意两个超边 $h₁, h₂ ∈ O_H$，若 $(φ, h₁) ∈ \toᴹ$ 且 $con(h₁) ∩ con(h₂) ≠ ∅$，则 $(φ, h₂) ∈ \toᴹ$ 必须成立。

*   **(C3) 排斥公理 (Exclusion Axiom):**
    对于任意有向边 $e ∈ O_E$ 和任意对象 $χ ∈ W$，若 $(src(e), χ) ∈ \simᴹ$，则 $tgt(e) ≠ χ$ 必须成立。

##### **4.3. 满足性 (Satisfaction)**

*   一个表达式 $φ$ 在模型 $M ∈ C_H$ 中为**真**，记作 $M ⊨ φ$。
*   对于形如 $φ * ψ$ 的表达式，其满足性定义如下 ($* ∈ {\to, \sim, ≠}$):
    $M ⊨ φ * ψ$ 当且仅当 $(φ, ψ) ∈ *ᴹ$。
*   对于前提集合 $Γ$，$M ⊨ Γ$ 当且仅当 $∀γ ∈ Γ, M ⊨ γ$。
*   **语义蕴涵 (Semantic Consequence):** $Γ ⊨ φ$ 当且仅当对于所有 $M ∈ C_H$，若 $M ⊨ Γ$，则 $M ⊨ φ$。

##### **4.4. 可靠性定理 (Soundness Theorem)**

**定理：** 系统 **H** 是可靠的。即，如果 $Γ ⊢ φ$，则 $Γ ⊨ φ$。

**证明：**
我们通过对推导 $⟨φ₁, ..., φₙ⟩$ 的长度 $n$ 进行归纳来证明。我们需要证明，对于任意 $M ∈ C_H$，如果 $M ⊨ Γ$，那么对于推导中的每一个 $φᵢ$，$M ⊨ φᵢ$ 都成立。

**基础情况：** $φᵢ$ 是一个公理或 $φᵢ ∈ Γ$。
*   **情况 1: $φᵢ ∈ Γ$。** 根据假设 $M ⊨ Γ$，我们直接得到 $M ⊨ φᵢ$。
*   **情况 2: $φᵢ$ 是公理 (A1) $φ ≠ (φ \to ψ)$ 的一个实例。**
    1.  我们需要证明 $M ⊨ φ ≠ (φ \to ψ)$。
    2.  根据满足性定义，这等价于 $(φ, (φ \to ψ)) ∈ ≠ᴹ$。
    3.  根据 $≠ᴹ$ 的定义，这等价于 $φ$ 和 $(φ \to ψ)$ 在语法上不恒等。
    4.  根据合式表达式的定义，一个表达式永远不等于其自身的真子表达式构成的更复杂的表达式。此为真。
*   **情况 3: $φᵢ$ 是公理 (A2) $φ ≠ (φ \sim ψ)$ 的一个实例。** 证明同上，因语法不恒等而为真。

**归纳步骤：** 假设对于所有 $j < i$，$M ⊨ φⱼ$ 成立。我们证明 $M ⊨ φᵢ$，其中 $φᵢ$ 是通过对 $j₁, j₂, ... < i$ 的某些前提 $φⱼ₁, φⱼ₂, ...$ 应用一条推理规则得到的结果。

*   **规则 (R1) $φ \to ψ, φ \sim χ ⊢ (φ \to ψ) \sim χ$:**
    1.  **归纳假设:** $M ⊨ φ \to ψ$ 且 $M ⊨ φ \sim χ$。
    2.  **语义翻译:**
        *   $M ⊨ φ \to ψ$ 意味着 $(φ, ψ) ∈ \toᴹ$。根据 $\toᴹ$ 的定义，存在 $e ∈ O_E$ 使得 $src(e)=φ$ 且 $tgt(e)=ψ$。根据结构公理 (S2)，$e$ 必须是表达式 $(φ \to ψ)$。
        *   $M ⊨ φ \sim χ$ 意味着 $(φ, χ) ∈ \simᴹ$。
    3.  **应用约束公理:** 我们有 $e = (φ \to ψ)$ 且 $(src(e), χ) ∈ \simᴹ$。根据约束公理 (C1)，$(e, χ) ∈ \simᴹ$ 必须成立。
    4.  **结论翻译:** $((φ \to ψ), χ) ∈ \simᴹ$ 意味着 $M ⊨ (φ \to ψ) \sim χ$。规则保真。

*   **规则 (R2) $φ \to (ψ \sim χ), χ \sim ω ⊢ φ \to (χ \sim ω)$:**
    1.  **归纳假设:** $M ⊨ φ \to (ψ \sim χ)$ 且 $M ⊨ χ \sim ω$。
    2.  **语义翻译:**
        *   $M ⊨ φ \to (ψ \sim χ)$ 意味着 $(φ, (ψ \sim χ)) ∈ \toᴹ$。
        *   $M ⊨ χ \sim ω$ 意味着 $(χ, ω) ∈ \simᴹ$。根据 $\simᴹ$ 的定义，存在 $h₂ ∈ O_H$ 使得 ${χ, ω} ⊆ con(h₂)$。根据结构公理 (S3)，$h₂$ 必为 $(χ \sim ω)$ 或 $(ω \sim χ)$ 形式，且 $con(h₂)$ 就是 ${χ, ω}$。
        *   令 $h₁ = (ψ \sim χ)$。根据结构公理 (S1)，$τ(h₁)=H$。根据 (S3)，$con(h₁) = {ψ, χ}$。
    3.  **应用约束公理:** 我们有 $(φ, h₁) ∈ \toᴹ$ 且 $χ ∈ con(h₁) ∩ con(h₂)$，故交集非空。根据约束公理 (C2)，$(φ, h₂) ∈ \toᴹ$ 必须成立。
    4.  **结论翻译:** $(φ, h₂) ∈ \toᴹ$ 意味着 $M ⊨ φ \to h₂$，即 $M ⊨ φ \to (χ \sim ω)$。规则保真。

*   **规则 (R3) $φ \sim ψ ⊢ ψ \sim φ$:**
    1.  **归纳假设:** $M ⊨ φ \sim ψ$，即 $(φ, ψ) ∈ \simᴹ$。
    2.  根据 $\simᴹ$ 的定义，存在 $h ∈ O_H$ 使得 ${φ, ψ} ⊆ con(h)$。
    3.  这意味着 ${ψ, φ} ⊆ con(h)$ 也成立。
    4.  因此 $(ψ, φ) ∈ \simᴹ$，即 $M ⊨ ψ \sim φ$。规则保真。

*   **规则 (R4) $φ \to ψ, φ \sim χ ⊢ ψ ≠ χ$:**
    1.  **归纳假设:** $M ⊨ φ \to ψ$ 且 $M ⊨ φ \sim χ$。
    2.  **语义翻译:** 存在 $e = (φ \to ψ) ∈ O_E$ 使得 $src(e)=φ$ 且 $tgt(e)=ψ$。同时，$(φ, χ) ∈ \simᴹ$。
    3.  **应用约束公理:** 我们有 $src(e) = φ$ 和 $(φ, χ) ∈ \simᴹ$。根据约束公理 (C3)，$tgt(e) ≠ χ$ 必须成立。
    4.  **结论翻译:** 因为 $tgt(e) = ψ$，所以 $ψ ≠ χ$。这等价于 $(ψ, χ) ∈ ≠ᴹ$，即 $M ⊨ ψ ≠ χ$。规则保真。

*   **规则 (R5) $φ ≠ ψ ⊢ ψ ≠ φ$:**
    1.  **归纳假设:** $M ⊨ φ ≠ ψ$，即 $(φ, ψ) ∈ ≠ᴹ$。
    2.  $≠ᴹ$ 定义为语法不恒等，该关系是对称的。
    3.  因此 $(ψ, φ) ∈ ≠ᴹ$，即 $M ⊨ ψ ≠ φ$。规则保真。

*   **规则 (R6) $φ ≠ ψ ⊢ (α * φ) ≠ (α * ψ)$ 及 $φ ≠ ψ ⊢ (φ * α) ≠ (ψ * α)$:**

    **验证 (R6a):**
    1.  **归纳假设:** $M ⊨ φ ≠ ψ$。
    2.  **语义翻译:** 根据满足性定义，这意味着 $(φ, ψ) ∈ ≠ᴹ$。根据 H-模型中 $≠ᴹ$ 的定义，这等价于 $φ$ 和 $ψ$ 不是同一个合式表达式（语法不恒等），即 $φ ≢ ψ$。
    3.  **结论目标:** 我们需要证明 $M ⊨ (α * φ) ≠ (α * ψ)$，即 $((α * φ), (α * ψ)) ∈ ≠ᴹ$，也即 $(α * φ) ≢ (α * ψ)$。
    4.  **证明 (反证法):** 假设 $(α * φ) ≡ (α * ψ)$。
    5.  根据合式表达式的语法定义，两个由二元算子构成的表达式恒等，当且仅当它们的主运算符相同，且其左右子表达式分别恒等。
    6.  从 $(α * φ) ≡ (α * ψ)$ 可知，其左子表达式必须恒等 $α ≡ α$，其右子表达式也必须恒等 $φ ≡ ψ$。
    7.  结论 $φ ≡ ψ$ 与前提 $φ ≢ ψ$ 矛盾。
    8.  因此，假设为假，$(α * φ) ≢ (α * ψ)$ 必然成立。
    9.  规则 (R6a) 保真。

    **验证 (R6b):**
    10.  **归纳假设:** $M ⊨ φ ≠ ψ$，即 $φ ≢ ψ$。
    11.  **结论目标:** 证明 $M ⊨ (φ * α) ≠ (ψ * α)$，即 $(φ * α) ≢ (ψ * α)$。
    12.  **证明 (反证法):** 假设 $(φ * α) ≡ (ψ * α)$。
    13.  根据合式表达式的语法定义，$φ ≡ ψ$ 且 $α ≡ α$。
    14.  结论 $φ ≡ ψ$ 与前提 $φ ≢ ψ$ 矛盾。
    15.  因此，假设为假，$(φ * α) ≢ (ψ * α)$ 必然成立。
    16.  规则 (R6b) 保真。

*   **规则 (R7):**
    1.  $φᵢ$ 是由零个前提应用规则 (R7) 得到的结果，其形式为 $(φ₁ \to φ₂) ≠ (ψ₁ \sim ψ₂)$。
    2.  在这种情况下，我们无需依赖归纳假设，只需证明对于任意 $M ∈ C_H$，$M ⊨ (φ₁ \to φ₂) ≠ (ψ₁ \sim ψ₂)$ 恒成立。
    3.  根据满足性定义，这等价于证明 $((φ₁ \to φ₂), (ψ₁ \sim ψ₂)) ∈ ≠ᴹ$。
    4.  根据 H-模型中 $≠ᴹ$ 的定义，这等价于 $(φ₁ \to φ₂)$ 和 $(ψ₁ \sim ψ₂)$ 在语法上不恒等，即 $(φ₁ \to φ₂) ≢ (ψ₁ \sim ψ₂)$。
    5.  根据合式表达式的语法定义，$ (φ₁ \to φ₂)$ 的主运算符是 $\to$，而 $(ψ₁ \sim ψ₂)$ 的主运算符是 $\sim$。由于主运算符不同，这两个表达式在语法上永远不恒等。
    6.  因此，该结论在任何 H-模型中都为真。规则保真。


所有公理均有效，所有推理规则均保真。因此，可靠性定理得证。 Q.E.D.

##### **4.5. 初始模型 M 的成员资格证明**

本节证明在 3.1 节中构造的特定模型 $M$ 属于模型类 $C_H$。

**证明:**
我们需要为 $M$ 定义一个图 $G_M = (W, τ, λ, src, tgt, con)$ 并证明它满足 $C_H$ 的所有公理。

1.  **定义 $G_M$:**
    *   **对象集 $O$:** $O := W$。
    *   **层级函数 $λ$:** $λ(φ)$ 定义为 $φ$ 中二元算子的数量。
    *   **类型函数 $τ$:**
        *   $τ(v) = V$ 对于任意 $v ∈ V$。
        *   $τ((φ \to ψ)) = E$。
        *   $τ((φ \sim ψ)) = H$。
        *   $τ((φ ≠ ψ)) = V$。
    *   **源/目标/构成函数:**
        *   $src((φ \to ψ)) = φ$, $tgt((φ \to ψ)) = ψ$。
        *   $con((φ \sim ψ)) = {φ, ψ}$。

2.  **验证良定性公理 (G1-G3):**
    *   (G1) $λ((φ\toψ)) = λ(φ)+λ(ψ)+1$，显然大于 $λ(φ)$ 和 $λ(ψ)$。成立。
    *   (G2) $λ((φ\simψ)) = λ(φ)+λ(ψ)+1$，显然大于 $λ(φ)$ 和 $λ(ψ)$。成立。
    *   (G3) $λ(φ)=0$ 意味着 $φ$ 不包含算子，因此 $φ$ 必须是变量 $v ∈ V$。而 $τ(v)=V$。成立。

3.  **验证结构公理 (S1-S3):**
    这些公理通过我们对 $τ, src, tgt, con$ 的定义直接满足。

4.  **验证约束公理 (C1-C3):**
    在模型 $M$ 中，关系 $\toᴹ$ 和 $\simᴹ$ 由真命题集合 $T$ 定义。
    *   $(φ, ψ) ∈ \toᴹ$ 等价于 $(φ \to ψ) ∈ T$。
    *   $(φ, ψ) ∈ \simᴹ$ 等价于 $(φ \sim ψ) ∈ T$ 或 $(ψ \sim φ) ∈ T$。（由 $T$ 的闭包条款 C3，两者等价）。

    *   **验证 (C1):**
        *   **假设:** $e = (φ\toψ)$, $(src(e), χ) ∈ \simᴹ$。
        *   **翻译:** $(φ\toψ) ∈ T$ 且 $(φ, χ) ∈ \simᴹ$，即 $(φ\simχ) ∈ T$。
        *   **需证:** $(e, χ) ∈ \simᴹ$，即 $((φ\toψ), χ) ∈ \simᴹ$，即 $((φ\toψ)\simχ) ∈ T$。
        *   根据集合 $T$ 的闭包条款 (C1)，若 $(φ \to ψ) ∈ T$ 且 $(φ \sim χ) ∈ T$，则 $((φ \to ψ) \sim χ) ∈ T$。公理成立。

    *   **验证 (C2):**
        *   **假设:** $φ ∈ W$, $h₁=(ψ\simχ) ∈ O_H$, $h₂=(χ'\simω) ∈ O_H$，$(φ, h₁) ∈ \toᴹ$ 且 $con(h₁) ∩ con(h₂) ≠ ∅$。
        *   **翻译:** $(φ \to (ψ\simχ)) ∈ T$。$con(h₁)$ 是 ${ψ, χ}$，$con(h₂)$ 是 ${χ', ω}$。交集非空意味着 ${ψ, χ} ∩ {χ', ω} ≠ ∅$。规则 R2 的前提是 $χ \sim ω$，意味着 $χ$ 是共享成员，即 $χ=χ'$。所以我们有 $(χ\simω) ∈ T$。
        *   **需证:** $(φ, h₂) ∈ \toᴹ$，即 $(φ \to (χ\simω)) ∈ T$。
        *   根据集合 $T$ 的闭包条款 (C2)，若 $(φ \to (ψ \sim χ)) ∈ T$ 且 $(χ \sim ω) ∈ T$，则 $(φ \to (χ \sim ω)) ∈ T$。公理成立。

    *   **验证 (C3):**
        *   **假设:** $e = (φ\toψ)$, $(src(e), χ) ∈ \simᴹ$。
        *   **翻译:** $(φ\toψ) ∈ T$ 且 $(φ, χ) ∈ \simᴹ$，即 $(φ\simχ) ∈ T$。
        *   **需证:** $tgt(e) ≠ χ$，即 $ψ$ 和 $χ$ 语法不恒等。
        *   在第 3.3.2 节对规则 (R4) 的可靠性证明中，其步骤 3 至 8 通过对 $T$ 的结构进行归纳和分类讨论，已严格证明：若 $(φ \to ψ) ∈ T$ 且 $(φ \sim χ) ∈ T$，则 $ψ ≢ χ$。该证明直接适用于此。公理成立。

所有公理均得到满足。因此，模型 $M$ 是模型类 $C_H$ 的一个成员。Q.E.D.

---

#### **5. 语义学：抽象层级图模型 (Semantics: Abstract Hierarchical Graph Models)**

本节为形式系统 **H** 定义一个抽象的模型类 $C_H*$，并证明系统 **H** 对于此类中的任何模型都是可靠的。该模型类基于一个纯粹数学的图结构，并通过解释函数将句法与语义结构联系起来。

##### **5.1. 定义：抽象类型化层级图 (Abstract Typed Hierarchical Graph - THG)**

**定义 5.1.1 (抽象 THG):**
一个**抽象类型化层级图**是一个六元组 $G = (O, τ, λ, src, tgt, con)$，其中：
1.  **对象集 $O$:** 一个非空集合，称为论域。
2.  **类型函数 $τ: O \to {Vertex, Edge, Hyperedge}$:** 一个将 $O$ 中的每个对象映射到三种类型之一的函数。此函数将 $O$ 划分为三个不相交的子集：
    *   $O_V := {o ∈ O | τ(o) = Vertex}$
    *   $O_E := {o ∈ O | τ(o) = Edge}$
    *   $O_H := {o ∈ O | τ(o) = Hyperedge}$
3.  **层级函数 $λ: O \to ℕ$:** 一个将每个对象映射到一个自然数的函数。
4.  **源函数 $src: O_E \to O$** 与**目标函数 $tgt: O_E \to O$**。
5.  **构成函数 $con: O_H \to P(O)$:** 一个将每个 $Hyperedge$ 类型的对象映射到 $O$ 的一个子集的函数。

**定义 5.1.2 (抽象 THG 的良定性公理):**
一个抽象 THG 必须满足以下公理：
*   **(G1) 有向边层级约束:** $∀e ∈ O_E, (λ(e) > λ(src(e))) ∧ (λ(e) > λ(tgt(e)))$。
*   **(G2) 超边层级约束:** $∀h ∈ O_H, ∀o' ∈ con(h), λ(h) > λ(o')$。
*   **(G3) 基础层级约束:** $∀o ∈ O, (λ(o) = 0) ⇒ (τ(o) = Vertex)$。

##### **5.2. 模型类 C_H* 的定义**

**定义 5.2.1 (抽象 H-模型):**
一个**抽象 H-模型**是一个序对 $M = <G, I>$，其中 $G$ 是一个满足良定性公理的抽象 THG，而 $I$ 是一个解释函数。

**定义 5.2.2 (解释函数):**
解释函数 $I$ 是一个从合式表达式集合 $W$ 到论域 $O$ 的映射，$I: W \to O$。

**定义 5.2.3 (模型类 C_H*):**
模型类 $C_H*$ 是所有满足以下**解释结构公理**和**约束公理**的抽象 H-模型的集合。

**A. 解释结构公理 (Interpretation Structure Axioms):**
*   **(I1) 类型保持公理 (Type-Preserving Axiom):**
    *   **(I1a) 原子类型 (Atomic Type):** 对于任意原子变量 $v ∈ V$，$τ(I(v)) = Vertex$。
    *   **(I1b) 复合类型 (Compound Type):** 对于任意合式表达式 $φ, ψ ∈ W$：
        *   $τ(I((φ \to ψ))) = Edge$。
        *   $τ(I((φ \sim ψ))) = Hyperedge$。
    *   **(I1c) 不等表达式类型 (Inequality-Expression Type):** 对于任意合式表达式 $φ, ψ ∈ W$，$τ(I((φ ≠ ψ))) = Vertex$。
*   **(I2) 有向边结构公理 (Edge Structure Axiom):**
    *   $∀φ, ψ ∈ W$, $src(I((φ \to ψ))) = I(φ)$。
    *   $∀φ, ψ ∈ W$, $tgt(I((φ \to ψ))) = I(ψ)$。
*   **(I3) 超边结构公理 (Hyperedge Structure Axiom):**
    *   $∀φ, ψ ∈ W$, $con(I((φ \sim ψ))) = {I(φ), I(ψ)}$。
*   **(I4) 结构唯一性公理 (Structural Uniqueness Axiom):**
    对于任意二元算子 $* ∈ {\to, \sim, ≠}$ 以及任意合式表达式 $φ₁, ψ₁, φ₂, ψ₂ ∈ W$，如果 $I((φ₁ * ψ₁)) = I((φ₂ * ψ₂))$，那么必须有 $I(φ₁) = I(φ₂)$ 且 $I(ψ₁) = I(ψ₂)$。

**B. 约束公理 (Constraint Axioms on G):**
*   **(C1) 共属传递公理:**
    $∀e ∈ O_E, ∀o ∈ O, ((∃h ∈ O_H, {src(e), o} ⊆ con(h)) ⇒ (∃h' ∈ O_H, {e, o} ⊆ con(h')))$。
*   **(C2) 连接重定向公理:**
    $∀o ∈ O, ∀h₁, h₂ ∈ O_H, ((∃e ∈ O_E, src(e)=o ∧ tgt(e)=h₁) ∧ (con(h₁) ∩ con(h₂) ≠ ∅) ⇒ (∃e' ∈ O_E, src(e')=o ∧ tgt(e')=h₂))$。
*   **(C3) 排斥公理:**
    $∀e ∈ O_E, ∀o ∈ O, ((∃h ∈ O_H, {src(e), o} ⊆ con(h)) ⇒ (tgt(e) ≠ o))$。

##### **5.3. 满足性与语义蕴涵**

**定义 5.3.1 (语义关系):**
在一个模型 $M = <G, I>$ 中，定义 $O × O$ 上的三个二元关系 $\toᴹ, \simᴹ, ≠ᴹ$：
1.  $(o₁, o₂) ∈ \toᴹ$ 当且仅当 $∃e ∈ O_E$ 使得 $src(e) = o₁$ 且 $tgt(e) = o₂$。
2.  $(o₁, o₂) ∈ \simᴹ$ 当且仅当 $∃h ∈ O_H$ 使得 ${o₁, o₂} ⊆ con(h)$。
3.  $(o₁, o₂) ∈ ≠ᴹ$ 当且仅当 $o₁$ 和 $o₂$ 是 $O$ 中不同的对象。

**定义 5.3.2 (满足性):**
*   $M ⊨ φ \to ψ$ 当且仅当 $(I(φ), I(ψ)) ∈ \toᴹ$。
*   $M ⊨ φ \sim ψ$ 当且仅当 $(I(φ), I(ψ)) ∈ \simᴹ$。
*   $M ⊨ φ ≠ ψ$ 当且仅当 $(I(φ), I(ψ)) ∈ ≠ᴹ$。
*   对于前提集合 $Γ$, $M ⊨ Γ$ 当且仅当 $∀γ ∈ Γ, M ⊨ γ$。

**定义 5.3.3 (语义蕴涵):**
$Γ ⊨ φ$ 当且仅当对于所有 $M ∈ C_H*$，若 $M ⊨ Γ$，则 $M ⊨ φ$。

##### **5.4. 可靠性定理**

**定理 5.4.1 (可靠性):** 系统 **H** 是可靠的。即，如果 $Γ ⊢ φ$，则 $Γ ⊨ φ$。

**证明:**
证明通过对从 $Γ$ 到 $φ$ 的推导 $⟨φ₁, ..., φₙ⟩$ 的长度 $n$ 进行归纳。
**归纳假设 (IH):** 对于任意模型 $M = <G, I> ∈ C_H*$，若 $M ⊨ Γ$，则对于所有 $k < i$，$M ⊨ φₖ$ 成立。
我们需要证明，在归纳假设下，$M ⊨ φᵢ$ 成立。

**基础情况 (i=1):** $φ₁$ 必须是 $Γ$ 的成员或是一个公理。

*   **情况 1: $φ₁ ∈ Γ$。**
    根据 $M ⊨ Γ$ 的定义，$M ⊨ φ₁$ 直接成立。

*   **情况 2: $φ₁$ 是公理 (A1) 的一个实例 $φ ≠ (φ \to ψ)$。**
    1.  我们需要证明 $M ⊨ φ ≠ (φ \to ψ)$。
    2.  根据定义 5.3.2，这等价于证明 $(I(φ), I((φ \to ψ))) ∈ ≠ᴹ$。
    3.  根据定义 5.3.1，这等价于证明 $I(φ)$ 和 $I((φ \to ψ))$ 是论域 $O$ 中不同的对象，即 $I(φ) ≠ I((φ \to ψ))$。
    4.  令 $e = I((φ \to ψ))$。根据**解释结构公理 (I1b)**，$τ(e) = Edge$。
    5.  根据**解释结构公理 (I2)**，$src(e) = I(φ)$。
    6.  根据抽象 THG 的**良定性公理 (G1) (有向边层级约束)**，对于所有 $e ∈ O_E$，必须满足 $λ(e) > λ(src(e))$。
    7.  将步骤 4 和 5 的结果代入步骤 6，我们得到 $λ(I((φ \to ψ))) > λ(I(φ))$。
    8.  由于两个对象的层级函数 $λ$ 的值不同，它们必然是 $O$ 中不同的对象。
    9.  因此 $I(φ) ≠ I((φ \to ψ))$ 成立。
    10. 结论：$M ⊨ φ ≠ (φ \to ψ)$ 成立。

*   **情况 3: $φ₁$ 是公理 (A2) 的一个实例 $φ ≠ (φ \sim ψ)$。**
    1.  我们需要证明 $M ⊨ φ ≠ (φ \sim ψ)$。
    2.  根据定义 5.3.2 和 5.3.1，这等价于证明 $I(φ) ≠ I((φ \sim ψ))$。
    3.  令 $h = I((φ \sim ψ))$。根据**解释结构公理 (I1b)**，$τ(h) = Hyperedge$。
    4.  根据**解释结构公理 (I3)**，$con(h) = {I(φ), I(ψ)}$。这意味着 $I(φ)$ 是 $h$ 的一个构成对象，即 $I(φ) ∈ con(h)$。
    5.  根据抽象 THG 的**良定性公理 (G2) (超边层级约束)**，对于所有 $h ∈ O_H$ 和所有 $o' ∈ con(h)$，必须满足 $λ(h) > λ(o')$。
    6.  将步骤 3 和 4 的结果代入步骤 5，我们得到 $λ(I((φ \sim ψ))) > λ(I(φ))$。
    7.  由于两个对象的层级函数 $λ$ 的值不同，它们必然是 $O$ 中不同的对象。
    8.  因此 $I(φ) ≠ I((φ \sim ψ))$ 成立。
    9.  结论：$M ⊨ φ ≠ (φ \sim ψ)$ 成立。

**归纳步骤 (i > 1):** 假设 $φᵢ$ 是通过对 $j < i$ 的某些前提应用一条推理规则得到的结果。
*   **规则 (R1) $φ \to ψ, φ \sim χ ⊢ (φ \to ψ) \sim χ$:**
    1.  前提为 $φⱼ = φ \to ψ$ 和 $φₖ = φ \sim χ$，其中 $j, k < i$。结论为 $φᵢ = (φ \to ψ) \sim χ$。
    2.  根据归纳假设 (IH)，$M ⊨ φ \to ψ$ 且 $M ⊨ φ \sim χ$。
    3.  由满足性定义：$(I(φ), I(ψ)) ∈ \toᴹ$ 且 $(I(φ), I(χ)) ∈ \simᴹ$。
    4.  令 $e = I((φ \to ψ))$。根据 (I1, I2)，$τ(e) = Edge$ 且 $src(e) = I(φ)$。
    5.  从 $(I(φ), I(χ)) ∈ \simᴹ$ 和 $src(e) = I(φ)$，我们得到 $(src(e), I(χ)) ∈ \simᴹ$。
    6.  根据语义关系定义，$∃h ∈ O_H$ 使得 ${src(e), I(χ)} ⊆ con(h)$。
    7.  根据模型类的约束公理 (C1)，必须 $∃h' ∈ O_H$ 使得 ${e, I(χ)} ⊆ con(h')$。
    8.  这直接蕴含 $(e, I(χ)) ∈ \simᴹ$。
    9.  将 $e$ 替换回 $I((φ \to ψ))$，得到 $(I((φ \to ψ)), I(χ)) ∈ \simᴹ$。
    10. 根据满足性定义，$M ⊨ (φ \to ψ) \sim χ$。

*   **规则 (R2) $φ \to (ψ \sim χ), χ \sim ω ⊢ φ \to (χ \sim ω)$:**
    1.  前提为 $φⱼ = φ \to (ψ \sim χ)$ 和 $φₖ = χ \sim ω$。结论为 $φᵢ = φ \to (χ \sim ω)$。
    2.  根据 (IH)，$M ⊨ φ \to (ψ \sim χ)$ 且 $M ⊨ χ \sim ω$。
    3.  由满足性定义：$(I(φ), I(ψ \sim χ)) ∈ \toᴹ$ 且 $(I(χ), I(ω)) ∈ \simᴹ$。
    4.  令 $h₁ = I(ψ \sim χ)$ 和 $h₂ = I(χ \sim ω)$。根据 (I1)，$h₁, h₂ ∈ O_H$。
    5.  根据 (I3)，$con(h₁) = {I(ψ), I(χ)}$ 且 $con(h₂) = {I(χ), I(ω)}$。
    6.  $con(h₁) ∩ con(h₂) = {I(χ)}$，因此交集非空。
    7.  从 $(I(φ), I(ψ \sim χ)) ∈ \toᴹ$ 即 $(I(φ), h₁) ∈ \toᴹ$，根据语义关系定义，$∃e ∈ O_E$ 使得 $src(e) = I(φ)$ 且 $tgt(e) = h₁$。
    8.  我们有 $src(e)=I(φ)$, $tgt(e)=h₁$, $h₁, h₂ ∈ O_H$, 且 $con(h₁) ∩ con(h₂) ≠ ∅$。
    9.  根据模型类的约束公理 (C2)，必须 $∃e' ∈ O_E$ 使得 $src(e')=I(φ)$ 且 $tgt(e')=h₂$。
    10. 这直接蕴含 $(I(φ), h₂) ∈ \toᴹ$。
    11. 将 $h₂$ 替换回 $I(χ \sim ω)$，得到 $(I(φ), I(χ \sim ω)) ∈ \toᴹ$。
    12. 根据满足性定义，$M ⊨ φ \to (χ \sim ω)$。

*   **规则 (R3) $φ \sim ψ ⊢ ψ \sim φ$:**
    1.  前提为 $φⱼ = φ \sim ψ$。结论为 $φᵢ = ψ \sim φ$。
    2.  根据 (IH)，$M ⊨ φ \sim ψ$，即 $(I(φ), I(ψ)) ∈ \simᴹ$。
    3.  根据语义关系定义，$∃h ∈ O_H$ 使得 ${I(φ), I(ψ)} ⊆ con(h)$。
    4.  根据集合论，${I(φ), I(ψ)} = {I(ψ), I(φ)}$。
    5.  因此 $∃h ∈ O_H$ 使得 ${I(ψ), I(φ)} ⊆ con(h)$。
    6.  这蕴含 $(I(ψ), I(φ)) ∈ \simᴹ$。
    7.  根据满足性定义，$M ⊨ ψ \sim φ$。

*   **规则 (R4) $φ \to ψ, φ \sim χ ⊢ ψ ≠ χ$:**
    1.  前提为 $φⱼ = φ \to ψ$ 和 $φₖ = φ \sim χ$。结论为 $φᵢ = ψ ≠ χ$。
    2.  根据 (IH)，$M ⊨ φ \to ψ$ 且 $M ⊨ φ \sim χ$。
    3.  由满足性定义：$(I(φ), I(ψ)) ∈ \toᴹ$ 且 $(I(φ), I(χ)) ∈ \simᴹ$。
    4.  从 $(I(φ), I(ψ)) ∈ \toᴹ$，可知 $∃e ∈ O_E$ 使得 $src(e) = I(φ)$ 且 $tgt(e) = I(ψ)$。
    5.  从 $(I(φ), I(χ)) ∈ \simᴹ$，可知 $∃h ∈ O_H$ 使得 ${I(φ), I(χ)} ⊆ con(h)$。
    6.  我们有 $e ∈ O_E$, $I(χ) ∈ O$，且 $∃h ∈ O_H$ 使得 ${src(e), I(χ)} ⊆ con(h)$。
    7.  根据模型类的约束公理 (C3)，必须有 $tgt(e) ≠ I(χ)$。
    8.  将 $tgt(e)$ 替换为 $I(ψ)$，得到 $I(ψ) ≠ I(χ)$。
    9.  这等价于 $(I(ψ), I(χ)) ∈ ≠ᴹ$。
    10. 根据满足性定义，$M ⊨ ψ ≠ χ$。

*   **规则 (R5) $φ ≠ ψ ⊢ ψ ≠ φ$:**
    1.  前提为 $φⱼ = φ ≠ ψ$。结论为 $φᵢ = ψ ≠ φ$。
    2.  根据 (IH)，$M ⊨ φ ≠ ψ$，即 $(I(φ), I(ψ)) ∈ ≠ᴹ$。
    3.  根据语义关系定义，$I(φ)$ 和 $I(ψ)$ 是 $O$ 中不同的对象。
    4.  对象间的相异关系是对称的，因此 $I(ψ)$ 和 $I(φ)$ 也是不同的对象。
    5.  这蕴含 $(I(ψ), I(φ)) ∈ ≠ᴹ$。
    6.  根据满足性定义，$M ⊨ ψ ≠ φ$。

*   **规则 (R6) $φ ≠ ψ ⊢ (α * φ) ≠ (α * ψ)$ 及 $φ ≠ ψ ⊢ (φ * α) ≠ (ψ * α)$:**

    **验证 (R6a):**
    1.  **前提:** $φⱼ = φ ≠ ψ$，其中 $j < i$。结论为 $φᵢ = (α * φ) ≠ (α * ψ)$。
    2.  **归纳假设 (IH):** $M ⊨ φ ≠ ψ$。
    3.  **语义翻译:** 根据满足性定义 (5.3.2)，$M ⊨ φ ≠ ψ$ 蕴含 $(I(φ), I(ψ)) ∈ ≠ᴹ$。根据语义关系 $≠ᴹ$ 的定义 (5.3.1)，这表示 $I(φ)$ 和 $I(ψ)$ 是论域 $O$ 中两个不同的对象，即 $I(φ) ≠ I(ψ)$。
    4.  **结论目标:** 我们需要证明 $M ⊨ (α * φ) ≠ (α * ψ)$，这等价于证明 $I((α * φ)) ≠ I((α * ψ))$。
    5.  **证明 (反证法):** 假设结论不成立，即 $I((α * φ)) = I((α * ψ))$。
    6.  我们应用模型类的**解释结构公理 (I4) (结构唯一性公理)**。令 $φ₁=α$, $ψ₁=φ$, $φ₂=α$, $ψ₂=ψ$。
    7.  根据公理 (I4)，从 $I((α * φ)) = I((α * ψ))$ 可以推导出 $I(α) = I(α)$ (此为平凡真) 且 $I(φ) = I(ψ)$。
    8.  结论 $I(φ) = I(ψ)$ 与我们从前提得到的 $I(φ) ≠ I(ψ)$ 直接矛盾。
    9.  因此，初始假设 $I((α * φ)) = I((α * ψ))$ 必为假。
    10. 所以 $I((α * φ)) ≠ I((α * ψ))$ 成立，即 $M ⊨ (α * φ) ≠ (α * ψ)$。规则 (R6a) 保真。

    **验证 (R6b):**
    1.  **前提:** $φⱼ = φ ≠ ψ$，其中 $j < i$。结论为 $φᵢ = (φ * α) ≠ (ψ * α)$。
    2.  **归纳假设 (IH):** $M ⊨ φ ≠ ψ$，即 $I(φ) ≠ I(ψ)$。
    3.  **结论目标:** 证明 $M ⊨ (φ * α) ≠ (ψ * α)$，即 $I((φ * α)) ≠ I((ψ * α))$。
    4.  **证明 (反证法):** 假设 $I((φ * α)) = I((ψ * α))$。
    5.  我们应用模型类的**解释结构公理 (I4)**。令 $φ₁=φ$, $ψ₁=α$, $φ₂=ψ$, $ψ₂=α$。
    6.  根据公理 (I4)，从 $I((φ * α)) = I((ψ * α))$ 可以推导出 $I(φ) = I(ψ)$ 且 $I(α) = I(α)$。
    7.  结论 $I(φ) = I(ψ)$ 与前提 $I(φ) ≠ I(ψ)$ 矛盾。
    8.  因此，初始假设必为假。
    9.  所以 $I((φ * α)) ≠ I((ψ * α))$ 成立，即 $M ⊨ (φ * α) ≠ (ψ * α)$。规则 (R6b) 保真。

*   **规则 (R7):**
    1.  $φᵢ$ 是通过对零个前提应用规则 (R7) 得到的结果，其形式为 $(φ₁ \to φ₂) ≠ (ψ₁ \sim ψ₂)$。
    2.  我们必须证明，对于任意 $M = <G, I> ∈ C_H*$，$M ⊨ (φ₁ \to φ₂) ≠ (ψ₁ \sim ψ₂)$ 恒成立。
    3.  根据满足性定义 (5.3.2)，这等价于证明 $(I((φ₁ \to φ₂)), I((ψ₁ \sim ψ₂))) ∈ ≠ᴹ$。
    4.  根据语义关系 $≠ᴹ$ 的定义 (5.3.1)，这等价于证明 $I((φ₁ \to φ₂))$ 和 $I((ψ₁ \sim ψ₂))$ 是论域 $O$ 中两个不同的对象，即 $I((φ₁ \to φ₂)) ≠ I((ψ₁ \sim ψ₂))$。
    5.  令 $o₁ = I((φ₁ \to φ₂))$，令 $o₂ = I((ψ₁ \sim ψ₂))$。
    6.  根据模型类的**解释结构公理 (I1b)**，$τ(I((φ₁ \to φ₂))) = Edge$。因此，$τ(o₁) = Edge$，这意味着 $o₁ ∈ O_E$。
    7.  同样根据公理 (I1b)，$τ(I((ψ₁ \sim ψ₂))) = Hyperedge$。因此，$τ(o₂) = Hyperedge$，这意味着 $o₂ ∈ O_H$。
    8.  根据类型函数 $τ$ 的定义 (5.1.1)，对象集 $O$ 被划分为三个不相交的子集 $O_V$, $O_E$, $O_H$。
    9.  因为 $o₁ ∈ O_E$ 且 $o₂ ∈ O_H$，并且 $O_E ∩ O_H = ∅$，所以 $o₁$ 和 $o₂$ 必然是不同的对象。
    10. 因此，$I((φ₁ \to φ₂)) ≠ I((ψ₁ \sim ψ₂))$ 成立。规则 (R7) 保真。

由于所有基础情况均成立，且所有推理规则在归纳假设下均保真，通过数学归纳法，对于推导中的任意 $φᵢ$，$M ⊨ φᵢ$ 均成立。特别地，对于推导的最后一步 $φₙ = φ$，$M ⊨ φ$ 成立。

因此，如果 $Γ ⊢ φ$，则 $Γ ⊨ φ$。 Q.E.D.
