# 依赖形式系统 ($\mathcal{G}^*$)

## 1. 句法全集的归纳构造 (Syntactic Universe)

为了处理项（Term）与公式（Form）之间的相互依赖，我们定义序数索引的集合序列 $\langle U_\alpha \rangle_{\alpha \in \text{Ord}}$。

**基本符号集**：
*   $V$：可数无穷变元集。
*   $\text{Func}$：函数符号集，带元数 $\text{ar}$。
*   $\text{Pred}$：谓词符号集，带元数 $\text{ar}$。
*   $\mathfrak{D}$：专用依赖算子符号。

**归纳定义**：

1.  **基底 ($U_0$)**：
    $$ U_0 = V \cup \{ f(t_1,\dots,t_n) \mid f \in \text{Func}, t_i \in V \} \cup \{ P(t_1,\dots,t_m) \mid P \in \text{Pred}, t_i \in V \} $$

2.  **后继步 ($U_{\alpha} \to U_{\alpha+1}$)**：
    令 $\text{Term}_\alpha = U_\alpha \cap \text{Terms}$，$\text{Stat}_\alpha = U_\alpha \cap \text{Stats}$。
    构造 $U_{\alpha+1}$ 如下：
    
    *   **公式集 ($\text{Form}_{\alpha}$)**：
        $$ \text{Form}_{\alpha} = \{ (\Gamma, s) \mid \Gamma \in \text{Fin}(\text{Stat}_\alpha), s \in \text{Stat}_\alpha \} $$
    
    *   **依赖构造子 ($F_\varphi$)**：
        对任意 $\varphi \in \text{Form}_{\alpha}$，引入符号 $F_\varphi := (\text{'dep\_op'}, \varphi)$。
    
    *   **扩展项集 ($\text{Term}_{\alpha+1}$)**：
        $$ \begin{aligned} \text{Term}_{\alpha+1} = \text{Term}_\alpha &\cup \{ f(\vec{t}) \mid f \in \text{Func}, \vec{t} \in \text{Term}_{\alpha+1} \} \\ &\cup \{ F_\varphi(t) \mid \varphi \in \text{Form}_{\alpha}, t \in \text{Term}_{\alpha+1} \} \end{aligned} $$
    
    *   **扩展语句集 ($\text{Stat}_{\alpha+1}$)**：
        $$ \begin{aligned} \text{Stat}_{\alpha+1} = \text{Stat}_\alpha &\cup \{ P(\vec{t}) \mid P \in \text{Pred}, \vec{t} \in \text{Term}_{\alpha+1} \} \\ &\cup \{ \mathfrak{D}(t, \Gamma) \mid t \in \text{Term}_{\alpha+1}, \Gamma \in \text{Fin}(\text{Stat}_{\alpha+1}) \} \end{aligned} $$
        *注：记 $\mathfrak{D}(t, \Gamma)$ 为 $\text{dep}(t, \Gamma)$。*
    
    *   **集合汇总**：
        $$ U_{\alpha+1} = \text{Term}_{\alpha+1} \cup \text{Stat}_{\alpha+1} \cup \text{Form}_{\alpha} $$

3.  **极限步 ($U_\lambda$)**：
    $$ U_\lambda = \bigcup_{\beta < \lambda} U_\beta $$

**全集定义**：
取最小的极限序数 $\omega$（或满足封闭性的序数 $\kappa$），定义句法全集 $\mathbb{U} = U_\omega$。从中析出最终集合：
*   $\text{Term} = \mathbb{U} \cap \text{Terms}$
*   $\text{Stat} = \mathbb{U} \cap \text{Stats}$
*   $\text{Form} = \{ (\Gamma, s) \mid \Gamma \in \text{Fin}(\text{Stat}), s \in \text{Stat} \}$

---

## 2. 系统定义

**依赖形式系统**是一个五元组：
$$ \mathcal{G}^* = (V, \text{Func}, \text{Pred}, R, \vdash) $$

其中：
*   $R \subseteq \text{Form}$ 是**规则集**（Rule Set）。
*   $\vdash \subseteq \text{Form} \times \text{Form}$ 是**推导关系**。

---

## 3. 推导关系 ($\vdash$)

关系 $\vdash$ 定义为满足以下所有规则的**最小传递闭包**。
记 $\varphi \vdash \psi$ 表示 $(\varphi, \psi) \in \vdash$。
记 $(\emptyset, s)$ 为 $\emptyset \Rightarrow s$。

### 3.1 基础逻辑规则


1.  **基底依赖 (Grounding)**
    $$ \forall x \in V, \quad \emptyset \vdash (\emptyset \Rightarrow \text{dep}(x, \emptyset)) $$
2.  **同一律 (Identity)**：
    $$ \forall \varphi \in \text{Form}, \quad \varphi \vdash \varphi $$
3.  **公理引入 (Axiom Injection)**：
    $$ \forall \varphi \in R, \quad \emptyset  \vdash \varphi $$

### 3.2 结构规则 (Structural Rules)
3.  **传递性 (Transitivity / Cut)**：
    $$ \frac{\varphi \vdash \chi \quad \chi \vdash \psi}{\varphi \vdash \psi} $$
4.  **内部弱化 (Internal Weakening)**：
    若 $\varphi = (\Gamma \Rightarrow s)$，$\psi = (\Gamma \cup \Delta \Rightarrow s)$，则 $\varphi \vdash \psi$。

### 3.3 依赖构造规则 (Dependency Rules)
5.  **封装规则 (Encapsulation)**：
    对任意 $\varphi = (\Gamma \Rightarrow s) \in R$ 以及任意 $t \in \text{Term}$：
    $$ \frac{\emptyset \vdash (\emptyset \Rightarrow \text{dep}(t, \Gamma)) \quad \emptyset \vdash (\Gamma \Rightarrow s)} {\emptyset \vdash (\emptyset \Rightarrow \text{dep}(F_\varphi(t), \{s\}))} $$
    *(注：在 $R$ 中选取 $\varphi$ 意味着 $\Gamma \Rightarrow s$ 已确立)*

### 3.4 协变规则 (Covariance / Functoriality)
6.  **规则映射 (Morphism)**：
    对任意 $\varphi, \psi \in R$，若 $\varphi \vdash \psi$，则对任意 $t \in \text{Term}$：
    $$ \frac{\emptyset \vdash (\emptyset \Rightarrow \text{dep}(F_\varphi(t), \{s_\varphi\}))} {\emptyset \vdash (\emptyset \Rightarrow \text{dep}(F_\psi(t), \{s_\psi\}))} $$
    其中 $s_\varphi, s_\psi$ 分别为 $\varphi, \psi$ 的后件。

---

## 4. 依赖结构与性质

基于上述系统 $\mathcal{G}^*$，定义如下数学结构：

### 4.1 规则偏序集
$$ (\mathcal{P}_R, \le_R) $$
*   $\mathcal{P}_R = R$。
*   $\le_R$ 是 $\vdash$ 在 $R$ 上的限制：
    $$ \forall \varphi, \psi \in R, \quad \varphi \le_R \psi \iff \varphi \vdash \psi $$

### 4.2 项依赖函数集与偏序
定义映射 $h_\varphi : \text{Term} \to \text{Stat}$ 为：
$$ h_\varphi(t) = \text{dep}(F_\varphi(t), \{s_\varphi\}) $$
令 $D_T = \{ h_\varphi \mid \varphi \in R \}$。

定义 $D_T$ 上的偏序 $\le_T$：
$$ h_\varphi \le_T h_\psi \iff \forall t \in \text{Term}, \ (\emptyset \Rightarrow h_\varphi(t)) \vdash (\emptyset \Rightarrow h_\psi(t)) $$

### 4.3 核心映射
定义同态 $H : R \to D_T$：
$$ H(\varphi) = h_\varphi $$

---

## 5. 语义条件

**存在性与同构性语义约束**：
在上述构造的 $\mathcal{G}^*$ 系统中，应当满足如下条件：
1.  **良构性**：集合 $\text{Term}, \text{Stat}, \text{Form}$ 及推导关系 $\vdash$ 均良定义（Well-defined）。
2.  **单射性**：$H$ 是单射。
3.  **保序同构**：对任意 $\varphi, \psi \in R$，
    $$ \varphi \le_R \psi \iff H(\varphi) \le_T H(\psi) $$
